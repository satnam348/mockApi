{
  "home": {
    "-L6ksYPv18TV0hEv0KIk": {
      "description": " <p> A Pattern is a kind of reusable solution you can say it can be applied to common occurring problem in your application\n    in the Software design.In this article i will be considering only JavaScript applications.\n  </p>\n  <h4>Why to use Pattern in your Applications ?</h4>\n\n  <p>It’s when you move beyond the simple & rough snippets of JQuery and started working on the more complex User Interactions\n    then your code difficult to understand and it becomes messy sometimes to debug the Application.</p>\n  <p>Pattern provides solid approaches to solve issues in Software Development.</p>\n  <p>Like we said pattern is a reusable solution that can be adapted to suit our own needs hence this make the application more\n    robust ever.</p>\n  <ul class=\"postList\">\n    <li >If you are reusing the pattern so reusing patterns assists in preventing the minor issues that can cause the major problems\n      in the Application Development Process.</li>\n    <li >Patterns are generalised solutions to a problem.So the generalised approach means that regardless of the application&nbsp;,so\n      the Design pattern can be applied to improve the structure of our code.</li>\n    <li >If you are reusing the code or solution so naturally it’s going to reduce the File size.</li>\n  </ul>\n<h4>Pattern is a Template ?</h4>\n<p>Yes , Pattern are not the exact solution to some problem.It’s a template so the role of a pattern to provide the solution scheme.</p>\n",
      "pattern": "What is a Pattern ?"
    }
  },
  "patterns": {
    "-L6a1m7b3A-OunFnwL_l": {
      "description": "        <p>The Command pattern aims to encapsulate method invocation, requests or operations into a single object and gives us the ability to both parameterize and pass method calls around that can be executed at our discretion. In addition, it enables us to decouple objects invoking the action from the objects which implement them, giving us a greater degree of overall flexibility in swapping out concrete <em>classes</em> (objects).</p>\n\n        <p><em>Concrete</em> classes are best explained in terms of class-based programming languages and are related to the idea of abstract classes. An <em>abstract</em> class defines an interface, but doesn't necessarily provide implementations for all of its member functions. It acts as a base class from which others are derived. A derived class which implements the missing functionality is called a <em>concrete</em> class. </p>\n\n        <p>The general idea behind the Command pattern is that it provides us a means to separate the responsibilities of issuing commands from anything executing commands, delegating this responsibility to different objects instead.</p>\n\n        <p>Implementation wise, simple command objects bind together both an action and the object wishing to invoke the action. They consistently include an execution operation (such as <code>run()</code> or <code>execute()</code>). All Command objects with the same interface can easily be swapped as needed and this is considered one of the larger benefits of the pattern.</p>\n\n        <p>To demonstrate the Command pattern we're going to create a simple car purchasing service.</p>\n        <p></p><div><div id=\"highlighter_577860\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js plain\">(</code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">carManager = {</code></div><div class=\"line number4 index3 alt1\">&nbsp;</div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// request information</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">requestInfo: </code><code class=\"js keyword\">function</code><code class=\"js plain\">( model, id ){</code></div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js string\">\"The information for \"</code> <code class=\"js plain\">+ model + </code><code class=\"js string\">\" with ID \"</code> <code class=\"js plain\">+ id + </code><code class=\"js string\">\" is foobar\"</code><code class=\"js plain\">;</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number9 index8 alt2\">&nbsp;</div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// purchase the car</code></div><div class=\"line number11 index10 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">buyVehicle: </code><code class=\"js keyword\">function</code><code class=\"js plain\">( model, id ){</code></div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js string\">\"You have successfully purchased Item \"</code> <code class=\"js plain\">+ id + </code><code class=\"js string\">\", a \"</code> <code class=\"js plain\">+ model;</code></div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number14 index13 alt1\">&nbsp;</div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// arrange a viewing</code></div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">arrangeViewing: </code><code class=\"js keyword\">function</code><code class=\"js plain\">( model, id ){</code></div><div class=\"line number17 index16 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js string\">\"You have successfully booked a viewing of \"</code> <code class=\"js plain\">+ model + </code><code class=\"js string\">\" ( \"</code> <code class=\"js plain\">+ id + </code><code class=\"js string\">\" ) \"</code><code class=\"js plain\">;</code></div><div class=\"line number18 index17 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number19 index18 alt2\">&nbsp;</div><div class=\"line number20 index19 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number21 index20 alt2\">&nbsp;</div><div class=\"line number22 index21 alt1\"><code class=\"js plain\">})();</code></div></div></td></tr></tbody></table></div></div><p></p>\n\n        <p>Taking a look at the above code, it would be trivial to invoke our <code>carManager</code> methods by directly accessing the object. We would all be forgiven for thinking there is nothing wrong with this - technically, it's completely valid JavaScript. There are however scenarios where this may be disadvantageous.</p>\n\n        <p>For example, imagine if the core API behind the <code>carManager</code> changed. This would require all objects directly accessing these methods within our application to also be modified. This could be viewed as a layer of coupling which effectively goes against the OOP methodology of loosely coupling objects as much as possible. Instead, we could solve this problem by abstracting the API away further.</p>\n\n        <p>Let's now expand on our <code>carManager</code> so that our application of the Command pattern results in the following: accept any named methods that can be performed on the <code>carManager</code> object, passing along any data that might be used such as the Car model and ID.</p>\n\n        <p>Here is what we would like to be able to achieve:</p>\n\n        <p></p><div><div id=\"highlighter_92784\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js plain\">carManager.execute( </code><code class=\"js string\">\"buyVehicle\"</code><code class=\"js plain\">, </code><code class=\"js string\">\"Ford Escort\"</code><code class=\"js plain\">, </code><code class=\"js string\">\"453543\"</code> <code class=\"js plain\">);</code></div></div></td></tr></tbody></table></div></div>\n        <p></p>\n        <p>\n        As per this structure we should now add a definition for the <code>carManager.execute</code> method as follows:\n        </p>\n        <p></p><div><div id=\"highlighter_686658\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js plain\">carManager.execute = </code><code class=\"js keyword\">function</code> <code class=\"js plain\">( name ) {</code></div><div class=\"line number2 index1 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">carManager[name] &amp;&amp; carManager[name].apply( carManager, [].slice.call(arguments, 1) );</code></div><div class=\"line number3 index2 alt2\"><code class=\"js plain\">};</code></div></div></td></tr></tbody></table></div></div><p></p>\n        <p>Our final sample calls would thus look as follows:</p>\n\n        <p></p><div><div id=\"highlighter_740717\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js plain\">carManager.execute( </code><code class=\"js string\">\"arrangeViewing\"</code><code class=\"js plain\">, </code><code class=\"js string\">\"Ferrari\"</code><code class=\"js plain\">, </code><code class=\"js string\">\"14523\"</code> <code class=\"js plain\">);</code></div><div class=\"line number2 index1 alt1\"><code class=\"js plain\">carManager.execute( </code><code class=\"js string\">\"requestInfo\"</code><code class=\"js plain\">, </code><code class=\"js string\">\"Ford Mondeo\"</code><code class=\"js plain\">, </code><code class=\"js string\">\"54323\"</code> <code class=\"js plain\">);</code></div><div class=\"line number3 index2 alt2\"><code class=\"js plain\">carManager.execute( </code><code class=\"js string\">\"requestInfo\"</code><code class=\"js plain\">, </code><code class=\"js string\">\"Ford Escort\"</code><code class=\"js plain\">, </code><code class=\"js string\">\"34232\"</code> <code class=\"js plain\">);</code></div><div class=\"line number4 index3 alt1\"><code class=\"js plain\">carManager.execute( </code><code class=\"js string\">\"buyVehicle\"</code><code class=\"js plain\">, </code><code class=\"js string\">\"Ford Escort\"</code><code class=\"js plain\">, </code><code class=\"js string\">\"34232\"</code> <code class=\"js plain\">);</code></div></div></td></tr></tbody></table></div></div><p></p>",
      "pattern": "The Command Pattern"
    },
    "-L6a2A1ig8-XxWZsczCd": {
      "description": " <p>In classical object-oriented programming languages, a constructor is a special method used to initialize a newly created object once memory has been allocated for it. In JavaScript, as almost everything is an object, we're most often interested in <em>object</em> constructors.</p>\n\n    <p>Object constructors are used to create specific types of objects - both preparing the object for use and accepting arguments which a constructor can use to set the values of member properties and methods when the object is first created. </p>\n\n    <h3>Object Creation</h3>\n\n    <p>The three common ways to create new objects in JavaScript are as follows:</p>\n\n    <p></p><div><div id=\"highlighter_695670\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js comments\">// Each of the following options will create a new empty object:</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">newObject = {};</code></div><div class=\"line number4 index3 alt1\">&nbsp;</div><div class=\"line number5 index4 alt2\"><code class=\"js comments\">// or</code></div><div class=\"line number6 index5 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">newObject = Object.create( Object.prototype );</code></div><div class=\"line number7 index6 alt2\">&nbsp;</div><div class=\"line number8 index7 alt1\"><code class=\"js comments\">// or</code></div><div class=\"line number9 index8 alt2\"><code class=\"js keyword\">var</code>&nbsp;<code class=\"js plain\">newObject&nbsp;=&nbsp;</code><code class=\"js keyword\">new</code>&nbsp;<code class=\"js plain\">Object();</code></div></div></td></tr></tbody></table></div></div><p></p>\n\n    <p>Where the \"Object\" constructor in the final example creates an object wrapper for a specific value, or where no value is passed, it will create an empty object and return it.</p>\n\n    <p>There are then four ways in which keys and values can then be assigned to an object:</p>\n\n    <p></p><div><div id=\"highlighter_606229\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div><div class=\"line number31 index30 alt2\">31</div><div class=\"line number32 index31 alt1\">32</div><div class=\"line number33 index32 alt2\">33</div><div class=\"line number34 index33 alt1\">34</div><div class=\"line number35 index34 alt2\">35</div><div class=\"line number36 index35 alt1\">36</div><div class=\"line number37 index36 alt2\">37</div><div class=\"line number38 index37 alt1\">38</div><div class=\"line number39 index38 alt2\">39</div><div class=\"line number40 index39 alt1\">40</div><div class=\"line number41 index40 alt2\">41</div><div class=\"line number42 index41 alt1\">42</div><div class=\"line number43 index42 alt2\">43</div><div class=\"line number44 index43 alt1\">44</div><div class=\"line number45 index44 alt2\">45</div><div class=\"line number46 index45 alt1\">46</div><div class=\"line number47 index46 alt2\">47</div><div class=\"line number48 index47 alt1\">48</div><div class=\"line number49 index48 alt2\">49</div><div class=\"line number50 index49 alt1\">50</div><div class=\"line number51 index50 alt2\">51</div><div class=\"line number52 index51 alt1\">52</div><div class=\"line number53 index52 alt2\">53</div><div class=\"line number54 index53 alt1\">54</div><div class=\"line number55 index54 alt2\">55</div><div class=\"line number56 index55 alt1\">56</div><div class=\"line number57 index56 alt2\">57</div><div class=\"line number58 index57 alt1\">58</div><div class=\"line number59 index58 alt2\">59</div><div class=\"line number60 index59 alt1\">60</div><div class=\"line number61 index60 alt2\">61</div><div class=\"line number62 index61 alt1\">62</div><div class=\"line number63 index62 alt2\">63</div><div class=\"line number64 index63 alt1\">64</div><div class=\"line number65 index64 alt2\">65</div><div class=\"line number66 index65 alt1\">66</div><div class=\"line number67 index66 alt2\">67</div><div class=\"line number68 index67 alt1\">68</div><div class=\"line number69 index68 alt2\">69</div><div class=\"line number70 index69 alt1\">70</div><div class=\"line number71 index70 alt2\">71</div><div class=\"line number72 index71 alt1\">72</div><div class=\"line number73 index72 alt2\">73</div><div class=\"line number74 index73 alt1\">74</div><div class=\"line number75 index74 alt2\">75</div><div class=\"line number76 index75 alt1\">76</div><div class=\"line number77 index76 alt2\">77</div><div class=\"line number78 index77 alt1\">78</div><div class=\"line number79 index78 alt2\">79</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js comments\">// ECMAScript 3 compatible approaches</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js comments\">// 1. Dot syntax</code></div><div class=\"line number4 index3 alt1\">&nbsp;</div><div class=\"line number5 index4 alt2\"><code class=\"js comments\">// Set properties</code></div><div class=\"line number6 index5 alt1\"><code class=\"js plain\">newObject.someKey = </code><code class=\"js string\">\"Hello World\"</code><code class=\"js plain\">;</code></div><div class=\"line number7 index6 alt2\">&nbsp;</div><div class=\"line number8 index7 alt1\"><code class=\"js comments\">// Get properties</code></div><div class=\"line number9 index8 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">value = newObject.someKey;</code></div><div class=\"line number10 index9 alt1\">&nbsp;</div><div class=\"line number11 index10 alt2\">&nbsp;</div><div class=\"line number12 index11 alt1\">&nbsp;</div><div class=\"line number13 index12 alt2\"><code class=\"js comments\">// 2. Square bracket syntax</code></div><div class=\"line number14 index13 alt1\">&nbsp;</div><div class=\"line number15 index14 alt2\"><code class=\"js comments\">// Set properties</code></div><div class=\"line number16 index15 alt1\"><code class=\"js plain\">newObject[</code><code class=\"js string\">\"someKey\"</code><code class=\"js plain\">] = </code><code class=\"js string\">\"Hello World\"</code><code class=\"js plain\">;</code></div><div class=\"line number17 index16 alt2\">&nbsp;</div><div class=\"line number18 index17 alt1\"><code class=\"js comments\">// Get properties</code></div><div class=\"line number19 index18 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">value = newObject[</code><code class=\"js string\">\"someKey\"</code><code class=\"js plain\">];</code></div><div class=\"line number20 index19 alt1\">&nbsp;</div><div class=\"line number21 index20 alt2\">&nbsp;</div><div class=\"line number22 index21 alt1\">&nbsp;</div><div class=\"line number23 index22 alt2\"><code class=\"js comments\">// ECMAScript 5 only compatible approaches</code></div><div class=\"line number24 index23 alt1\"><code class=\"js comments\">// For more information see: <a href=\"http://kangax.github.com/es5-compat-table/\">http://kangax.github.com/es5-compat-table/</a></code></div><div class=\"line number25 index24 alt2\">&nbsp;</div><div class=\"line number26 index25 alt1\"><code class=\"js comments\">// 3. Object.defineProperty</code></div><div class=\"line number27 index26 alt2\">&nbsp;</div><div class=\"line number28 index27 alt1\"><code class=\"js comments\">// Set properties</code></div><div class=\"line number29 index28 alt2\"><code class=\"js plain\">Object.defineProperty( newObject, </code><code class=\"js string\">\"someKey\"</code><code class=\"js plain\">, {</code></div><div class=\"line number30 index29 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">value: </code><code class=\"js string\">\"for more control of the property's behavior\"</code><code class=\"js plain\">,</code></div><div class=\"line number31 index30 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">writable: </code><code class=\"js keyword\">true</code><code class=\"js plain\">,</code></div><div class=\"line number32 index31 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">enumerable: </code><code class=\"js keyword\">true</code><code class=\"js plain\">,</code></div><div class=\"line number33 index32 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">configurable: </code><code class=\"js keyword\">true</code></div><div class=\"line number34 index33 alt1\"><code class=\"js plain\">});</code></div><div class=\"line number35 index34 alt2\">&nbsp;</div><div class=\"line number36 index35 alt1\"><code class=\"js comments\">// If the above feels a little difficult to read, a short-hand could</code></div><div class=\"line number37 index36 alt2\"><code class=\"js comments\">// be written as follows:</code></div><div class=\"line number38 index37 alt1\">&nbsp;</div><div class=\"line number39 index38 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">defineProp = </code><code class=\"js keyword\">function</code> <code class=\"js plain\">( obj, key, value ){</code></div><div class=\"line number40 index39 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">config = {</code></div><div class=\"line number41 index40 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">value: value,</code></div><div class=\"line number42 index41 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">writable: </code><code class=\"js keyword\">true</code><code class=\"js plain\">,</code></div><div class=\"line number43 index42 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">enumerable: </code><code class=\"js keyword\">true</code><code class=\"js plain\">,</code></div><div class=\"line number44 index43 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">configurable: </code><code class=\"js keyword\">true</code></div><div class=\"line number45 index44 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number46 index45 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">Object.defineProperty( obj, key, config );</code></div><div class=\"line number47 index46 alt2\"><code class=\"js plain\">};</code></div><div class=\"line number48 index47 alt1\">&nbsp;</div><div class=\"line number49 index48 alt2\"><code class=\"js comments\">// To use, we then create a new empty \"person\" object</code></div><div class=\"line number50 index49 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">person = Object.create( Object.prototype );</code></div><div class=\"line number51 index50 alt2\">&nbsp;</div><div class=\"line number52 index51 alt1\"><code class=\"js comments\">// Populate the object with properties</code></div><div class=\"line number53 index52 alt2\"><code class=\"js plain\">defineProp( person, </code><code class=\"js string\">\"car\"</code><code class=\"js plain\">, </code><code class=\"js string\">\"Delorean\"</code> <code class=\"js plain\">);</code></div><div class=\"line number54 index53 alt1\"><code class=\"js plain\">defineProp( person, </code><code class=\"js string\">\"dateOfBirth\"</code><code class=\"js plain\">, </code><code class=\"js string\">\"1981\"</code> <code class=\"js plain\">);</code></div><div class=\"line number55 index54 alt2\"><code class=\"js plain\">defineProp( person, </code><code class=\"js string\">\"hasBeard\"</code><code class=\"js plain\">, </code><code class=\"js keyword\">false</code> <code class=\"js plain\">);</code></div><div class=\"line number56 index55 alt1\">&nbsp;</div><div class=\"line number57 index56 alt2\"><code class=\"js plain\">console.log(person);</code></div><div class=\"line number58 index57 alt1\"><code class=\"js comments\">// Outputs: Object {car: \"Delorean\", dateOfBirth: \"1981\", hasBeard: false}</code></div><div class=\"line number59 index58 alt2\">&nbsp;</div><div class=\"line number60 index59 alt1\">&nbsp;</div><div class=\"line number61 index60 alt2\"><code class=\"js comments\">// 4. Object.defineProperties</code></div><div class=\"line number62 index61 alt1\">&nbsp;</div><div class=\"line number63 index62 alt2\"><code class=\"js comments\">// Set properties</code></div><div class=\"line number64 index63 alt1\"><code class=\"js plain\">Object.defineProperties( newObject, {</code></div><div class=\"line number65 index64 alt2\">&nbsp;</div><div class=\"line number66 index65 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js string\">\"someKey\"</code><code class=\"js plain\">: {</code></div><div class=\"line number67 index66 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">value: </code><code class=\"js string\">\"Hello World\"</code><code class=\"js plain\">,</code></div><div class=\"line number68 index67 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">writable: </code><code class=\"js keyword\">true</code></div><div class=\"line number69 index68 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number70 index69 alt1\">&nbsp;</div><div class=\"line number71 index70 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js string\">\"anotherKey\"</code><code class=\"js plain\">: {</code></div><div class=\"line number72 index71 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">value: </code><code class=\"js string\">\"Foo bar\"</code><code class=\"js plain\">,</code></div><div class=\"line number73 index72 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">writable: </code><code class=\"js keyword\">false</code></div><div class=\"line number74 index73 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number75 index74 alt2\">&nbsp;</div><div class=\"line number76 index75 alt1\"><code class=\"js plain\">});</code></div><div class=\"line number77 index76 alt2\">&nbsp;</div><div class=\"line number78 index77 alt1\"><code class=\"js comments\">// Getting properties for 3. and 4. can be done using any of the</code></div><div class=\"line number79 index78 alt2\"><code class=\"js comments\">// options in 1. and 2.</code></div></div></td></tr></tbody></table></div></div><p></p>\n\n    <p>As we will see a little later in the book, these methods can even be used for inheritance, as follows:</p>\n\n    <p></p><div><div id=\"highlighter_936360\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js comments\">// Usage:</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js comments\">// Create a race car driver that inherits from the person object</code></div><div class=\"line number4 index3 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">driver = Object.create( person );</code></div><div class=\"line number5 index4 alt2\">&nbsp;</div><div class=\"line number6 index5 alt1\"><code class=\"js comments\">// Set some properties for the driver</code></div><div class=\"line number7 index6 alt2\"><code class=\"js plain\">defineProp(driver, </code><code class=\"js string\">\"topSpeed\"</code><code class=\"js plain\">, </code><code class=\"js string\">\"100mph\"</code><code class=\"js plain\">);</code></div><div class=\"line number8 index7 alt1\">&nbsp;</div><div class=\"line number9 index8 alt2\"><code class=\"js comments\">// Get an inherited property (1981)</code></div><div class=\"line number10 index9 alt1\"><code class=\"js plain\">console.log( driver.dateOfBirth );</code></div><div class=\"line number11 index10 alt2\">&nbsp;</div><div class=\"line number12 index11 alt1\"><code class=\"js comments\">// Get the property we set (100mph)</code></div><div class=\"line number13 index12 alt2\"><code class=\"js plain\">console.log( driver.topSpeed );</code></div></div></td></tr></tbody></table></div></div><p></p>\n\n\n    <h3>Basic Constructors</h3>\n\n    <p>As we saw earlier, JavaScript doesn't support the concept of classes but it does support special constructor functions that work with objects. By simply prefixing a call to a constructor function with the keyword \"new\", we can tell JavaScript we would like the function to behave like a constructor and instantiate a new object with the members defined by that function.</p>\n\n    <p>Inside a constructor, the keyword <em>this</em> references the new object that's being created. Revisiting object creation, a basic constructor may look as follows:</p>\n\n    <p></p><div><div id=\"highlighter_556353\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">function</code> <code class=\"js plain\">Car( model, year, miles ) {</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.model = model;</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.year = year;</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.miles = miles;</code></div><div class=\"line number6 index5 alt1\">&nbsp;</div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.toString = </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js keyword\">this</code><code class=\"js plain\">.model + </code><code class=\"js string\">\" has done \"</code> <code class=\"js plain\">+ </code><code class=\"js keyword\">this</code><code class=\"js plain\">.miles + </code><code class=\"js string\">\" miles\"</code><code class=\"js plain\">;</code></div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number10 index9 alt1\"><code class=\"js plain\">}</code></div><div class=\"line number11 index10 alt2\">&nbsp;</div><div class=\"line number12 index11 alt1\"><code class=\"js comments\">// Usage:</code></div><div class=\"line number13 index12 alt2\">&nbsp;</div><div class=\"line number14 index13 alt1\"><code class=\"js comments\">// We can create new instances of the car</code></div><div class=\"line number15 index14 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">civic = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">Car( </code><code class=\"js string\">\"Honda Civic\"</code><code class=\"js plain\">, 2009, 20000 );</code></div><div class=\"line number16 index15 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">mondeo = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">Car( </code><code class=\"js string\">\"Ford Mondeo\"</code><code class=\"js plain\">, 2010, 5000 );</code></div><div class=\"line number17 index16 alt2\">&nbsp;</div><div class=\"line number18 index17 alt1\"><code class=\"js comments\">// and then open our browser console to view the</code></div><div class=\"line number19 index18 alt2\"><code class=\"js comments\">// output of the toString() method being called on</code></div><div class=\"line number20 index19 alt1\"><code class=\"js comments\">// these objects</code></div><div class=\"line number21 index20 alt2\"><code class=\"js plain\">console.log( civic.toString() );</code></div><div class=\"line number22 index21 alt1\"><code class=\"js plain\">console.log( mondeo.toString() );</code></div></div></td></tr></tbody></table></div></div><p></p>\n\n\n    <p>The above is a simple version of the constructor pattern but it does suffer from some problems. One is that it makes inheritance difficult and the other is that functions such as <code>toString()</code> are redefined for each of the new objects created using the Car constructor. This isn't very optimal as the function should ideally be shared between all of the instances of the Car type.</p>\n\n    <p>Thankfully as there are a number of both ES3 and ES5-compatible alternatives to constructing objects, it's trivial to work around this limitation.</p>\n\n\n\n    <h3>Constructors With Prototypes</h3>\n\n    <p>Functions, like almost all objects in JavaScript, contain a \"prototype\" object. When we call a JavaScript constructor to create an object, all the properties of the constructor's prototype are then made available to the new object. In this fashion, multiple Car objects can be created which access the same prototype. We can thus extend the original example as follows:\n    </p>\n\n    <p></p><div><div id=\"highlighter_811196\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">function</code> <code class=\"js plain\">Car( model, year, miles ) {</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.model = model;</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.year = year;</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.miles = miles;</code></div><div class=\"line number6 index5 alt1\">&nbsp;</div><div class=\"line number7 index6 alt2\"><code class=\"js plain\">}</code></div><div class=\"line number8 index7 alt1\">&nbsp;</div><div class=\"line number9 index8 alt2\">&nbsp;</div><div class=\"line number10 index9 alt1\"><code class=\"js comments\">// Note here that we are using Object.prototype.newMethod rather than</code></div><div class=\"line number11 index10 alt2\"><code class=\"js comments\">// Object.prototype so as to avoid redefining the prototype object</code></div><div class=\"line number12 index11 alt1\"><code class=\"js plain\">Car.prototype.toString = </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js keyword\">this</code><code class=\"js plain\">.model + </code><code class=\"js string\">\" has done \"</code> <code class=\"js plain\">+ </code><code class=\"js keyword\">this</code><code class=\"js plain\">.miles + </code><code class=\"js string\">\" miles\"</code><code class=\"js plain\">;</code></div><div class=\"line number14 index13 alt1\"><code class=\"js plain\">};</code></div><div class=\"line number15 index14 alt2\">&nbsp;</div><div class=\"line number16 index15 alt1\"><code class=\"js comments\">// Usage:</code></div><div class=\"line number17 index16 alt2\">&nbsp;</div><div class=\"line number18 index17 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">civic = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">Car( </code><code class=\"js string\">\"Honda Civic\"</code><code class=\"js plain\">, 2009, 20000 );</code></div><div class=\"line number19 index18 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">mondeo = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">Car( </code><code class=\"js string\">\"Ford Mondeo\"</code><code class=\"js plain\">, 2010, 5000 );</code></div><div class=\"line number20 index19 alt1\">&nbsp;</div><div class=\"line number21 index20 alt2\"><code class=\"js plain\">console.log( civic.toString() );</code></div><div class=\"line number22 index21 alt1\"><code class=\"js plain\">console.log( mondeo.toString() );</code></div></div></td></tr></tbody></table></div></div><p></p>\n\n    <p>Above, a single instance of toString() will now be shared between all of the Car objects.</p>\n",
      "pattern": "The Constructor Pattern"
    },
    "-L6a2JdMQKqhF5BePPBc": {
      "description": " <p>Decorators are a structural design pattern that aim to promote code re-use. Similar to Mixins, they can be considered another viable alternative to object sub-classing.</p>\n\n          <p>Classically, Decorators offered the ability to add behaviour to existing classes in a system dynamically. The idea was that the <em>decoration</em> itself wasn't essential to the base functionality of the class, otherwise it would be baked into the <em>superclass</em> itself.</p>\n\n          <p>They can be used to modify existing systems where we wish to add additional features to objects without the need to heavily modify the underlying code using them. A common reason why developers use them is their applications may contain features requiring a large quantity of distinct types of object. Imagine having to define hundreds of different object constructors for say, a JavaScript game.</p>\n\n          <p>The object constructors could represent distinct player types, each with differing capabilities. A <em>Lord of the Rings</em> game could require constructors for <code>Hobbit</code>, <code>Elf</code>, <code>Orc</code>, <code>Wizard</code>, <code>Mountain Giant</code>, <code>Stone Giant</code> and so on, but there could easily be hundreds of these. If we then factored in capabilities, imagine having to create sub-classes for each combination of capability type e.g <code>HobbitWithRing</code>,<code>HobbitWithSword</code>, <code>HobbitWithRingAndSword</code> and so on.This isn't very practical and certainly isn't manageable when we factor in a growing number of different abilities.</p>\n\n          <p>The Decorator pattern isn't heavily tied to how objects are created but instead focuses on the problem of extending their functionality. Rather than just relying on prototypal inheritance, we work with a single base object and progressively add decorator objects which provide the additional capabilities. The idea is that rather than sub-classing, we add (decorate) properties or methods to a base object so it's a little more streamlined.</p>\n\n          <p>Adding new attributes to objects in JavaScript is a very straight-forward process so with this in mind, a very simplistic decorator may be implemented as follows:</p>\n\n          <h3>Example 1: Decorating Constructors With New Functionality</h3>\n\n          <div><div id=\"highlighter_419333\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div><div class=\"line number31 index30 alt2\">31</div><div class=\"line number32 index31 alt1\">32</div><div class=\"line number33 index32 alt2\">33</div><div class=\"line number34 index33 alt1\">34</div><div class=\"line number35 index34 alt2\">35</div><div class=\"line number36 index35 alt1\">36</div><div class=\"line number37 index36 alt2\">37</div><div class=\"line number38 index37 alt1\">38</div><div class=\"line number39 index38 alt2\">39</div><div class=\"line number40 index39 alt1\">40</div><div class=\"line number41 index40 alt2\">41</div><div class=\"line number42 index41 alt1\">42</div><div class=\"line number43 index42 alt2\">43</div><div class=\"line number44 index43 alt1\">44</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js comments\">// A vehicle constructor</code></div><div class=\"line number2 index1 alt1\"><code class=\"js keyword\">function</code> <code class=\"js plain\">Vehicle( vehicleType ){</code></div><div class=\"line number3 index2 alt2\">&nbsp;</div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// some sane defaults</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.vehicleType = vehicleType || </code><code class=\"js string\">\"car\"</code><code class=\"js plain\">;</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.model = </code><code class=\"js string\">\"default\"</code><code class=\"js plain\">;</code></div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.license = </code><code class=\"js string\">\"00000-000\"</code><code class=\"js plain\">;</code></div><div class=\"line number8 index7 alt1\">&nbsp;</div><div class=\"line number9 index8 alt2\"><code class=\"js plain\">}</code></div><div class=\"line number10 index9 alt1\">&nbsp;</div><div class=\"line number11 index10 alt2\"><code class=\"js comments\">// Test instance for a basic vehicle</code></div><div class=\"line number12 index11 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">testInstance = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">Vehicle( </code><code class=\"js string\">\"car\"</code> <code class=\"js plain\">);</code></div><div class=\"line number13 index12 alt2\"><code class=\"js plain\">console.log( testInstance );</code></div><div class=\"line number14 index13 alt1\">&nbsp;</div><div class=\"line number15 index14 alt2\"><code class=\"js comments\">// Outputs:</code></div><div class=\"line number16 index15 alt1\"><code class=\"js comments\">// vehicle: car, model:default, license: 00000-000</code></div><div class=\"line number17 index16 alt2\">&nbsp;</div><div class=\"line number18 index17 alt1\"><code class=\"js comments\">// Lets create a new instance of vehicle, to be decorated</code></div><div class=\"line number19 index18 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">truck = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">Vehicle( </code><code class=\"js string\">\"truck\"</code> <code class=\"js plain\">);</code></div><div class=\"line number20 index19 alt1\">&nbsp;</div><div class=\"line number21 index20 alt2\"><code class=\"js comments\">// New functionality we're decorating vehicle with</code></div><div class=\"line number22 index21 alt1\"><code class=\"js plain\">truck.setModel = </code><code class=\"js keyword\">function</code><code class=\"js plain\">( modelName ){</code></div><div class=\"line number23 index22 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.model = modelName;</code></div><div class=\"line number24 index23 alt1\"><code class=\"js plain\">};</code></div><div class=\"line number25 index24 alt2\">&nbsp;</div><div class=\"line number26 index25 alt1\"><code class=\"js plain\">truck.setColor = </code><code class=\"js keyword\">function</code><code class=\"js plain\">( color ){</code></div><div class=\"line number27 index26 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.color = color;</code></div><div class=\"line number28 index27 alt1\"><code class=\"js plain\">};</code></div><div class=\"line number29 index28 alt2\">&nbsp;</div><div class=\"line number30 index29 alt1\"><code class=\"js comments\">// Test the value setters and value assignment works correctly</code></div><div class=\"line number31 index30 alt2\"><code class=\"js plain\">truck.setModel( </code><code class=\"js string\">\"CAT\"</code> <code class=\"js plain\">);</code></div><div class=\"line number32 index31 alt1\"><code class=\"js plain\">truck.setColor( </code><code class=\"js string\">\"blue\"</code> <code class=\"js plain\">);</code></div><div class=\"line number33 index32 alt2\">&nbsp;</div><div class=\"line number34 index33 alt1\"><code class=\"js plain\">console.log( truck );</code></div><div class=\"line number35 index34 alt2\">&nbsp;</div><div class=\"line number36 index35 alt1\"><code class=\"js comments\">// Outputs:</code></div><div class=\"line number37 index36 alt2\"><code class=\"js comments\">// vehicle:truck, model:CAT, color: blue</code></div><div class=\"line number38 index37 alt1\">&nbsp;</div><div class=\"line number39 index38 alt2\"><code class=\"js comments\">// Demonstrate \"vehicle\" is still unaltered</code></div><div class=\"line number40 index39 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">secondInstance = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">Vehicle( </code><code class=\"js string\">\"car\"</code> <code class=\"js plain\">);</code></div><div class=\"line number41 index40 alt2\"><code class=\"js plain\">console.log( secondInstance );</code></div><div class=\"line number42 index41 alt1\">&nbsp;</div><div class=\"line number43 index42 alt2\"><code class=\"js comments\">// Outputs:</code></div><div class=\"line number44 index43 alt1\"><code class=\"js comments\">// vehicle: car, model:default, license: 00000-000</code></div></div></td></tr></tbody></table></div></div>\n\n          <p>This type of simplistic implementation is functional, but it doesn't really demonstrate all of the strengths Decorators have to offer. For this, we're first going to go through my variation of the Coffee example from an excellent book called <em>Head First Design Patterns</em> by Freeman, Sierra and Bates, which is modeled around a Macbook purchase.</p>\n\n          <h3>Example 2: Decorating Objects With Multiple Decorators</h3>\n          <div><div id=\"highlighter_699124\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div><div class=\"line number31 index30 alt2\">31</div><div class=\"line number32 index31 alt1\">32</div><div class=\"line number33 index32 alt2\">33</div><div class=\"line number34 index33 alt1\">34</div><div class=\"line number35 index34 alt2\">35</div><div class=\"line number36 index35 alt1\">36</div><div class=\"line number37 index36 alt2\">37</div><div class=\"line number38 index37 alt1\">38</div><div class=\"line number39 index38 alt2\">39</div><div class=\"line number40 index39 alt1\">40</div><div class=\"line number41 index40 alt2\">41</div><div class=\"line number42 index41 alt1\">42</div><div class=\"line number43 index42 alt2\">43</div><div class=\"line number44 index43 alt1\">44</div><div class=\"line number45 index44 alt2\">45</div><div class=\"line number46 index45 alt1\">46</div><div class=\"line number47 index46 alt2\">47</div><div class=\"line number48 index47 alt1\">48</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js comments\">// The constructor to decorate</code></div><div class=\"line number2 index1 alt1\"><code class=\"js keyword\">function</code> <code class=\"js plain\">MacBook() {</code></div><div class=\"line number3 index2 alt2\">&nbsp;</div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.cost = </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() { </code><code class=\"js keyword\">return</code> <code class=\"js plain\">997; };</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.screenSize = </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() { </code><code class=\"js keyword\">return</code> <code class=\"js plain\">11.6; };</code></div><div class=\"line number6 index5 alt1\">&nbsp;</div><div class=\"line number7 index6 alt2\"><code class=\"js plain\">}</code></div><div class=\"line number8 index7 alt1\">&nbsp;</div><div class=\"line number9 index8 alt2\"><code class=\"js comments\">// Decorator 1</code></div><div class=\"line number10 index9 alt1\"><code class=\"js keyword\">function</code> <code class=\"js plain\">memory( macbook ) {</code></div><div class=\"line number11 index10 alt2\">&nbsp;</div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">v = macbook.cost();</code></div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">macbook.cost = </code><code class=\"js keyword\">function</code><code class=\"js plain\">() {</code></div><div class=\"line number14 index13 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">v + 75;</code></div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number16 index15 alt1\">&nbsp;</div><div class=\"line number17 index16 alt2\"><code class=\"js plain\">}</code></div><div class=\"line number18 index17 alt1\">&nbsp;</div><div class=\"line number19 index18 alt2\"><code class=\"js comments\">// Decorator 2</code></div><div class=\"line number20 index19 alt1\"><code class=\"js keyword\">function</code> <code class=\"js plain\">engraving( macbook ){</code></div><div class=\"line number21 index20 alt2\">&nbsp;</div><div class=\"line number22 index21 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">v = macbook.cost();</code></div><div class=\"line number23 index22 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">macbook.cost = </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number24 index23 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">v + 200;</code></div><div class=\"line number25 index24 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number26 index25 alt1\">&nbsp;</div><div class=\"line number27 index26 alt2\"><code class=\"js plain\">}</code></div><div class=\"line number28 index27 alt1\">&nbsp;</div><div class=\"line number29 index28 alt2\"><code class=\"js comments\">// Decorator 3</code></div><div class=\"line number30 index29 alt1\"><code class=\"js keyword\">function</code> <code class=\"js plain\">insurance( macbook ){</code></div><div class=\"line number31 index30 alt2\">&nbsp;</div><div class=\"line number32 index31 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">v = macbook.cost();</code></div><div class=\"line number33 index32 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">macbook.cost = </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number34 index33 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">v + 250;</code></div><div class=\"line number35 index34 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number36 index35 alt1\">&nbsp;</div><div class=\"line number37 index36 alt2\"><code class=\"js plain\">}</code></div><div class=\"line number38 index37 alt1\">&nbsp;</div><div class=\"line number39 index38 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">mb = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">MacBook();</code></div><div class=\"line number40 index39 alt1\"><code class=\"js plain\">memory( mb );</code></div><div class=\"line number41 index40 alt2\"><code class=\"js plain\">engraving( mb );</code></div><div class=\"line number42 index41 alt1\"><code class=\"js plain\">insurance( mb );</code></div><div class=\"line number43 index42 alt2\">&nbsp;</div><div class=\"line number44 index43 alt1\"><code class=\"js comments\">// Outputs: 1522</code></div><div class=\"line number45 index44 alt2\"><code class=\"js plain\">console.log( mb.cost() );</code></div><div class=\"line number46 index45 alt1\">&nbsp;</div><div class=\"line number47 index46 alt2\"><code class=\"js comments\">// Outputs: 11.6</code></div><div class=\"line number48 index47 alt1\"><code class=\"js plain\">console.log( mb.screenSize() );</code></div></div></td></tr></tbody></table></div></div>\n\n          <p>In the above example, our Decorators are overriding the <code>MacBook()</code> super-class objects <code>.cost()</code> function to return the current price of the <code>Macbook</code> plus the cost of the upgrade being specified.</p>\n\n          <p>It's considered a decoration as the original <code>Macbook</code> objects constructor methods which are not overridden (e.g. <code>screenSize()</code>) as well as any other properties which we may define as a part of the <code>Macbook</code> remain unchanged and intact.</p>\n\n          <p>There isn't really a defined <em>interface</em> in the above example and we're shifting away the responsibility of ensuring an object meets an interface when moving from the creator to the receiver.</p>\n\n          <h2>Pseudo-classical Decorators</h2>\n\n          <p>We're now going to examine a variation of the Decorator first presented in a JavaScript form in <em>Pro JavaScript Design Patterns</em> (PJDP) by Dustin Diaz and Ross Harmes.</p>\n\n          <p>Unlike some of the examples from earlier, Diaz and Harmes stick more closely to how decorators are implemented in other programming languages (such as Java or C++) using the concept of an \"interface\", which we will define in more detail shortly.</p>\n\n          <p><strong>Note:</strong> This particular variation of the Decorator pattern is provided for reference purposes. If finding it overly complex, I recommend opting for one of the simpler implementations covered earlier.</p>\n\n          <h3>Interfaces</h3>\n\n          <p>PJDP describes the Decorator as a pattern that is used to transparently wrap objects inside other objects of the same interface. An interface is a way of defining the methods an object <strong>should</strong> have, however, it doesn't actually directly specify how those methods should be implemented.</p>\n\n          <p>They can also indicate what parameters the methods take, but this is considered optional.</p>\n\n          <p>So, why would we use an interface in JavaScript? The idea is that they're self-documenting and promote reusability. In theory, interfaces also make code more stable by ensuring changes to them must also be made to the objects implementing them.</p>\n\n          <p>Below is an example of an implementation of interfaces in JavaScript using duck-typing - an approach that helps determine whether an object is an instance of constructor/object based on the methods it implements.</p>\n\n          <div><div id=\"highlighter_976080\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div><div class=\"line number31 index30 alt2\">31</div><div class=\"line number32 index31 alt1\">32</div><div class=\"line number33 index32 alt2\">33</div><div class=\"line number34 index33 alt1\">34</div><div class=\"line number35 index34 alt2\">35</div><div class=\"line number36 index35 alt1\">36</div><div class=\"line number37 index36 alt2\">37</div><div class=\"line number38 index37 alt1\">38</div><div class=\"line number39 index38 alt2\">39</div><div class=\"line number40 index39 alt1\">40</div><div class=\"line number41 index40 alt2\">41</div><div class=\"line number42 index41 alt1\">42</div><div class=\"line number43 index42 alt2\">43</div><div class=\"line number44 index43 alt1\">44</div><div class=\"line number45 index44 alt2\">45</div><div class=\"line number46 index45 alt1\">46</div><div class=\"line number47 index46 alt2\">47</div><div class=\"line number48 index47 alt1\">48</div><div class=\"line number49 index48 alt2\">49</div><div class=\"line number50 index49 alt1\">50</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js comments\">// Create interfaces using a pre-defined Interface</code></div><div class=\"line number2 index1 alt1\"><code class=\"js comments\">// constructor that accepts an interface name and</code></div><div class=\"line number3 index2 alt2\"><code class=\"js comments\">// skeleton methods to expose.</code></div><div class=\"line number4 index3 alt1\">&nbsp;</div><div class=\"line number5 index4 alt2\"><code class=\"js comments\">// In our reminder example summary() and placeOrder()</code></div><div class=\"line number6 index5 alt1\"><code class=\"js comments\">// represent functionality the interface should</code></div><div class=\"line number7 index6 alt2\"><code class=\"js comments\">// support</code></div><div class=\"line number8 index7 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">reminder = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">Interface( </code><code class=\"js string\">\"List\"</code><code class=\"js plain\">, [</code><code class=\"js string\">\"summary\"</code><code class=\"js plain\">, </code><code class=\"js string\">\"placeOrder\"</code><code class=\"js plain\">] );</code></div><div class=\"line number9 index8 alt2\">&nbsp;</div><div class=\"line number10 index9 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">properties = {</code></div><div class=\"line number11 index10 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">name: </code><code class=\"js string\">\"Remember to buy the milk\"</code><code class=\"js plain\">,</code></div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">date: </code><code class=\"js string\">\"05/06/2016\"</code><code class=\"js plain\">,</code></div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">actions:{</code></div><div class=\"line number14 index13 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">summary: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">(){</code></div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js string\">\"Remember to buy the milk, we are almost out!\"</code><code class=\"js plain\">;</code></div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number17 index16 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">placeOrder: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">(){</code></div><div class=\"line number18 index17 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js string\">\"Ordering milk from your local grocery store\"</code><code class=\"js plain\">;</code></div><div class=\"line number19 index18 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number20 index19 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number21 index20 alt2\"><code class=\"js plain\">};</code></div><div class=\"line number22 index21 alt1\">&nbsp;</div><div class=\"line number23 index22 alt2\"><code class=\"js comments\">// Now create a constructor implementing the above properties</code></div><div class=\"line number24 index23 alt1\"><code class=\"js comments\">// and methods</code></div><div class=\"line number25 index24 alt2\">&nbsp;</div><div class=\"line number26 index25 alt1\"><code class=\"js keyword\">function</code> <code class=\"js plain\">Todo( config ){</code></div><div class=\"line number27 index26 alt2\">&nbsp;</div><div class=\"line number28 index27 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// State the methods we expect to be supported</code></div><div class=\"line number29 index28 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// as well as the Interface instance being checked</code></div><div class=\"line number30 index29 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// against</code></div><div class=\"line number31 index30 alt2\">&nbsp;</div><div class=\"line number32 index31 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">Interface.ensureImplements( config.actions, reminder );</code></div><div class=\"line number33 index32 alt2\">&nbsp;</div><div class=\"line number34 index33 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.name = config.name;</code></div><div class=\"line number35 index34 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.methods = config.actions;</code></div><div class=\"line number36 index35 alt1\">&nbsp;</div><div class=\"line number37 index36 alt2\"><code class=\"js plain\">}</code></div><div class=\"line number38 index37 alt1\">&nbsp;</div><div class=\"line number39 index38 alt2\"><code class=\"js comments\">// Create a new instance of our Todo constructor</code></div><div class=\"line number40 index39 alt1\">&nbsp;</div><div class=\"line number41 index40 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">todoItem = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">Todo( properties );</code></div><div class=\"line number42 index41 alt1\">&nbsp;</div><div class=\"line number43 index42 alt2\"><code class=\"js comments\">// Finally test to make sure these function correctly</code></div><div class=\"line number44 index43 alt1\">&nbsp;</div><div class=\"line number45 index44 alt2\"><code class=\"js plain\">console.log( todoItem.methods.summary() );</code></div><div class=\"line number46 index45 alt1\"><code class=\"js plain\">console.log( todoItem.methods.placeOrder() );</code></div><div class=\"line number47 index46 alt2\">&nbsp;</div><div class=\"line number48 index47 alt1\"><code class=\"js comments\">// Outputs:</code></div><div class=\"line number49 index48 alt2\"><code class=\"js comments\">// Remember to buy the milk, we are almost out!</code></div><div class=\"line number50 index49 alt1\"><code class=\"js comments\">// Ordering milk from your local grocery store</code></div></div></td></tr></tbody></table></div></div>\n\n          <p>In the above, <code>Interface.ensureImplements</code> provides strict functionality checking and code for both this and the <code>Interface</code> constructor can be found <a href=\"https://gist.github.com/1057989\">here</a>.</p>\n\n          <p>The biggest problem with interfaces is that, as there isn't built-in support for them in JavaScript, there is a danger of us attempting to emulate a feature of another language that may not be an ideal fit. Lightweight interfaces can be used without a great performance cost however and we will next look at <em>Abstract</em> Decorators using this same concept.</p>\n\n          <h3>Abstract Decorators</h3>\n\n          <p>To demonstrate the structure of this version of the Decorator pattern, we're going to imagine we have a superclass that models a <code>Macbook</code> once again and a store that allows us to \"decorate\" our Macbook with a number of enhancements for an additional fee.</p>\n\n          <p>Enhancements can include upgrades to 4GB or 8GB Ram, engraving, Parallels or a case. Now if we were to model this using an individual sub-class for each combination of enhancement options, it might look something like this:</p>\n\n          <div><div id=\"highlighter_706692\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">Macbook = </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number2 index1 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">//...</code></div><div class=\"line number3 index2 alt2\"><code class=\"js plain\">};</code></div><div class=\"line number4 index3 alt1\">&nbsp;</div><div class=\"line number5 index4 alt2\"><code class=\"js keyword\">var</code>&nbsp; <code class=\"js plain\">MacbookWith4GBRam = </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){},</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">MacbookWith8GBRam = </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){},</code></div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">MacbookWith4GBRamAndEngraving = </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){},</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">MacbookWith8GBRamAndEngraving = </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){},</code></div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">MacbookWith8GBRamAndParallels = </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){},</code></div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">MacbookWith4GBRamAndParallels = </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){},</code></div><div class=\"line number11 index10 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">MacbookWith8GBRamAndParallelsAndCase = </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){},</code></div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">MacbookWith4GBRamAndParallelsAndCase = </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){},</code></div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">MacbookWith8GBRamAndParallelsAndCaseAndInsurance = </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){},</code></div><div class=\"line number14 index13 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">MacbookWith4GBRamAndParallelsAndCaseAndInsurance = </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){};</code></div></div></td></tr></tbody></table></div></div>\n          <p>and so on.</p>\n          <p>This would be an impractical solution as a new subclass would be required for every possible combination of enhancements that are available. As we would prefer to keep things simple without maintaining a large set of subclasses, let's look at how decorators may be used to solve this problem better.</p>\n\n          <p>Rather than requiring all of the combinations we saw earlier, we should simply have to create five new decorator classes. Methods that are called on these enhancement classes would be passed on to our <code>Macbook</code> class.</p>\n\n          <p>In our next example, decorators transparently wrap around their components and can interestingly be interchanged as they use the same interface.</p>\n\n          <p>Here's the interface we're going to define for the Macbook:</p>\n          <div><div id=\"highlighter_578688\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">Macbook = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">Interface( </code><code class=\"js string\">\"Macbook\"</code><code class=\"js plain\">,</code></div><div class=\"line number2 index1 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">[</code><code class=\"js string\">\"addEngraving\"</code><code class=\"js plain\">,</code></div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js string\">\"addParallels\"</code><code class=\"js plain\">,</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js string\">\"add4GBRam\"</code><code class=\"js plain\">,</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js string\">\"add8GBRam\"</code><code class=\"js plain\">,</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js string\">\"addCase\"</code><code class=\"js plain\">]);</code></div><div class=\"line number7 index6 alt2\">&nbsp;</div><div class=\"line number8 index7 alt1\"><code class=\"js comments\">// A Macbook Pro might thus be represented as follows:</code></div><div class=\"line number9 index8 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">MacbookPro = </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// implements Macbook</code></div><div class=\"line number11 index10 alt2\"><code class=\"js plain\">};</code></div><div class=\"line number12 index11 alt1\">&nbsp;</div><div class=\"line number13 index12 alt2\"><code class=\"js plain\">MacbookPro.prototype = {</code></div><div class=\"line number14 index13 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">addEngraving: </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">addParallels: </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number17 index16 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number18 index17 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">add4GBRam: </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number19 index18 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number20 index19 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">add8GBRam:</code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number21 index20 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number22 index21 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">addCase: </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number23 index22 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number24 index23 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">getPrice: </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number25 index24 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Base price</code></div><div class=\"line number26 index25 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">900.00;</code></div><div class=\"line number27 index26 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number28 index27 alt1\"><code class=\"js plain\">};</code></div></div></td></tr></tbody></table></div></div>\n\n          <p>To make it easier for us to add as many more options as needed later on, an Abstract Decorator class is defined with default methods required to implement the <code>Macbook</code> interface, which the rest of the options will sub-class. Abstract Decorators ensure that we can decorate a base class independently with as many decorators as needed in different combinations (remember the example earlier?) without needing to derive a class for every possible combination.</p>\n\n          <div><div id=\"highlighter_254931\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js comments\">// Macbook decorator abstract decorator class</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">MacbookDecorator = </code><code class=\"js keyword\">function</code><code class=\"js plain\">( macbook ){</code></div><div class=\"line number4 index3 alt1\">&nbsp;</div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">Interface.ensureImplements( macbook, Macbook );</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.macbook = macbook;</code></div><div class=\"line number7 index6 alt2\">&nbsp;</div><div class=\"line number8 index7 alt1\"><code class=\"js plain\">};</code></div><div class=\"line number9 index8 alt2\">&nbsp;</div><div class=\"line number10 index9 alt1\"><code class=\"js plain\">MacbookDecorator.prototype = {</code></div><div class=\"line number11 index10 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">addEngraving: </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js keyword\">this</code><code class=\"js plain\">.macbook.addEngraving();</code></div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number14 index13 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">addParallels: </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js keyword\">this</code><code class=\"js plain\">.macbook.addParallels();</code></div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number17 index16 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">add4GBRam: </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number18 index17 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js keyword\">this</code><code class=\"js plain\">.macbook.add4GBRam();</code></div><div class=\"line number19 index18 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number20 index19 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">add8GBRam:</code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number21 index20 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js keyword\">this</code><code class=\"js plain\">.macbook.add8GBRam();</code></div><div class=\"line number22 index21 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number23 index22 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">addCase: </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number24 index23 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js keyword\">this</code><code class=\"js plain\">.macbook.addCase();</code></div><div class=\"line number25 index24 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number26 index25 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">getPrice: </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number27 index26 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js keyword\">this</code><code class=\"js plain\">.macbook.getPrice();</code></div><div class=\"line number28 index27 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number29 index28 alt2\"><code class=\"js plain\">};</code></div></div></td></tr></tbody></table></div></div>\n\n          <p>What's happening in the above sample is that the <code>Macbook</code> Decorator accepts an object (a Macbook) to use as our base component. It's using the <code>Macbook</code> interface we defined earlier and for each method is just calling the same method on the component. We can now create our option classes for what can be added, just by using the <code>Macbook</code> Decorator.</p>\n\n          <div><div id=\"highlighter_446886\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js comments\">// First, define a way to extend an object a</code></div><div class=\"line number2 index1 alt1\"><code class=\"js comments\">// with the properties in object b. We'll use</code></div><div class=\"line number3 index2 alt2\"><code class=\"js comments\">// this shortly!</code></div><div class=\"line number4 index3 alt1\"><code class=\"js keyword\">function</code> <code class=\"js plain\">extend( a, b ){</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">for</code><code class=\"js plain\">( </code><code class=\"js keyword\">var</code> <code class=\"js plain\">key </code><code class=\"js keyword\">in</code> <code class=\"js plain\">b )</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">if</code><code class=\"js plain\">( b.hasOwnProperty(key) )</code></div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">a[key] = b[key];</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">a;</code></div><div class=\"line number9 index8 alt2\"><code class=\"js plain\">}</code></div><div class=\"line number10 index9 alt1\">&nbsp;</div><div class=\"line number11 index10 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">CaseDecorator = </code><code class=\"js keyword\">function</code><code class=\"js plain\">( macbook ){</code></div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.macbook = macbook;</code></div><div class=\"line number13 index12 alt2\"><code class=\"js plain\">};</code></div><div class=\"line number14 index13 alt1\">&nbsp;</div><div class=\"line number15 index14 alt2\"><code class=\"js comments\">// Let's now extend (decorate) the CaseDecorator</code></div><div class=\"line number16 index15 alt1\"><code class=\"js comments\">// with a MacbookDecorator</code></div><div class=\"line number17 index16 alt2\"><code class=\"js plain\">extend( CaseDecorator, MacbookDecorator );</code></div><div class=\"line number18 index17 alt1\">&nbsp;</div><div class=\"line number19 index18 alt2\"><code class=\"js plain\">CaseDecorator.prototype.addCase = </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number20 index19 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js keyword\">this</code><code class=\"js plain\">.macbook.addCase() + </code><code class=\"js string\">\"Adding case to macbook\"</code><code class=\"js plain\">;</code></div><div class=\"line number21 index20 alt2\"><code class=\"js plain\">};</code></div><div class=\"line number22 index21 alt1\">&nbsp;</div><div class=\"line number23 index22 alt2\"><code class=\"js plain\">CaseDecorator.prototype.getPrice = </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number24 index23 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js keyword\">this</code><code class=\"js plain\">.macbook.getPrice() + 45.00;</code></div><div class=\"line number25 index24 alt2\"><code class=\"js plain\">};</code></div></div></td></tr></tbody></table></div></div>\n\n          <p>What we're doing here is overriding the <code>addCase()</code> and <code>getPrice()</code> methods that need to be decorated and we're achieving this by first calling these methods on the original <code>macbook</code> and then simply appending a string or numeric value (e.g 45.00) to them accordingly.</p>\n\n          <p>As there's been quite a lot of information presented in this section so far, let's try to bring it all together in a single example that will hopefully highlight what we have learned.</p>\n\n          <div><div id=\"highlighter_134041\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js comments\">// Instantiation of the macbook</code></div><div class=\"line number2 index1 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">myMacbookPro = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">MacbookPro();</code></div><div class=\"line number3 index2 alt2\">&nbsp;</div><div class=\"line number4 index3 alt1\"><code class=\"js comments\">// Outputs: 900.00</code></div><div class=\"line number5 index4 alt2\"><code class=\"js plain\">console.log( myMacbookPro.getPrice() );</code></div><div class=\"line number6 index5 alt1\">&nbsp;</div><div class=\"line number7 index6 alt2\"><code class=\"js comments\">// Decorate the macbook</code></div><div class=\"line number8 index7 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">decoratedMacbookPro = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">CaseDecorator( myMacbookPro );</code></div><div class=\"line number9 index8 alt2\">&nbsp;</div><div class=\"line number10 index9 alt1\"><code class=\"js comments\">// This will return 945.00</code></div><div class=\"line number11 index10 alt2\"><code class=\"js plain\">console.log( decoratedMacbookPro.getPrice() );</code></div></div></td></tr></tbody></table></div></div>\n\n          <p>As decorators are able to modify objects dynamically, they're a perfect pattern for changing existing systems. Occasionally, it's just simpler to create decorators around an object versus the trouble of maintaining individual sub-classes for each object type. This makes maintaining applications that may require a large number of sub-classed objects significantly more straight-forward.</p>\n\n          <p>A functional version of this example can be found on <a href=\"http://jsbin.com/UMEJaXu/1/edit\">JSBin</a>.</p>\n\n          <h2>Decorators With jQuery</h2>\n\n          <p>As with other patterns we've covered, there are also examples of the Decorator pattern that can be implemented with jQuery. <code>jQuery.extend()</code> allows us to extend (or merge) two or more objects (and their properties) together into a single object at run-time.</p>\n\n          <p>In this scenario, a target object can be decorated with new functionality without necessarily breaking or overriding existing methods in the source/superclass object (although this can be done).</p>\n\n          <p>In the following example, we define three objects: defaults, options and settings. The aim of the task is to decorate the <code>defaults</code> object with additional functionality found in <code>optionssettings</code>. We must:</p>\n\n          <p>(a) Leave \"defaults\" in an untouched state where we don't lose the ability to access the properties or functions found in it a later point (b) Gain the ability to use the decorated properties and functions found in \"options\"</p>\n\n          <div><div id=\"highlighter_487865\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div><div class=\"line number31 index30 alt2\">31</div><div class=\"line number32 index31 alt1\">32</div><div class=\"line number33 index32 alt2\">33</div><div class=\"line number34 index33 alt1\">34</div><div class=\"line number35 index34 alt2\">35</div><div class=\"line number36 index35 alt1\">36</div><div class=\"line number37 index36 alt2\">37</div><div class=\"line number38 index37 alt1\">38</div><div class=\"line number39 index38 alt2\">39</div><div class=\"line number40 index39 alt1\">40</div><div class=\"line number41 index40 alt2\">41</div><div class=\"line number42 index41 alt1\">42</div><div class=\"line number43 index42 alt2\">43</div><div class=\"line number44 index43 alt1\">44</div><div class=\"line number45 index44 alt2\">45</div><div class=\"line number46 index45 alt1\">46</div><div class=\"line number47 index46 alt2\">47</div><div class=\"line number48 index47 alt1\">48</div><div class=\"line number49 index48 alt2\">49</div><div class=\"line number50 index49 alt1\">50</div><div class=\"line number51 index50 alt2\">51</div><div class=\"line number52 index51 alt1\">52</div><div class=\"line number53 index52 alt2\">53</div><div class=\"line number54 index53 alt1\">54</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">decoratorApp = decoratorApp || {};</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js comments\">// define the objects we're going to use</code></div><div class=\"line number4 index3 alt1\"><code class=\"js plain\">decoratorApp = {</code></div><div class=\"line number5 index4 alt2\">&nbsp;</div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">defaults: {</code></div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">validate: </code><code class=\"js keyword\">false</code><code class=\"js plain\">,</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">limit: 5,</code></div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">name: </code><code class=\"js string\">\"foo\"</code><code class=\"js plain\">,</code></div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">welcome: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number11 index10 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js string\">\"welcome!\"</code> <code class=\"js plain\">);</code></div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number14 index13 alt1\">&nbsp;</div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">options: {</code></div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">validate: </code><code class=\"js keyword\">true</code><code class=\"js plain\">,</code></div><div class=\"line number17 index16 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">name: </code><code class=\"js string\">\"bar\"</code><code class=\"js plain\">,</code></div><div class=\"line number18 index17 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">helloWorld: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number19 index18 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js string\">\"hello world\"</code> <code class=\"js plain\">);</code></div><div class=\"line number20 index19 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number21 index20 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number22 index21 alt1\">&nbsp;</div><div class=\"line number23 index22 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">settings: {},</code></div><div class=\"line number24 index23 alt1\">&nbsp;</div><div class=\"line number25 index24 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">printObj: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">( obj ) {</code></div><div class=\"line number26 index25 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">arr = [],</code></div><div class=\"line number27 index26 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">next;</code></div><div class=\"line number28 index27 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">$.each( obj, </code><code class=\"js keyword\">function</code> <code class=\"js plain\">( key, val ) {</code></div><div class=\"line number29 index28 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">next = key + </code><code class=\"js string\">\": \"</code><code class=\"js plain\">;</code></div><div class=\"line number30 index29 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">next += $.isPlainObject(val) ? printObj( val ) : val;</code></div><div class=\"line number31 index30 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">arr.push( next );</code></div><div class=\"line number32 index31 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">} );</code></div><div class=\"line number33 index32 alt2\">&nbsp;</div><div class=\"line number34 index33 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js string\">\"{ \"</code> <code class=\"js plain\">+ arr.join(</code><code class=\"js string\">\", \"</code><code class=\"js plain\">) + </code><code class=\"js string\">\" }\"</code><code class=\"js plain\">;</code></div><div class=\"line number35 index34 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number36 index35 alt1\">&nbsp;</div><div class=\"line number37 index36 alt2\"><code class=\"js plain\">};</code></div><div class=\"line number38 index37 alt1\">&nbsp;</div><div class=\"line number39 index38 alt2\"><code class=\"js comments\">// merge defaults and options, without modifying defaults explicitly</code></div><div class=\"line number40 index39 alt1\"><code class=\"js plain\">decoratorApp.settings = $.extend({}, decoratorApp.defaults, decoratorApp.options);</code></div><div class=\"line number41 index40 alt2\">&nbsp;</div><div class=\"line number42 index41 alt1\"><code class=\"js comments\">// what we have done here is decorated defaults in a way that provides</code></div><div class=\"line number43 index42 alt2\"><code class=\"js comments\">// access to the properties and functionality it has to offer (as well as</code></div><div class=\"line number44 index43 alt1\"><code class=\"js comments\">// that of the decorator \"options\"). defaults itself is left unchanged</code></div><div class=\"line number45 index44 alt2\">&nbsp;</div><div class=\"line number46 index45 alt1\"><code class=\"js plain\">$(</code><code class=\"js string\">\"#log\"</code><code class=\"js plain\">)</code></div><div class=\"line number47 index46 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">.append( decoratorApp.printObj(decoratorApp.settings) +</code></div><div class=\"line number48 index47 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">+ decoratorApp.printObj(decoratorApp.options) +</code></div><div class=\"line number49 index48 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">+ decoratorApp.printObj(decoratorApp.defaults));</code></div><div class=\"line number50 index49 alt1\">&nbsp;</div><div class=\"line number51 index50 alt2\"><code class=\"js comments\">// settings -- { validate: true, limit: 5, name: bar, welcome: function (){ console.log( \"welcome!\" ); },</code></div><div class=\"line number52 index51 alt1\"><code class=\"js comments\">// helloWorld: function (){ console.log( \"hello world\" ); } }</code></div><div class=\"line number53 index52 alt2\"><code class=\"js comments\">// options -- { validate: true, name: bar, helloWorld: function (){ console.log( \"hello world\" ); } }</code></div><div class=\"line number54 index53 alt1\"><code class=\"js comments\">// defaults -- { validate: false, limit: 5, name: foo, welcome: function (){ console.log(\"welcome!\"); } }</code></div></div></td></tr></tbody></table></div></div>\n          <h2>Advantages &amp; Disadvantages</h2>\n\n          <p>Developers enjoy using this pattern as it can be used transparently and is also fairly flexible - as we've seen, objects can be wrapped or \"decorated\" with new behavior and then continue to be used without needing to worry about the base object being modified. In a broader context, this pattern also avoids us needing to rely on large numbers of subclasses to get the same benefits.</p>\n\n          <p>There are however drawbacks that we should be aware of when implementing the pattern. If poorly managed, it can significantly complicate our application architecture as it introduces many small, but similar objects into our namespace. The concern here is that in addition to becoming hard to manage, other developers unfamiliar with the pattern may have a hard time grasping why it's being used.</p>\n\n          <p>Sufficient commenting or pattern research should assist with the latter, however as long as we keep a handle on how widespread we use the decorator in our applications we should be fine on both counts.</p>",
      "pattern": "The Decorator Pattern"
    },
    "-L6a2S_DH4NgWu8nk7tZ": {
      "description": " <p>When we put up a facade, we present an outward appearance to the world which may conceal a very different reality. This was the inspiration for the name behind the next pattern we're going to review - the Facade pattern. This pattern provides a convenient higher-level interface to a larger body of code, hiding its true underlying complexity. Think of it as simplifying the API being presented to other developers, something which almost always improves usability.</p>\n\n        <p>\n        Facades are a structural pattern which can often be seen in JavaScript libraries like jQuery where, although an implementation may support methods with a wide range of behaviors, only a \"facade\" or limited abstraction of these methods is presented to the public for use.</p>\n\n        <p>\n        This allows us to interact with the Facade directly rather than the subsystem behind the scenes. Whenever we use jQuery's <code>$(el).css()</code> or <code>$(el).animate()</code> methods, we're actually using a Facade - the simpler public interface that avoids us having to manually call the many internal methods in jQuery core required to get some behavior working. This also avoids the need to manually interact with DOM APIs and maintain state variables.</p>\n\n        <p>The jQuery core methods should be considered intermediate abstractions. The more immediate burden to developers is the DOM API and facades are what make the jQuery library so easy to use.</p>\n\n        <p>\n        To build on what we've learned, the Facade pattern both simplifies the interface of a class and it also decouples the class from the code that utilizes it. This gives us the ability to indirectly interact with subsystems in a way that can sometimes be less prone to error than accessing the subsystem directly. A Facade's advantages include ease of use and often a small size-footprint in implementing the pattern. </p>\n\n        <p>\n        Let’s take a look at the pattern in action. This is an unoptimized code example, but here we're utilizing a Facade to simplify an interface for listening to events cross-browser. We do this by creating a common method that can be used in one’s code which does the task of checking for the existence of features so that it can provide a safe and cross-browser compatible solution.</p>\n\n        <div><div id=\"highlighter_922650\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">addMyEvent = </code><code class=\"js keyword\">function</code><code class=\"js plain\">( el,ev,fn ){</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">if</code><code class=\"js plain\">( el.addEventListener ){</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">el.addEventListener( ev,fn, </code><code class=\"js keyword\">false</code> <code class=\"js plain\">);</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code><code class=\"js keyword\">else</code> <code class=\"js keyword\">if</code><code class=\"js plain\">(el.attachEvent){</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">el.attachEvent( </code><code class=\"js string\">\"on\"</code> <code class=\"js plain\">+ ev, fn );</code></div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">} </code><code class=\"js keyword\">else</code><code class=\"js plain\">{</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">el[</code><code class=\"js string\">\"on\"</code> <code class=\"js plain\">+ ev] = fn;</code></div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number10 index9 alt1\">&nbsp;</div><div class=\"line number11 index10 alt2\"><code class=\"js plain\">};</code></div></div></td></tr></tbody></table></div></div>\n\n        <p>\n        In a similar manner, we're all familiar with jQuery's <code>$(document).ready(..)</code>. Internally, this is actually being powered by a method called <code>bindReady()</code>, which is doing this:</p>\n\n        <div><div id=\"highlighter_516502\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js plain\">bindReady: </code><code class=\"js keyword\">function</code><code class=\"js plain\">() {</code></div><div class=\"line number2 index1 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">...</code></div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">if</code> <code class=\"js plain\">( document.addEventListener ) {</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Use the handy event callback</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">document.addEventListener( </code><code class=\"js string\">\"DOMContentLoaded\"</code><code class=\"js plain\">, DOMContentLoaded, </code><code class=\"js keyword\">false</code> <code class=\"js plain\">);</code></div><div class=\"line number6 index5 alt1\">&nbsp;</div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// A fallback to window.onload, that will always work</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">window.addEventListener( </code><code class=\"js string\">\"load\"</code><code class=\"js plain\">, jQuery.ready, </code><code class=\"js keyword\">false</code> <code class=\"js plain\">);</code></div><div class=\"line number9 index8 alt2\">&nbsp;</div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// If IE event model is used</code></div><div class=\"line number11 index10 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">} </code><code class=\"js keyword\">else</code> <code class=\"js keyword\">if</code> <code class=\"js plain\">( document.attachEvent ) {</code></div><div class=\"line number12 index11 alt1\">&nbsp;</div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">document.attachEvent( </code><code class=\"js string\">\"onreadystatechange\"</code><code class=\"js plain\">, DOMContentLoaded );</code></div><div class=\"line number14 index13 alt1\">&nbsp;</div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// A fallback to window.onload, that will always work</code></div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">window.attachEvent( </code><code class=\"js string\">\"onload\"</code><code class=\"js plain\">, jQuery.ready );</code></div><div class=\"line number17 index16 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">...</code></div></div></td></tr></tbody></table></div></div>\n        <p>\n        This is another example of a Facade, where the rest of the world simply uses the limited interface exposed by <code>$(document).ready(..)</code> and the more complex implementation powering it is kept hidden from sight.</p>\n\n        <p>\n        Facades don't just have to be used on their own, however. They can also be integrated with other patterns such as the Module pattern. As we can see below, our instance of the module patterns contains a number of methods which have been privately defined. A Facade is then used to supply a much simpler API to accessing these methods:\n        </p>\n        <div><div id=\"highlighter_475303\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div><div class=\"line number31 index30 alt2\">31</div><div class=\"line number32 index31 alt1\">32</div><div class=\"line number33 index32 alt2\">33</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">module = (</code><code class=\"js keyword\">function</code><code class=\"js plain\">() {</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">_private = {</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">i: 5,</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">get: </code><code class=\"js keyword\">function</code><code class=\"js plain\">() {</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js string\">\"current value:\"</code> <code class=\"js plain\">+ </code><code class=\"js keyword\">this</code><code class=\"js plain\">.i);</code></div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">set: </code><code class=\"js keyword\">function</code><code class=\"js plain\">( val ) {</code></div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.i = val;</code></div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number11 index10 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">run: </code><code class=\"js keyword\">function</code><code class=\"js plain\">() {</code></div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js string\">\"running\"</code> <code class=\"js plain\">);</code></div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number14 index13 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">jump: </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js string\">\"jumping\"</code> <code class=\"js plain\">);</code></div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number17 index16 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number18 index17 alt1\">&nbsp;</div><div class=\"line number19 index18 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">{</code></div><div class=\"line number20 index19 alt1\">&nbsp;</div><div class=\"line number21 index20 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">facade: </code><code class=\"js keyword\">function</code><code class=\"js plain\">( args ) {</code></div><div class=\"line number22 index21 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">_private.set(args.val);</code></div><div class=\"line number23 index22 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">_private.get();</code></div><div class=\"line number24 index23 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">if</code> <code class=\"js plain\">( args.run ) {</code></div><div class=\"line number25 index24 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">_private.run();</code></div><div class=\"line number26 index25 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number27 index26 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number28 index27 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number29 index28 alt2\"><code class=\"js plain\">}());</code></div><div class=\"line number30 index29 alt1\">&nbsp;</div><div class=\"line number31 index30 alt2\">&nbsp;</div><div class=\"line number32 index31 alt1\"><code class=\"js comments\">// Outputs: \"current value: 10\" and \"running\"</code></div><div class=\"line number33 index32 alt2\"><code class=\"js plain\">module.facade( {run: </code><code class=\"js keyword\">true</code><code class=\"js plain\">, val: 10} );</code></div></div></td></tr></tbody></table></div></div>\n\n        <p>\n        In this example, calling <code>module.facade()</code> will actually trigger a set of private behavior within the module, but again, the user isn't concerned with this. we've made it much easier for them to consume a feature without needing to worry about implementation-level details.\n        </p>\n\n        <h3>Notes on abstraction</h3>\n\n        <p>Facades generally have few disadvantages, but one concern worth noting is performance. Namely, one must determine whether there is an implicit cost to the abstraction a Facade offers to our implementation and if so, whether this cost is justifiable. Going back to the jQuery library, most of us are aware that both <code>getElementById(\"identifier\")</code> and <code>$(\"#identifier\")</code> can be used to query an element on a page by its ID.</p>\n\n        <p>Did you know however that <code>getElementById()</code> on its own is significantly faster by a high order of magnitude? Take a look at this jsPerf test to see results on a per-browser level: <a href=\"http://jsperf.com/getelementbyid-vs-jquery-id\">http://jsperf.com/getelementbyid-vs-jquery-id</a>. Now of course, we have to keep in mind that jQuery (and Sizzle - its selector engine) are doing a lot more behind the scenes to optimize our query (and that a jQuery object, not just a DOM node is returned). </p>\n\n        <p>The challenge with this particular Facade is that in order to provide an elegant selector function capable of accepting and parsing multiple types of queries, there is an implicit cost of abstraction. The user isn't required to access <code>jQuery.getById(\"identifier\")</code> or <code>jQuery.getByClass(\"identifier\")</code> and so on. That said, the trade-off in performance has been tested in practice over the years and given the success of jQuery, a simple Facade actually worked out very well for the team.</p>\n\n        <p>When using the pattern, try to be aware of any performance costs involved and make a call on whether they are worth the level of abstraction offered.</p>",
      "pattern": "The Facade Pattern"
    },
    "-L6a2d5DFOXrNj9u72td": {
      "description": " <p>The Factory pattern is another creational pattern concerned with the notion of creating objects. Where it differs from the other patterns in its category is that it doesn't explicitly require us to use a constructor. Instead, a Factory can provide a generic interface for creating objects, where we can specify the type of factory object we wish to be created.</p>\n\n        <p>Imagine that we have a UI factory where we are asked to create a type of UI component. Rather than creating this component directly using the <code>new</code> operator or via another creational constructor, we ask a Factory object for a new component instead. We inform the Factory what type of object is required (e.g \"Button\", \"Panel\") and it instantiates this, returning it to us for use.</p>\n\n        <p>This is particularly useful if the object creation process is relatively complex, e.g. if it strongly depends on dynamic factors or application configuration.</p>\n\n        <p>Examples of this pattern can be found in UI libraries such as ExtJS where the methods for creating objects or components may be further subclassed.</p>\n\n        <p>The following is an example that builds upon our previous snippets using the Constructor pattern logic to define cars. It demonstrates how a Vehicle <em>Factory</em> may be implemented using the Factory pattern:</p>\n\n        <p>\n        </p><div><div id=\"highlighter_895294\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div><div class=\"line number31 index30 alt2\">31</div><div class=\"line number32 index31 alt1\">32</div><div class=\"line number33 index32 alt2\">33</div><div class=\"line number34 index33 alt1\">34</div><div class=\"line number35 index34 alt2\">35</div><div class=\"line number36 index35 alt1\">36</div><div class=\"line number37 index36 alt2\">37</div><div class=\"line number38 index37 alt1\">38</div><div class=\"line number39 index38 alt2\">39</div><div class=\"line number40 index39 alt1\">40</div><div class=\"line number41 index40 alt2\">41</div><div class=\"line number42 index41 alt1\">42</div><div class=\"line number43 index42 alt2\">43</div><div class=\"line number44 index43 alt1\">44</div><div class=\"line number45 index44 alt2\">45</div><div class=\"line number46 index45 alt1\">46</div><div class=\"line number47 index46 alt2\">47</div><div class=\"line number48 index47 alt1\">48</div><div class=\"line number49 index48 alt2\">49</div><div class=\"line number50 index49 alt1\">50</div><div class=\"line number51 index50 alt2\">51</div><div class=\"line number52 index51 alt1\">52</div><div class=\"line number53 index52 alt2\">53</div><div class=\"line number54 index53 alt1\">54</div><div class=\"line number55 index54 alt2\">55</div><div class=\"line number56 index55 alt1\">56</div><div class=\"line number57 index56 alt2\">57</div><div class=\"line number58 index57 alt1\">58</div><div class=\"line number59 index58 alt2\">59</div><div class=\"line number60 index59 alt1\">60</div><div class=\"line number61 index60 alt2\">61</div><div class=\"line number62 index61 alt1\">62</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js comments\">// Types.js - Constructors used behind the scenes</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js comments\">// A constructor for defining new cars</code></div><div class=\"line number4 index3 alt1\"><code class=\"js keyword\">function</code> <code class=\"js plain\">Car( options ) {</code></div><div class=\"line number5 index4 alt2\">&nbsp;</div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// some defaults</code></div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.doors = options.doors || 4;</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.state = options.state || </code><code class=\"js string\">\"brand new\"</code><code class=\"js plain\">;</code></div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.color = options.color || </code><code class=\"js string\">\"silver\"</code><code class=\"js plain\">;</code></div><div class=\"line number10 index9 alt1\">&nbsp;</div><div class=\"line number11 index10 alt2\"><code class=\"js plain\">}</code></div><div class=\"line number12 index11 alt1\">&nbsp;</div><div class=\"line number13 index12 alt2\"><code class=\"js comments\">// A constructor for defining new trucks</code></div><div class=\"line number14 index13 alt1\"><code class=\"js keyword\">function</code> <code class=\"js plain\">Truck( options){</code></div><div class=\"line number15 index14 alt2\">&nbsp;</div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.state = options.state || </code><code class=\"js string\">\"used\"</code><code class=\"js plain\">;</code></div><div class=\"line number17 index16 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.wheelSize = options.wheelSize || </code><code class=\"js string\">\"large\"</code><code class=\"js plain\">;</code></div><div class=\"line number18 index17 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.color = options.color || </code><code class=\"js string\">\"blue\"</code><code class=\"js plain\">;</code></div><div class=\"line number19 index18 alt2\"><code class=\"js plain\">}</code></div><div class=\"line number20 index19 alt1\">&nbsp;</div><div class=\"line number21 index20 alt2\">&nbsp;</div><div class=\"line number22 index21 alt1\"><code class=\"js comments\">// FactoryExample.js</code></div><div class=\"line number23 index22 alt2\">&nbsp;</div><div class=\"line number24 index23 alt1\"><code class=\"js comments\">// Define a skeleton vehicle factory</code></div><div class=\"line number25 index24 alt2\"><code class=\"js keyword\">function</code> <code class=\"js plain\">VehicleFactory() {}</code></div><div class=\"line number26 index25 alt1\">&nbsp;</div><div class=\"line number27 index26 alt2\"><code class=\"js comments\">// Define the prototypes and utilities for this factory</code></div><div class=\"line number28 index27 alt1\">&nbsp;</div><div class=\"line number29 index28 alt2\"><code class=\"js comments\">// Our default vehicleClass is Car</code></div><div class=\"line number30 index29 alt1\"><code class=\"js plain\">VehicleFactory.prototype.vehicleClass = Car;</code></div><div class=\"line number31 index30 alt2\">&nbsp;</div><div class=\"line number32 index31 alt1\"><code class=\"js comments\">// Our Factory method for creating new Vehicle instances</code></div><div class=\"line number33 index32 alt2\"><code class=\"js plain\">VehicleFactory.prototype.createVehicle = </code><code class=\"js keyword\">function</code> <code class=\"js plain\">( options ) {</code></div><div class=\"line number34 index33 alt1\">&nbsp;</div><div class=\"line number35 index34 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">switch</code><code class=\"js plain\">(options.vehicleType){</code></div><div class=\"line number36 index35 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">case</code> <code class=\"js string\">\"car\"</code><code class=\"js plain\">:</code></div><div class=\"line number37 index36 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.vehicleClass = Car;</code></div><div class=\"line number38 index37 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">break</code><code class=\"js plain\">;</code></div><div class=\"line number39 index38 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">case</code> <code class=\"js string\">\"truck\"</code><code class=\"js plain\">:</code></div><div class=\"line number40 index39 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.vehicleClass = Truck;</code></div><div class=\"line number41 index40 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">break</code><code class=\"js plain\">;</code></div><div class=\"line number42 index41 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">//defaults to VehicleFactory.prototype.vehicleClass (Car)</code></div><div class=\"line number43 index42 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number44 index43 alt1\">&nbsp;</div><div class=\"line number45 index44 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js keyword\">new</code> <code class=\"js keyword\">this</code><code class=\"js plain\">.vehicleClass( options );</code></div><div class=\"line number46 index45 alt1\">&nbsp;</div><div class=\"line number47 index46 alt2\"><code class=\"js plain\">};</code></div><div class=\"line number48 index47 alt1\">&nbsp;</div><div class=\"line number49 index48 alt2\"><code class=\"js comments\">// Create an instance of our factory that makes cars</code></div><div class=\"line number50 index49 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">carFactory = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">VehicleFactory();</code></div><div class=\"line number51 index50 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">car = carFactory.createVehicle( {</code></div><div class=\"line number52 index51 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">vehicleType: </code><code class=\"js string\">\"car\"</code><code class=\"js plain\">,</code></div><div class=\"line number53 index52 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">color: </code><code class=\"js string\">\"yellow\"</code><code class=\"js plain\">,</code></div><div class=\"line number54 index53 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">doors: 6 } );</code></div><div class=\"line number55 index54 alt2\">&nbsp;</div><div class=\"line number56 index55 alt1\"><code class=\"js comments\">// Test to confirm our car was created using the vehicleClass/prototype Car</code></div><div class=\"line number57 index56 alt2\">&nbsp;</div><div class=\"line number58 index57 alt1\"><code class=\"js comments\">// Outputs: true</code></div><div class=\"line number59 index58 alt2\"><code class=\"js plain\">console.log( car </code><code class=\"js keyword\">instanceof</code> <code class=\"js plain\">Car );</code></div><div class=\"line number60 index59 alt1\">&nbsp;</div><div class=\"line number61 index60 alt2\"><code class=\"js comments\">// Outputs: Car object of color \"yellow\", doors: 6 in a \"brand new\" state</code></div><div class=\"line number62 index61 alt1\"><code class=\"js plain\">console.log( car );</code></div></div></td></tr></tbody></table></div></div>\n\n        <p><strong>Approach #1: Modify a VehicleFactory instance to use the Truck class</strong></p>\n\n        <div><div id=\"highlighter_507685\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">movingTruck = carFactory.createVehicle( {</code></div><div class=\"line number2 index1 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">vehicleType: </code><code class=\"js string\">\"truck\"</code><code class=\"js plain\">,</code></div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">state: </code><code class=\"js string\">\"like new\"</code><code class=\"js plain\">,</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">color: </code><code class=\"js string\">\"red\"</code><code class=\"js plain\">,</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">wheelSize: </code><code class=\"js string\">\"small\"</code> <code class=\"js plain\">} );</code></div><div class=\"line number6 index5 alt1\">&nbsp;</div><div class=\"line number7 index6 alt2\"><code class=\"js comments\">// Test to confirm our truck was created with the vehicleClass/prototype Truck</code></div><div class=\"line number8 index7 alt1\">&nbsp;</div><div class=\"line number9 index8 alt2\"><code class=\"js comments\">// Outputs: true</code></div><div class=\"line number10 index9 alt1\"><code class=\"js plain\">console.log( movingTruck </code><code class=\"js keyword\">instanceof</code> <code class=\"js plain\">Truck );</code></div><div class=\"line number11 index10 alt2\">&nbsp;</div><div class=\"line number12 index11 alt1\"><code class=\"js comments\">// Outputs: Truck object of color \"red\", a \"like new\" state</code></div><div class=\"line number13 index12 alt2\"><code class=\"js comments\">// and a \"small\" wheelSize</code></div><div class=\"line number14 index13 alt1\"><code class=\"js plain\">console.log( movingTruck );</code></div></div></td></tr></tbody></table></div></div>\n\n        <p><strong>Approach #2: Subclass VehicleFactory to create a factory class that builds Trucks</strong></p>\n\n        <div><div id=\"highlighter_240747\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">function</code> <code class=\"js plain\">TruckFactory () {}</code></div><div class=\"line number2 index1 alt1\"><code class=\"js plain\">TruckFactory.prototype = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">VehicleFactory();</code></div><div class=\"line number3 index2 alt2\"><code class=\"js plain\">TruckFactory.prototype.vehicleClass = Truck;</code></div><div class=\"line number4 index3 alt1\">&nbsp;</div><div class=\"line number5 index4 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">truckFactory = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">TruckFactory();</code></div><div class=\"line number6 index5 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">myBigTruck = truckFactory.createVehicle( {</code></div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">state: </code><code class=\"js string\">\"omg..so bad.\"</code><code class=\"js plain\">,</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">color: </code><code class=\"js string\">\"pink\"</code><code class=\"js plain\">,</code></div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">wheelSize: </code><code class=\"js string\">\"so big\"</code> <code class=\"js plain\">} );</code></div><div class=\"line number10 index9 alt1\">&nbsp;</div><div class=\"line number11 index10 alt2\"><code class=\"js comments\">// Confirms that myBigTruck was created with the prototype Truck</code></div><div class=\"line number12 index11 alt1\"><code class=\"js comments\">// Outputs: true</code></div><div class=\"line number13 index12 alt2\"><code class=\"js plain\">console.log( myBigTruck </code><code class=\"js keyword\">instanceof</code> <code class=\"js plain\">Truck );</code></div><div class=\"line number14 index13 alt1\">&nbsp;</div><div class=\"line number15 index14 alt2\"><code class=\"js comments\">// Outputs: Truck object with the color \"pink\", wheelSize \"so big\"</code></div><div class=\"line number16 index15 alt1\"><code class=\"js comments\">// and state \"omg. so bad\"</code></div><div class=\"line number17 index16 alt2\"><code class=\"js plain\">console.log( myBigTruck );</code></div></div></td></tr></tbody></table></div></div>\n\n\n        <h3>When To Use The Factory Pattern</h3>\n\n        <p>The Factory pattern can be especially useful when applied to the following situations:\n        </p><ul>\n          <li>When our object or component setup involves a high level of complexity</li>\n          <li>When we need to easily generate different instances of objects depending on the environment we are in</li>\n          <li>When we're working with many small objects or components that share the same properties</li>\n          <li>When composing objects with instances of other objects that need only satisfy an API contract (aka, duck typing) to work. This is useful for decoupling.</li>\n        </ul>\n        <p></p>\n\n        <h3>When Not To Use The Factory Pattern</h3>\n\n        <p>\n        When applied to the wrong type of problem, this pattern can introduce an unnecessarily great deal of complexity to an application. Unless providing an interface for object creation is a design goal for the library or framework we are writing, I would suggest sticking to explicit constructors to avoid the unnecessary overhead.</p>\n\n        <p>Due to the fact that the process of object creation is effectively abstracted behind an interface, this can also introduce problems with unit testing depending on just how complex this process might be.</p>\n\n        <h3>Abstract Factories</h3>\n\n        <p>It is also useful to be aware of the <strong>Abstract Factory</strong> pattern, which aims to encapsulate a group of individual factories with a common goal. It separates the details of implementation of a set of objects from their general usage.</p>\n\n        <p>An Abstract Factory should be used where a system must be independent from the way the objects it creates are generated or it needs to work with multiple types of objects.</p>\n\n        <p>An example which is both simple and easier to understand is a vehicle factory, which defines ways to get or register vehicles types. The abstract factory can be named abstractVehicleFactory. The Abstract factory will allow the definition of types of vehicle like \"car\" or \"truck\" and concrete factories will implement only classes that fulfill the vehicle contract (e.g <code>Vehicle.prototype.drive</code> and <code>Vehicle.prototype.breakDown</code>).</p>\n\n        <div><div id=\"highlighter_21697\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div><div class=\"line number31 index30 alt2\">31</div><div class=\"line number32 index31 alt1\">32</div><div class=\"line number33 index32 alt2\">33</div><div class=\"line number34 index33 alt1\">34</div><div class=\"line number35 index34 alt2\">35</div><div class=\"line number36 index35 alt1\">36</div><div class=\"line number37 index36 alt2\">37</div><div class=\"line number38 index37 alt1\">38</div><div class=\"line number39 index38 alt2\">39</div><div class=\"line number40 index39 alt1\">40</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">abstractVehicleFactory = (</code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// Storage for our vehicle types</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">types = {};</code></div><div class=\"line number5 index4 alt2\">&nbsp;</div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">{</code></div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">getVehicle: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">( type, customizations ) {</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">Vehicle = types[type];</code></div><div class=\"line number9 index8 alt2\">&nbsp;</div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">(Vehicle ? </code><code class=\"js keyword\">new</code> <code class=\"js plain\">Vehicle(customizations) : </code><code class=\"js keyword\">null</code><code class=\"js plain\">);</code></div><div class=\"line number11 index10 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number12 index11 alt1\">&nbsp;</div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">registerVehicle: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">( type, Vehicle ) {</code></div><div class=\"line number14 index13 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">proto = Vehicle.prototype;</code></div><div class=\"line number15 index14 alt2\">&nbsp;</div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// only register classes that fulfill the vehicle contract</code></div><div class=\"line number17 index16 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">if</code> <code class=\"js plain\">( proto.drive &amp;&amp; proto.breakDown ) {</code></div><div class=\"line number18 index17 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">types[type] = Vehicle;</code></div><div class=\"line number19 index18 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number20 index19 alt1\">&nbsp;</div><div class=\"line number21 index20 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">abstractVehicleFactory;</code></div><div class=\"line number22 index21 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number23 index22 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number24 index23 alt1\"><code class=\"js plain\">})();</code></div><div class=\"line number25 index24 alt2\">&nbsp;</div><div class=\"line number26 index25 alt1\">&nbsp;</div><div class=\"line number27 index26 alt2\"><code class=\"js comments\">// Usage:</code></div><div class=\"line number28 index27 alt1\">&nbsp;</div><div class=\"line number29 index28 alt2\"><code class=\"js plain\">abstractVehicleFactory.registerVehicle( </code><code class=\"js string\">\"car\"</code><code class=\"js plain\">, Car );</code></div><div class=\"line number30 index29 alt1\"><code class=\"js plain\">abstractVehicleFactory.registerVehicle( </code><code class=\"js string\">\"truck\"</code><code class=\"js plain\">, Truck );</code></div><div class=\"line number31 index30 alt2\">&nbsp;</div><div class=\"line number32 index31 alt1\"><code class=\"js comments\">// Instantiate a new car based on the abstract vehicle type</code></div><div class=\"line number33 index32 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">car = abstractVehicleFactory.getVehicle( </code><code class=\"js string\">\"car\"</code><code class=\"js plain\">, {</code></div><div class=\"line number34 index33 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">color: </code><code class=\"js string\">\"lime green\"</code><code class=\"js plain\">,</code></div><div class=\"line number35 index34 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">state: </code><code class=\"js string\">\"like new\"</code> <code class=\"js plain\">} );</code></div><div class=\"line number36 index35 alt1\">&nbsp;</div><div class=\"line number37 index36 alt2\"><code class=\"js comments\">// Instantiate a new truck in a similar manner</code></div><div class=\"line number38 index37 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">truck = abstractVehicleFactory.getVehicle( </code><code class=\"js string\">\"truck\"</code><code class=\"js plain\">, {</code></div><div class=\"line number39 index38 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">wheelSize: </code><code class=\"js string\">\"medium\"</code><code class=\"js plain\">,</code></div><div class=\"line number40 index39 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">color: </code><code class=\"js string\">\"neon yellow\"</code> <code class=\"js plain\">} );</code></div></div></td></tr></tbody></table></div></div>",
      "pattern": "The Factory Pattern"
    },
    "-L6a2mQa_mFwyOuz9Mf4": {
      "description": " <p>The Flyweight pattern is a classical structural solution for optimizing code that is repetitive, slow and inefficiently shares data. It aims to minimize the use of memory in an application by sharing as much data as possible with related objects (e.g application configuration, state and so on).</p>\n\n      <p>The pattern was first conceived by Paul Calder and Mark Linton in 1990 and was named after the boxing weight class that includes fighters weighing less than 112lb. The name Flyweight itself is derived from this weight classification as it refers to the small weight (memory footprint) the pattern aims to help us achieve.</p>\n\n      <p>In practice, Flyweight data sharing can involve taking several similar objects or data constructs used by a number of objects and placing this data into a single external object. We can pass through this object to those depending on this data, rather than storing identical data across each one.</p>\n\n      <h2>Using Flyweights</h2>\n\n      <p>There are two ways in which the Flyweight pattern can be applied. The first is at the data-layer, where we deal with the concept of sharing data between large quantities of similar objects stored in memory.</p>\n\n      <p>The second is at the DOM-layer where the Flyweight can be used as a central event-manager to avoid attaching event handlers to every child element in a parent container we wish to have some similar behavior.</p>\n\n      <p>As the data-layer is where the flyweight pattern is most used traditionally, we'll take a look at this first.</p>\n\n      <h2>Flyweights and sharing data</h2>\n\n      <p>For this application, there are a few more concepts around the classical Flyweight pattern that we need to be aware of. In the Flyweight pattern there's a concept of two states - intrinsic and extrinsic. Intrinsic information may be required by internal methods in our objects which they absolutely cannot function without. Extrinsic information can however be removed and stored externally.</p>\n\n      <p>Objects with the same intrinsic data can be replaced with a single shared object, created by a factory method. This allows us to reduce the overall quantity of implicit data being stored quite significantly.</p>\n\n      <p>The benefit of this is that we're able to keep an eye on objects that have already been instantiated so that new copies are only ever created should the intrinsic state differ from the object we already have.</p>\n\n      <p>We use a manager to handle the extrinsic states. How this is implemented can vary, but one approach to this to have the manager object contain a central database of the extrinsic states and the flyweight objects which they belong to.</p>\n\n\n      <h2>Implementing Classical Flyweights</h2>\n\n      <p>As the Flyweight pattern hasn't been heavily used in JavaScript in recent years, many of the implementations we might use for inspiration come from the Java and C++ worlds.</p>\n\n      <p>Our first look at Flyweights in code is my JavaScript implementation of the Java sample of the Flyweight pattern from Wikipedia (<a href=\"http://en.wikipedia.org/wiki/Flyweight_pattern\">http://en.wikipedia.org/wiki/Flyweight_pattern</a>).\n\n      </p><p>We will be making use of three types of Flyweight components in this implementation, which are listed below:</p>\n\n      <p>\n        </p><ul>\n          <li><strong>Flyweight</strong> corresponds to an interface through which flyweights are able to receive and act on extrinsic states</li>\n          <li><strong>Concrete Flyweight</strong> actually implements the Flyweight interface and stores intrinsic state. Concrete Flyweights need to be sharable and capable of manipulating state that is extrinsic</li>\n          <li><strong>Flyweight Factory</strong> manages flyweight objects and creates them too. It makes sure that our flyweights are shared and manages them as a group of objects which can be queried if we require individual instances. If an object has been already created in the group it returns it, otherwise it adds a new object to the pool and returns it.</li>\n        </ul>\n      <p></p>\n\n      <p>These correspond to the following definitions in our implementation:</p>\n      <p>\n        </p><ul>\n          <li>CoffeeOrder: Flyweight</li>\n          <li>CoffeeFlavor: Concrete Flyweight </li>\n          <li>CoffeeOrderContext: Helper</li>\n          <li>CoffeeFlavorFactory: Flyweight Factory</li>\n          <li>testFlyweight: Utilization of our Flyweights</li>\n        </ul>\n      <p></p>\n\n      <h3>Duck punching \"implements\"</h3>\n\n      <p>Duck punching allows us to extend the capabilities of a language or solution without necessarily needing to modify the runtime source. As this next solution requires the use of a Java keyword (<code>implements</code>) for implementing interfaces and isn't found in JavaScript natively, let's first duck punch it.</p>\n\n      <p><code>Function.prototype.implementsFor</code> works on an object constructor and will accept a parent class (function) or object and either inherit from this using normal inheritance (for functions) or virtual inheritance (for objects).</p>\n\n      <div><div id=\"highlighter_734416\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js comments\">// Simulate pure virtual inheritance/\"implement\" keyword for JS</code></div><div class=\"line number2 index1 alt1\"><code class=\"js plain\">Function.prototype.implementsFor = </code><code class=\"js keyword\">function</code><code class=\"js plain\">( parentClassOrObject ){</code></div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">if</code> <code class=\"js plain\">( parentClassOrObject.constructor === Function )</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">{</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Normal Inheritance</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.prototype = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">parentClassOrObject();</code></div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.prototype.constructor = </code><code class=\"js keyword\">this</code><code class=\"js plain\">;</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.prototype.parent = parentClassOrObject.prototype;</code></div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">else</code></div><div class=\"line number11 index10 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">{</code></div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Pure Virtual Inheritance</code></div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.prototype = parentClassOrObject;</code></div><div class=\"line number14 index13 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.prototype.constructor = </code><code class=\"js keyword\">this</code><code class=\"js plain\">;</code></div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.prototype.parent = parentClassOrObject;</code></div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number17 index16 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js keyword\">this</code><code class=\"js plain\">;</code></div><div class=\"line number18 index17 alt1\"><code class=\"js plain\">};</code></div></div></td></tr></tbody></table></div></div>\n\n      <p>We can use this to patch the lack of an <code>implements</code> keyword by having a function inherit an interface explicitly. Below, <code>CoffeeFlavor</code> implements the <code>CoffeeOrder</code> interface and must contain its interface methods in order for us to assign the functionality powering these implementations to an object.</p>\n\n      <div><div id=\"highlighter_190565\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div><div class=\"line number31 index30 alt2\">31</div><div class=\"line number32 index31 alt1\">32</div><div class=\"line number33 index32 alt2\">33</div><div class=\"line number34 index33 alt1\">34</div><div class=\"line number35 index34 alt2\">35</div><div class=\"line number36 index35 alt1\">36</div><div class=\"line number37 index36 alt2\">37</div><div class=\"line number38 index37 alt1\">38</div><div class=\"line number39 index38 alt2\">39</div><div class=\"line number40 index39 alt1\">40</div><div class=\"line number41 index40 alt2\">41</div><div class=\"line number42 index41 alt1\">42</div><div class=\"line number43 index42 alt2\">43</div><div class=\"line number44 index43 alt1\">44</div><div class=\"line number45 index44 alt2\">45</div><div class=\"line number46 index45 alt1\">46</div><div class=\"line number47 index46 alt2\">47</div><div class=\"line number48 index47 alt1\">48</div><div class=\"line number49 index48 alt2\">49</div><div class=\"line number50 index49 alt1\">50</div><div class=\"line number51 index50 alt2\">51</div><div class=\"line number52 index51 alt1\">52</div><div class=\"line number53 index52 alt2\">53</div><div class=\"line number54 index53 alt1\">54</div><div class=\"line number55 index54 alt2\">55</div><div class=\"line number56 index55 alt1\">56</div><div class=\"line number57 index56 alt2\">57</div><div class=\"line number58 index57 alt1\">58</div><div class=\"line number59 index58 alt2\">59</div><div class=\"line number60 index59 alt1\">60</div><div class=\"line number61 index60 alt2\">61</div><div class=\"line number62 index61 alt1\">62</div><div class=\"line number63 index62 alt2\">63</div><div class=\"line number64 index63 alt1\">64</div><div class=\"line number65 index64 alt2\">65</div><div class=\"line number66 index65 alt1\">66</div><div class=\"line number67 index66 alt2\">67</div><div class=\"line number68 index67 alt1\">68</div><div class=\"line number69 index68 alt2\">69</div><div class=\"line number70 index69 alt1\">70</div><div class=\"line number71 index70 alt2\">71</div><div class=\"line number72 index71 alt1\">72</div><div class=\"line number73 index72 alt2\">73</div><div class=\"line number74 index73 alt1\">74</div><div class=\"line number75 index74 alt2\">75</div><div class=\"line number76 index75 alt1\">76</div><div class=\"line number77 index76 alt2\">77</div><div class=\"line number78 index77 alt1\">78</div><div class=\"line number79 index78 alt2\">79</div><div class=\"line number80 index79 alt1\">80</div><div class=\"line number81 index80 alt2\">81</div><div class=\"line number82 index81 alt1\">82</div><div class=\"line number83 index82 alt2\">83</div><div class=\"line number84 index83 alt1\">84</div><div class=\"line number85 index84 alt2\">85</div><div class=\"line number86 index85 alt1\">86</div><div class=\"line number87 index86 alt2\">87</div><div class=\"line number88 index87 alt1\">88</div><div class=\"line number89 index88 alt2\">89</div><div class=\"line number90 index89 alt1\">90</div><div class=\"line number91 index90 alt2\">91</div><div class=\"line number92 index91 alt1\">92</div><div class=\"line number93 index92 alt2\">93</div><div class=\"line number94 index93 alt1\">94</div><div class=\"line number95 index94 alt2\">95</div><div class=\"line number96 index95 alt1\">96</div><div class=\"line number97 index96 alt2\">97</div><div class=\"line number98 index97 alt1\">98</div><div class=\"line number99 index98 alt2\">99</div><div class=\"line number100 index99 alt1\">100</div><div class=\"line number101 index100 alt2\">101</div><div class=\"line number102 index101 alt1\">102</div><div class=\"line number103 index102 alt2\">103</div><div class=\"line number104 index103 alt1\">104</div><div class=\"line number105 index104 alt2\">105</div><div class=\"line number106 index105 alt1\">106</div><div class=\"line number107 index106 alt2\">107</div><div class=\"line number108 index107 alt1\">108</div><div class=\"line number109 index108 alt2\">109</div><div class=\"line number110 index109 alt1\">110</div><div class=\"line number111 index110 alt2\">111</div><div class=\"line number112 index111 alt1\">112</div><div class=\"line number113 index112 alt2\">113</div><div class=\"line number114 index113 alt1\">114</div><div class=\"line number115 index114 alt2\">115</div><div class=\"line number116 index115 alt1\">116</div><div class=\"line number117 index116 alt2\">117</div><div class=\"line number118 index117 alt1\">118</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js comments\">// Flyweight object</code></div><div class=\"line number2 index1 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">CoffeeOrder = {</code></div><div class=\"line number3 index2 alt2\">&nbsp;</div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// Interfaces</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">serveCoffee:</code><code class=\"js keyword\">function</code><code class=\"js plain\">(context){},</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">getFlavor:</code><code class=\"js keyword\">function</code><code class=\"js plain\">(){}</code></div><div class=\"line number7 index6 alt2\">&nbsp;</div><div class=\"line number8 index7 alt1\"><code class=\"js plain\">};</code></div><div class=\"line number9 index8 alt2\">&nbsp;</div><div class=\"line number10 index9 alt1\">&nbsp;</div><div class=\"line number11 index10 alt2\"><code class=\"js comments\">// ConcreteFlyweight object that creates ConcreteFlyweight</code></div><div class=\"line number12 index11 alt1\"><code class=\"js comments\">// Implements CoffeeOrder</code></div><div class=\"line number13 index12 alt2\"><code class=\"js keyword\">function</code> <code class=\"js plain\">CoffeeFlavor( newFlavor ){</code></div><div class=\"line number14 index13 alt1\">&nbsp;</div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">flavor = newFlavor;</code></div><div class=\"line number16 index15 alt1\">&nbsp;</div><div class=\"line number17 index16 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// If an interface has been defined for a feature</code></div><div class=\"line number18 index17 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// implement the feature</code></div><div class=\"line number19 index18 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">if</code><code class=\"js plain\">( </code><code class=\"js keyword\">typeof</code> <code class=\"js keyword\">this</code><code class=\"js plain\">.getFlavor === </code><code class=\"js string\">\"function\"</code> <code class=\"js plain\">){</code></div><div class=\"line number20 index19 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.getFlavor = </code><code class=\"js keyword\">function</code><code class=\"js plain\">() {</code></div><div class=\"line number21 index20 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">flavor;</code></div><div class=\"line number22 index21 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number23 index22 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number24 index23 alt1\">&nbsp;</div><div class=\"line number25 index24 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">if</code><code class=\"js plain\">( </code><code class=\"js keyword\">typeof</code> <code class=\"js keyword\">this</code><code class=\"js plain\">.serveCoffee === </code><code class=\"js string\">\"function\"</code> <code class=\"js plain\">){</code></div><div class=\"line number26 index25 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.serveCoffee = </code><code class=\"js keyword\">function</code><code class=\"js plain\">( context ) {</code></div><div class=\"line number27 index26 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log(</code><code class=\"js string\">\"Serving Coffee flavor \"</code></div><div class=\"line number28 index27 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">+ flavor</code></div><div class=\"line number29 index28 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">+ </code><code class=\"js string\">\" to table number \"</code></div><div class=\"line number30 index29 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">+ context.getTable());</code></div><div class=\"line number31 index30 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number32 index31 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number33 index32 alt2\">&nbsp;</div><div class=\"line number34 index33 alt1\"><code class=\"js plain\">}</code></div><div class=\"line number35 index34 alt2\">&nbsp;</div><div class=\"line number36 index35 alt1\">&nbsp;</div><div class=\"line number37 index36 alt2\"><code class=\"js comments\">// Implement interface for CoffeeOrder</code></div><div class=\"line number38 index37 alt1\"><code class=\"js plain\">CoffeeFlavor.implementsFor( CoffeeOrder );</code></div><div class=\"line number39 index38 alt2\">&nbsp;</div><div class=\"line number40 index39 alt1\">&nbsp;</div><div class=\"line number41 index40 alt2\"><code class=\"js comments\">// Handle table numbers for a coffee order</code></div><div class=\"line number42 index41 alt1\"><code class=\"js keyword\">function</code> <code class=\"js plain\">CoffeeOrderContext( tableNumber ) {</code></div><div class=\"line number43 index42 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code><code class=\"js plain\">{</code></div><div class=\"line number44 index43 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">getTable: </code><code class=\"js keyword\">function</code><code class=\"js plain\">() {</code></div><div class=\"line number45 index44 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">tableNumber;</code></div><div class=\"line number46 index45 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number47 index46 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number48 index47 alt1\"><code class=\"js plain\">}</code></div><div class=\"line number49 index48 alt2\">&nbsp;</div><div class=\"line number50 index49 alt1\">&nbsp;</div><div class=\"line number51 index50 alt2\"><code class=\"js keyword\">function</code> <code class=\"js plain\">CoffeeFlavorFactory() {</code></div><div class=\"line number52 index51 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">flavors = {},</code></div><div class=\"line number53 index52 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">length = 0;</code></div><div class=\"line number54 index53 alt1\">&nbsp;</div><div class=\"line number55 index54 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">{</code></div><div class=\"line number56 index55 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">getCoffeeFlavor: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">(flavorName) {</code></div><div class=\"line number57 index56 alt2\">&nbsp;</div><div class=\"line number58 index57 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">flavor = flavors[flavorName];</code></div><div class=\"line number59 index58 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">if</code> <code class=\"js plain\">(</code><code class=\"js keyword\">typeof</code> <code class=\"js plain\">flavor === </code><code class=\"js string\">\"undefined\"</code><code class=\"js plain\">) {</code></div><div class=\"line number60 index59 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">flavor = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">CoffeeFlavor(flavorName);</code></div><div class=\"line number61 index60 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">flavors[flavorName] = flavor;</code></div><div class=\"line number62 index61 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">length++;</code></div><div class=\"line number63 index62 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number64 index63 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">flavor;</code></div><div class=\"line number65 index64 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number66 index65 alt1\">&nbsp;</div><div class=\"line number67 index66 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">getTotalCoffeeFlavorsMade: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number68 index67 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">length;</code></div><div class=\"line number69 index68 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number70 index69 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number71 index70 alt2\"><code class=\"js plain\">}</code></div><div class=\"line number72 index71 alt1\">&nbsp;</div><div class=\"line number73 index72 alt2\"><code class=\"js comments\">// Sample usage:</code></div><div class=\"line number74 index73 alt1\"><code class=\"js comments\">// testFlyweight()</code></div><div class=\"line number75 index74 alt2\">&nbsp;</div><div class=\"line number76 index75 alt1\"><code class=\"js keyword\">function</code> <code class=\"js plain\">testFlyweight(){</code></div><div class=\"line number77 index76 alt2\">&nbsp;</div><div class=\"line number78 index77 alt1\">&nbsp;</div><div class=\"line number79 index78 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// The flavors ordered.</code></div><div class=\"line number80 index79 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">flavors = [],</code></div><div class=\"line number81 index80 alt2\">&nbsp;</div><div class=\"line number82 index81 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// The tables for the orders.</code></div><div class=\"line number83 index82 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">tables = [],</code></div><div class=\"line number84 index83 alt1\">&nbsp;</div><div class=\"line number85 index84 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// Number of orders made</code></div><div class=\"line number86 index85 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">ordersMade = 0,</code></div><div class=\"line number87 index86 alt2\">&nbsp;</div><div class=\"line number88 index87 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// The CoffeeFlavorFactory instance</code></div><div class=\"line number89 index88 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">flavorFactory = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">CoffeeFlavorFactory();</code></div><div class=\"line number90 index89 alt1\">&nbsp;</div><div class=\"line number91 index90 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">function</code> <code class=\"js plain\">takeOrders( flavorIn, table) {</code></div><div class=\"line number92 index91 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">flavors.push( flavorFactory.getCoffeeFlavor( flavorIn ) );</code></div><div class=\"line number93 index92 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">tables.push( </code><code class=\"js keyword\">new</code> <code class=\"js plain\">CoffeeOrderContext( table ) );</code></div><div class=\"line number94 index93 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">ordersMade++;</code></div><div class=\"line number95 index94 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number96 index95 alt1\">&nbsp;</div><div class=\"line number97 index96 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">takeOrders(</code><code class=\"js string\">\"Cappuccino\"</code><code class=\"js plain\">, 2);</code></div><div class=\"line number98 index97 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">takeOrders(</code><code class=\"js string\">\"Cappuccino\"</code><code class=\"js plain\">, 2);</code></div><div class=\"line number99 index98 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">takeOrders(</code><code class=\"js string\">\"Frappe\"</code><code class=\"js plain\">, 1);</code></div><div class=\"line number100 index99 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">takeOrders(</code><code class=\"js string\">\"Frappe\"</code><code class=\"js plain\">, 1);</code></div><div class=\"line number101 index100 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">takeOrders(</code><code class=\"js string\">\"Xpresso\"</code><code class=\"js plain\">, 1);</code></div><div class=\"line number102 index101 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">takeOrders(</code><code class=\"js string\">\"Frappe\"</code><code class=\"js plain\">, 897);</code></div><div class=\"line number103 index102 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">takeOrders(</code><code class=\"js string\">\"Cappuccino\"</code><code class=\"js plain\">, 97);</code></div><div class=\"line number104 index103 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">takeOrders(</code><code class=\"js string\">\"Cappuccino\"</code><code class=\"js plain\">, 97);</code></div><div class=\"line number105 index104 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">takeOrders(</code><code class=\"js string\">\"Frappe\"</code><code class=\"js plain\">, 3);</code></div><div class=\"line number106 index105 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">takeOrders(</code><code class=\"js string\">\"Xpresso\"</code><code class=\"js plain\">, 3);</code></div><div class=\"line number107 index106 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">takeOrders(</code><code class=\"js string\">\"Cappuccino\"</code><code class=\"js plain\">, 3);</code></div><div class=\"line number108 index107 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">takeOrders(</code><code class=\"js string\">\"Xpresso\"</code><code class=\"js plain\">, 96);</code></div><div class=\"line number109 index108 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">takeOrders(</code><code class=\"js string\">\"Frappe\"</code><code class=\"js plain\">, 552);</code></div><div class=\"line number110 index109 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">takeOrders(</code><code class=\"js string\">\"Cappuccino\"</code><code class=\"js plain\">, 121);</code></div><div class=\"line number111 index110 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">takeOrders(</code><code class=\"js string\">\"Xpresso\"</code><code class=\"js plain\">, 121);</code></div><div class=\"line number112 index111 alt1\">&nbsp;</div><div class=\"line number113 index112 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">for</code> <code class=\"js plain\">(</code><code class=\"js keyword\">var</code> <code class=\"js plain\">i = 0; i &lt; ordersMade; ++i) {</code></div><div class=\"line number114 index113 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">flavors[i].serveCoffee(tables[i]);</code></div><div class=\"line number115 index114 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number116 index115 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log(</code><code class=\"js string\">\" \"</code><code class=\"js plain\">);</code></div><div class=\"line number117 index116 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log(</code><code class=\"js string\">\"total CoffeeFlavor objects made: \"</code> <code class=\"js plain\">+ flavorFactory.getTotalCoffeeFlavorsMade());</code></div><div class=\"line number118 index117 alt1\"><code class=\"js plain\">}</code></div></div></td></tr></tbody></table></div></div>\n\n      <h2>Converting code to use the Flyweight pattern</h2>\n\n      <p>\n      Next, let's continue our look at Flyweights by implementing a system to manage all of the books in a library. The important meta-data for each book could probably be broken down as follows:</p>\n      <ul>\n      <li>ID</li>\n      <li>Title</li>\n      <li>Author</li>\n      <li>Genre</li>\n      <li>Page count</li>\n      <li>Publisher ID</li>\n      <li>ISBN</li>\n      </ul>\n      <p>\n      We'll also require the following properties to keep track of which member has checked out a particular book, the date they've checked it out on as well as the expected date of return.\n      </p>\n      <ul>\n      <li>checkoutDate</li>\n      <li>checkoutMember</li>\n      <li>dueReturnDate</li>\n      <li>availability</li>\n      </ul>\n      <p>\n      Each book would thus be represented as follows, prior to any optimization using the Flyweight pattern:\n      </p>\n      <div><div id=\"highlighter_421801\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div><div class=\"line number31 index30 alt2\">31</div><div class=\"line number32 index31 alt1\">32</div><div class=\"line number33 index32 alt2\">33</div><div class=\"line number34 index33 alt1\">34</div><div class=\"line number35 index34 alt2\">35</div><div class=\"line number36 index35 alt1\">36</div><div class=\"line number37 index36 alt2\">37</div><div class=\"line number38 index37 alt1\">38</div><div class=\"line number39 index38 alt2\">39</div><div class=\"line number40 index39 alt1\">40</div><div class=\"line number41 index40 alt2\">41</div><div class=\"line number42 index41 alt1\">42</div><div class=\"line number43 index42 alt2\">43</div><div class=\"line number44 index43 alt1\">44</div><div class=\"line number45 index44 alt2\">45</div><div class=\"line number46 index45 alt1\">46</div><div class=\"line number47 index46 alt2\">47</div><div class=\"line number48 index47 alt1\">48</div><div class=\"line number49 index48 alt2\">49</div><div class=\"line number50 index49 alt1\">50</div><div class=\"line number51 index50 alt2\">51</div><div class=\"line number52 index51 alt1\">52</div><div class=\"line number53 index52 alt2\">53</div><div class=\"line number54 index53 alt1\">54</div><div class=\"line number55 index54 alt2\">55</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">Book = </code><code class=\"js keyword\">function</code><code class=\"js plain\">( id, title, author, genre, pageCount,publisherID, ISBN, checkoutDate, checkoutMember, dueReturnDate,availability ){</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.id = id;</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.title = title;</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.author = author;</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.genre = genre;</code></div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.pageCount = pageCount;</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.publisherID = publisherID;</code></div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.ISBN = ISBN;</code></div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.checkoutDate = checkoutDate;</code></div><div class=\"line number11 index10 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.checkoutMember = checkoutMember;</code></div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.dueReturnDate = dueReturnDate;</code></div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.availability = availability;</code></div><div class=\"line number14 index13 alt1\">&nbsp;</div><div class=\"line number15 index14 alt2\"><code class=\"js plain\">};</code></div><div class=\"line number16 index15 alt1\">&nbsp;</div><div class=\"line number17 index16 alt2\"><code class=\"js plain\">Book.prototype = {</code></div><div class=\"line number18 index17 alt1\">&nbsp;</div><div class=\"line number19 index18 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">getTitle: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number20 index19 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js keyword\">this</code><code class=\"js plain\">.title;</code></div><div class=\"line number21 index20 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number22 index21 alt1\">&nbsp;</div><div class=\"line number23 index22 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">getAuthor: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number24 index23 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js keyword\">this</code><code class=\"js plain\">.author;</code></div><div class=\"line number25 index24 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number26 index25 alt1\">&nbsp;</div><div class=\"line number27 index26 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">getISBN: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">(){</code></div><div class=\"line number28 index27 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js keyword\">this</code><code class=\"js plain\">.ISBN;</code></div><div class=\"line number29 index28 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number30 index29 alt1\">&nbsp;</div><div class=\"line number31 index30 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// For brevity, other getters are not shown</code></div><div class=\"line number32 index31 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">updateCheckoutStatus: </code><code class=\"js keyword\">function</code><code class=\"js plain\">( bookID, newStatus, checkoutDate, checkoutMember, newReturnDate ){</code></div><div class=\"line number33 index32 alt2\">&nbsp;</div><div class=\"line number34 index33 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.id = bookID;</code></div><div class=\"line number35 index34 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.availability = newStatus;</code></div><div class=\"line number36 index35 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.checkoutDate = checkoutDate;</code></div><div class=\"line number37 index36 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.checkoutMember = checkoutMember;</code></div><div class=\"line number38 index37 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.dueReturnDate = newReturnDate;</code></div><div class=\"line number39 index38 alt2\">&nbsp;</div><div class=\"line number40 index39 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number41 index40 alt2\">&nbsp;</div><div class=\"line number42 index41 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">extendCheckoutPeriod: </code><code class=\"js keyword\">function</code><code class=\"js plain\">( bookID, newReturnDate ){</code></div><div class=\"line number43 index42 alt2\">&nbsp;</div><div class=\"line number44 index43 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.id = bookID;</code></div><div class=\"line number45 index44 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.dueReturnDate = newReturnDate;</code></div><div class=\"line number46 index45 alt1\">&nbsp;</div><div class=\"line number47 index46 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number48 index47 alt1\">&nbsp;</div><div class=\"line number49 index48 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">isPastDue: </code><code class=\"js keyword\">function</code><code class=\"js plain\">(bookID){</code></div><div class=\"line number50 index49 alt1\">&nbsp;</div><div class=\"line number51 index50 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">currentDate = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">Date();</code></div><div class=\"line number52 index51 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">currentDate.getTime() &gt; Date.parse( </code><code class=\"js keyword\">this</code><code class=\"js plain\">.dueReturnDate );</code></div><div class=\"line number53 index52 alt2\">&nbsp;</div><div class=\"line number54 index53 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number55 index54 alt2\"><code class=\"js plain\">};</code></div></div></td></tr></tbody></table></div></div>\n\n      <p>\n      This probably works fine initially for small collections of books, however as the library expands to include a larger inventory with multiple versions and copies of each book available, we may find the management system running slower and slower over time. Using thousands of book objects may overwhelm the available memory, but we can optimize our system using the Flyweight pattern to improve this.</p>\n      <p>\n      We can now separate our data into intrinsic and extrinsic states as follows: data relevant to the book object (<code>title</code>, <code>author</code> etc) is intrinsic whilst the checkout data (<code>checkoutMember</code>, <code>dueReturnDate</code> etc) is considered extrinsic. Effectively this means that only one Book object is required for each combination of book properties. it's still a considerable quantity of objects, but significantly fewer than we had previously.\n      </p>\n\n      <p>\n      The following single instance of our book meta-data combinations will be shared among all of the copies of a book with a particular title.\n      </p>\n\n      <div><div id=\"highlighter_461509\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js comments\">// Flyweight optimized version</code></div><div class=\"line number2 index1 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">Book = </code><code class=\"js keyword\">function</code> <code class=\"js plain\">( title, author, genre, pageCount, publisherID, ISBN ) {</code></div><div class=\"line number3 index2 alt2\">&nbsp;</div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.title = title;</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.author = author;</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.genre = genre;</code></div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.pageCount = pageCount;</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.publisherID = publisherID;</code></div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.ISBN = ISBN;</code></div><div class=\"line number10 index9 alt1\">&nbsp;</div><div class=\"line number11 index10 alt2\"><code class=\"js plain\">};</code></div></div></td></tr></tbody></table></div></div>\n\n      <p>\n      As we can see, the extrinsic states have been removed. Everything to do with library check-outs will be moved to a manager and as the object data is now segmented, a factory can be used for instantiation.\n      </p>\n\n      <h2>A Basic Factory</h2>\n\n      <p>\n      Let's now define a very basic factory. What we're going to have it do is perform a check to see if a book with a particular title has been previously created inside the system; if it has, we'll return it - if not, a new book will be created and stored so that it can be accessed later. This makes sure that we only create a single copy of each unique intrinsic piece of data:\n      </p>\n\n      <div><div id=\"highlighter_74353\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js comments\">// Book Factory singleton</code></div><div class=\"line number2 index1 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">BookFactory = (</code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">existingBooks = {}, existingBook;</code></div><div class=\"line number4 index3 alt1\">&nbsp;</div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">{</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">createBook: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">( title, author, genre, pageCount, publisherID, ISBN ) {</code></div><div class=\"line number7 index6 alt2\">&nbsp;</div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Find out if a particular book meta-data combination has been created before</code></div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// !! or (bang bang) forces a boolean to be returned</code></div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">existingBook = existingBooks[ISBN];</code></div><div class=\"line number11 index10 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">if</code> <code class=\"js plain\">( !!existingBook ) {</code></div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">existingBook;</code></div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">} </code><code class=\"js keyword\">else</code> <code class=\"js plain\">{</code></div><div class=\"line number14 index13 alt1\">&nbsp;</div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// if not, let's create a new instance of the book and store it</code></div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">book = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">Book( title, author, genre, pageCount, publisherID, ISBN );</code></div><div class=\"line number17 index16 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">existingBooks[ISBN] = book;</code></div><div class=\"line number18 index17 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">book;</code></div><div class=\"line number19 index18 alt2\">&nbsp;</div><div class=\"line number20 index19 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number21 index20 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number22 index21 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number23 index22 alt2\">&nbsp;</div><div class=\"line number24 index23 alt1\"><code class=\"js plain\">})();</code></div></div></td></tr></tbody></table></div></div>\n\n\n      <h2>Managing the extrinsic states</h2>\n\n      <p>\n      Next, we need to store the states that were removed from the Book objects somewhere - luckily a manager (which we'll be defining as a Singleton) can be used to encapsulate them. Combinations of a Book object and the library member that's checked them out will be called Book records. Our manager will be storing both and will also include checkout related logic we stripped out during our flyweight optimization of the Book class.\n      </p>\n\n      <div><div id=\"highlighter_599940\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div><div class=\"line number31 index30 alt2\">31</div><div class=\"line number32 index31 alt1\">32</div><div class=\"line number33 index32 alt2\">33</div><div class=\"line number34 index33 alt1\">34</div><div class=\"line number35 index34 alt2\">35</div><div class=\"line number36 index35 alt1\">36</div><div class=\"line number37 index36 alt2\">37</div><div class=\"line number38 index37 alt1\">38</div><div class=\"line number39 index38 alt2\">39</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js comments\">// BookRecordManager singleton</code></div><div class=\"line number2 index1 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">BookRecordManager = (</code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number3 index2 alt2\">&nbsp;</div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">bookRecordDatabase = {};</code></div><div class=\"line number5 index4 alt2\">&nbsp;</div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">{</code></div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// add a new book into the library system</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">addBookRecord: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">( id, title, author, genre, pageCount, publisherID, ISBN, checkoutDate, checkoutMember, dueReturnDate, availability ) {</code></div><div class=\"line number9 index8 alt2\">&nbsp;</div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">book = BookFactory.createBook( title, author, genre, pageCount, publisherID, ISBN );</code></div><div class=\"line number11 index10 alt2\">&nbsp;</div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">bookRecordDatabase[id] = {</code></div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">checkoutMember: checkoutMember,</code></div><div class=\"line number14 index13 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">checkoutDate: checkoutDate,</code></div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">dueReturnDate: dueReturnDate,</code></div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">availability: availability,</code></div><div class=\"line number17 index16 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">book: book</code></div><div class=\"line number18 index17 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number19 index18 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number20 index19 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">updateCheckoutStatus: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">( bookID, newStatus, checkoutDate, checkoutMember, newReturnDate ) {</code></div><div class=\"line number21 index20 alt2\">&nbsp;</div><div class=\"line number22 index21 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">record = bookRecordDatabase[bookID];</code></div><div class=\"line number23 index22 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">record.availability = newStatus;</code></div><div class=\"line number24 index23 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">record.checkoutDate = checkoutDate;</code></div><div class=\"line number25 index24 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">record.checkoutMember = checkoutMember;</code></div><div class=\"line number26 index25 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">record.dueReturnDate = newReturnDate;</code></div><div class=\"line number27 index26 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number28 index27 alt1\">&nbsp;</div><div class=\"line number29 index28 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">extendCheckoutPeriod: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">( bookID, newReturnDate ) {</code></div><div class=\"line number30 index29 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">bookRecordDatabase[bookID].dueReturnDate = newReturnDate;</code></div><div class=\"line number31 index30 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number32 index31 alt1\">&nbsp;</div><div class=\"line number33 index32 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">isPastDue: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">( bookID ) {</code></div><div class=\"line number34 index33 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">currentDate = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">Date();</code></div><div class=\"line number35 index34 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">currentDate.getTime() &gt; Date.parse( bookRecordDatabase[bookID].dueReturnDate );</code></div><div class=\"line number36 index35 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number37 index36 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number38 index37 alt1\">&nbsp;</div><div class=\"line number39 index38 alt2\"><code class=\"js plain\">})();</code></div></div></td></tr></tbody></table></div></div>\n\n\n      <p>\n      The result of these changes is that all of the data that's been extracted from the Book <em>class</em> is now being stored in an attribute of the BookManager singleton (BookDatabase) - something considerably more efficient than the large number of objects we were previously using. Methods related to book checkouts are also now based here as they deal with data that's extrinsic rather than intrinsic.</p>\n\n      <p>\n      This process does add a little complexity to our final solution, however it's a small concern when compared to the performance issues that have been tackled. Data wise, if we have 30 copies of the same book, we are now only storing it once. Also, every function takes up memory. With the flyweight pattern these functions exist in one place (on the manager) and not on every object, thus saving on memory use. For the above-mentioned flyweight unoptimized version we store just link to the function object as we used Book constructor's prototype but if it was implemented in other way, functions would be created for every book instance.</p>\n\n      <p></p>\n\n\n\n\n      <h2>The Flyweight pattern and the DOM</h2>\n\n      <p>The DOM (Document Object Model) supports two approaches that allow objects to detect events - either top down (event capture) or bottom up (event bubbling).</p>\n\n      <p>In event capture, the event is first captured by the outer-most element and propagated to the inner-most element. In event bubbling, the event is captured and given to the inner-most element and then propagated to the outer-elements.</p>\n\n\n      <p>One of the best metaphors for describing Flyweights in this context was written by Gary Chisholm and it goes a little like this:</p>\n\n      <p></p><blockquote>Try to think of the flyweight in terms of a pond. A fish opens its mouth (the event), bubbles rise to the surface (the bubbling) a fly sitting on the top flies away when the bubble reaches the surface (the action). In this example we can easily transpose the fish opening its mouth to a button being clicked, the bubbles as the bubbling effect and the fly flying away to some function being run</blockquote><p></p>\n\n      <p>Bubbling was introduced to handle situations where a single event (e.g a click) may be handled by multiple event handlers defined at different levels of the DOM hierarchy. Where this happens, event bubbling executes event handlers defined for specific elements at the lowest level possible. From there on, the event bubbles up to containing elements before going to those even higher up.</p>\n\n      <p>Flyweights can be used to tweak the event bubbling process further, as we will see shortly. </p>\n\n      <h3>Example 1: Centralized event handling</h3>\n      <p>\n      For our first practical example, imagine we have a number of similar elements in a document with similar behavior executed when a user-action (e.g click, mouse-over) is performed against them.\n      </p>\n      <p>\n      Normally what we do when constructing our own accordion component, menu or other list-based widget is bind a click event to each link element in the parent container (e.g <code>$('ul li a').on(..)</code>. Instead of binding the click to multiple elements, we can easily attach a Flyweight to the top of our container which can listen for events coming from below. These can then be handled using logic that is as simple or complex as required.\n      </p>\n      <p>\n      As the types of components mentioned often have the same repeating markup for each section (e.g. each section of an accordion), there's a good chance the behavior of each element that may be clicked is going to be quite similar and relative to similar classes nearby. We'll use this information to construct a very basic accordion using the Flyweight below.\n      </p>\n      <p>\n      A stateManager namespace is used here to encapsulate our flyweight logic whilst jQuery is used to bind the initial click to a container div. In order to ensure that no other logic on the page is attaching similar handles to the container, an unbind event is first applied.\n      </p>\n      <p>\n      Now to establish exactly what child element in the container is clicked, we make use of a <code>target</code> check which provides a reference to the element that was clicked, regardless of its parent. We then use this information to handle the click event without actually needing to bind the event to specific children when our page loads.\n      </p>\n\n      <strong>HTML</strong>\n      <div><div id=\"highlighter_52399\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js plain\">&lt;div id=</code><code class=\"js string\">\"container\"</code><code class=\"js plain\">&gt;</code></div><div class=\"line number2 index1 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;div </code><code class=\"js keyword\">class</code><code class=\"js plain\">=</code><code class=\"js string\">\"toggle\"</code> <code class=\"js plain\">href=</code><code class=\"js string\">\"#\"</code><code class=\"js plain\">&gt;More Info (Address)</code></div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;span </code><code class=\"js keyword\">class</code><code class=\"js plain\">=</code><code class=\"js string\">\"info\"</code><code class=\"js plain\">&gt;</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">This is more information</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;/span&gt;&lt;/div&gt;</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;div </code><code class=\"js keyword\">class</code><code class=\"js plain\">=</code><code class=\"js string\">\"toggle\"</code> <code class=\"js plain\">href=</code><code class=\"js string\">\"#\"</code><code class=\"js plain\">&gt;Even More Info (Map)</code></div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;span </code><code class=\"js keyword\">class</code><code class=\"js plain\">=</code><code class=\"js string\">\"info\"</code><code class=\"js plain\">&gt;</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;iframe src=</code><code class=\"js string\">\"<a href=\"http://www.map-generator.net/extmap.php?name=London&amp;amp;address=london%2C%20england&amp;amp;width=500...gt;\">http://www.map-generator.net/extmap.php?name=London&amp;amp;address=london%2C%20england&amp;amp;width=500...gt;</a>\"</code><code class=\"js plain\">&lt;/iframe&gt;</code></div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;/span&gt;</code></div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;/div&gt;</code></div><div class=\"line number11 index10 alt2\"><code class=\"js plain\">&lt;/div&gt;</code></div></div></td></tr></tbody></table></div></div>\n\n      <strong>JavaScript</strong>\n\n      <div><div id=\"highlighter_829171\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">stateManager = {</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">fly: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number4 index3 alt1\">&nbsp;</div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">self = </code><code class=\"js keyword\">this</code><code class=\"js plain\">;</code></div><div class=\"line number6 index5 alt1\">&nbsp;</div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">$( </code><code class=\"js string\">\"#container\"</code> <code class=\"js plain\">)</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">.unbind()</code></div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">.on( </code><code class=\"js string\">\"click\"</code><code class=\"js plain\">, </code><code class=\"js string\">\"div.toggle\"</code><code class=\"js plain\">, </code><code class=\"js keyword\">function</code> <code class=\"js plain\">( e ) {</code></div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">self.handleClick( e.target );</code></div><div class=\"line number11 index10 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">});</code></div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number13 index12 alt2\">&nbsp;</div><div class=\"line number14 index13 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">handleClick: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">( elem ) {</code></div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">$( elem ).find( </code><code class=\"js string\">\"span\"</code> <code class=\"js plain\">).toggle( </code><code class=\"js string\">\"slow\"</code> <code class=\"js plain\">);</code></div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number17 index16 alt2\"><code class=\"js plain\">};</code></div></div></td></tr></tbody></table></div></div>\n\n      <p>\n      The benefit here is that we're converting many independent actions into a shared ones (potentially saving on memory).\n      </p>\n\n      <h3>Example 2: Using the Flyweight for performance optimization</h3>\n\n      <p>In our second example, we'll reference some further performance gains that can be achieved using Flyweights with jQuery.</p>\n\n      <p>\n      James Padolsey previously wrote an article called <em>76 bytes for faster jQuery</em> where he reminded us that each time jQuery fires off a callback, regardless of type (filter, each, event handler), we're able to access the function's context (the DOM element related to it) via the <code>this</code> keyword.</p>\n\n      <p>\n      Unfortunately, many of us have become used to the idea of wrapping <code>this</code> in <code>$()</code> or <code>jQuery()</code>, which means that a new instance of jQuery is unnecessarily constructed every time, rather than simply doing this:</p>\n\n      <div><div id=\"highlighter_271180\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js plain\">$(</code><code class=\"js string\">\"div\"</code><code class=\"js plain\">).on( </code><code class=\"js string\">\"click\"</code><code class=\"js plain\">, </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number2 index1 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js string\">\"You clicked: \"</code> <code class=\"js plain\">+ $( </code><code class=\"js keyword\">this</code> <code class=\"js plain\">).attr( </code><code class=\"js string\">\"id\"</code> <code class=\"js plain\">));</code></div><div class=\"line number3 index2 alt2\"><code class=\"js plain\">});</code></div><div class=\"line number4 index3 alt1\">&nbsp;</div><div class=\"line number5 index4 alt2\"><code class=\"js comments\">// we should avoid using the DOM element to create a</code></div><div class=\"line number6 index5 alt1\"><code class=\"js comments\">// jQuery object (with the overhead that comes with it)</code></div><div class=\"line number7 index6 alt2\"><code class=\"js comments\">// and just use the DOM element itself like this:</code></div><div class=\"line number8 index7 alt1\">&nbsp;</div><div class=\"line number9 index8 alt2\"><code class=\"js plain\">$( </code><code class=\"js string\">\"div\"</code> <code class=\"js plain\">).on( </code><code class=\"js string\">\"click\"</code><code class=\"js plain\">, </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js string\">\"You clicked:\"</code>&nbsp; <code class=\"js plain\">+ </code><code class=\"js keyword\">this</code><code class=\"js plain\">.id );</code></div><div class=\"line number11 index10 alt2\"><code class=\"js plain\">});</code></div></div></td></tr></tbody></table></div></div>\n\n      <p>James had wanted to use jQuery's <code>jQuery.text</code> in the following context, however he disagreed with the notion that a new jQuery object had to be created on each iteration:</p>\n\n      <div><div id=\"highlighter_263703\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js plain\">$( </code><code class=\"js string\">\"a\"</code> <code class=\"js plain\">).map( </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number2 index1 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">$( </code><code class=\"js keyword\">this</code> <code class=\"js plain\">).text();</code></div><div class=\"line number3 index2 alt2\"><code class=\"js plain\">});</code></div></div></td></tr></tbody></table></div></div>\n\n      <p>Now with respect to redundant wrapping, where possible with jQuery's utility methods, it's better to use <code>jQuery.methodName</code> (e.g <code>jQuery.text</code>) as opposed to <code>jQuery.fn.methodName</code> (e.g <code>jQuery.fn.text</code>) where methodName represents a utility such as <code>each()</code> or <code>text</code>. This avoids the need to call a further level of abstraction or construct a new jQuery object each time our function is called as as <code>jQuery.methodName</code> is what the library itself uses at a lower-level to power <code>jQuery.fn.methodName</code>.\n\n        </p><p>Because however not all of jQuery's methods have corresponding single-node functions, Padolsey devised the idea of a jQuery.single utility.</p>\n\n      <p>\n      The idea here is that a single jQuery object is created and used for each call to jQuery.single (effectively meaning only one jQuery object is ever created). The implementation for this can be found below and as we're consolidating data for multiple possible objects into a more central singular structure, it is technically also a Flyweight.</p>\n\n      <div><div id=\"highlighter_683236\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js plain\">jQuery.single = (</code><code class=\"js keyword\">function</code><code class=\"js plain\">( o ){</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">collection = jQuery([1]);</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js keyword\">function</code><code class=\"js plain\">( element ) {</code></div><div class=\"line number5 index4 alt2\">&nbsp;</div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Give collection the element:</code></div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">collection[0] = element;</code></div><div class=\"line number8 index7 alt1\">&nbsp;</div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Return the collection:</code></div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">collection;</code></div><div class=\"line number11 index10 alt2\">&nbsp;</div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number13 index12 alt2\"><code class=\"js plain\">})();</code></div></div></td></tr></tbody></table></div></div>\n\n      <p>\n      An example of this in action with chaining is:\n      </p>\n      <div><div id=\"highlighter_888854\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js plain\">$( </code><code class=\"js string\">\"div\"</code> <code class=\"js plain\">).on( </code><code class=\"js string\">\"click\"</code><code class=\"js plain\">, </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">html = jQuery.single( </code><code class=\"js keyword\">this</code> <code class=\"js plain\">).next().html();</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( html );</code></div><div class=\"line number5 index4 alt2\">&nbsp;</div><div class=\"line number6 index5 alt1\"><code class=\"js plain\">});</code></div></div></td></tr></tbody></table></div></div>\n\n      <p>\n      Note: Although we may believe that simply caching our jQuery code may offer just as equivalent performance gains, Padolsey claims that $.single() is still worth using and can perform better. That's not to say don't apply any caching at all, just be mindful that this approach can assist. For further details about $.single, I recommend reading Padolsey's full post.</p>",
      "pattern": "The Flyweight Pattern"
    },
    "-L6a2wNUGrXIL_DURmvu": {
      "description": " <p>\n        In the section on the Observer pattern, we were introduced to a way of channeling multiple event sources through a single object. This is also known as Publish/Subscribe or Event Aggregation. It's common for developers to think of Mediators when faced with this problem, so let's explore how they differ.\n        </p>\n\n        <p>\n        The dictionary refers to a mediator as <i>a neutral party that assists in negotiations and conflict resolution</i>. In our world, a mediator is a behavioral design pattern that allows us to expose a unified interface through which the different parts of a system may communicate.</p>\n\n        <p>If it appears a system has too many direct relationships between components, it may be time to have a central point of control that components communicate through instead. The Mediator promotes loose coupling by ensuring that instead of components referring to each other explicitly, their interaction is handled through this central point. This can help us decouple systems and improve the potential for component reusability.\n        </p>\n        <p>\n        A real-world analogy could be a typical airport traffic control system. A tower (Mediator) handles what planes can take off and land because all communications (notifications being listened out for or broadcast) are done from the planes to the control tower, rather than from plane-to-plane. A centralized controller is key to the success of this system and that's really the role a Mediator plays in software design.</p>\n\n        <p>Another analogy would be DOM event bubbling and event delegation. If all subscriptions in a system are made against the document rather than individual nodes, the document effectively serves as a Mediator. Instead of binding to the events of the individual nodes, a higher level object is given the responsibility of notifying subscribers about interaction events.</p>\n\n\n        <p>When it comes to the Mediator and Event Aggregator patterns, there are some times where it may look like the patterns are interchangeable due to implementation similarities. However, the semantics and intent of these patterns are very different.</p>\n\n        <p>And even if the implementations both use some of the same core constructs, I believe there is a distinct difference between them. I also believe they should not be interchanged or confused in communication because of the differences.</p>\n\n        <p><strong>A Simple Mediator</strong></p>\n\n        <p>A Mediator is an object that coordinates interactions (logic and behavior) between multiple objects. It makes decisions on when to call which objects, based on the actions (or inaction) of other objects and input.</p>\n\n        <p>You can write a mediator using a single line of code:</p>\n\n        <div><div id=\"highlighter_217971\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">mediator = {};</code></div></div></td></tr></tbody></table></div></div>\n\n        <p>Yes, of course this is just an object literal in JavaScript. Once again, we’re talking about semantics here. The purpose of the mediator is to control the workflow between objects and we really don’t need anything more than an object literal to do this.</p>\n\n        <div><div id=\"highlighter_354236\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">orgChart = {</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">addNewEmployee: </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number4 index3 alt1\">&nbsp;</div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// getEmployeeDetail provides a view that users interact with</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">employeeDetail = </code><code class=\"js keyword\">this</code><code class=\"js plain\">.getEmployeeDetail();</code></div><div class=\"line number7 index6 alt2\">&nbsp;</div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// when the employee detail is complete, the mediator (the 'orgchart' object)</code></div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// decides what should happen next</code></div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">employeeDetail.on(</code><code class=\"js string\">\"complete\"</code><code class=\"js plain\">, </code><code class=\"js keyword\">function</code><code class=\"js plain\">(employee){</code></div><div class=\"line number11 index10 alt2\">&nbsp;</div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// set up additional objects that have additional events, which are used</code></div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// by the mediator to do additional things</code></div><div class=\"line number14 index13 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">managerSelector = </code><code class=\"js keyword\">this</code><code class=\"js plain\">.selectManager(employee);</code></div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">managerSelector.on(</code><code class=\"js string\">\"save\"</code><code class=\"js plain\">, </code><code class=\"js keyword\">function</code><code class=\"js plain\">(employee){</code></div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">employee.save();</code></div><div class=\"line number17 index16 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">});</code></div><div class=\"line number18 index17 alt1\">&nbsp;</div><div class=\"line number19 index18 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">});</code></div><div class=\"line number20 index19 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number21 index20 alt2\">&nbsp;</div><div class=\"line number22 index21 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// ...</code></div><div class=\"line number23 index22 alt2\"><code class=\"js plain\">}</code></div></div></td></tr></tbody></table></div></div>\n\n        <p>This example shows a very basic implementation of a mediator object with some utility methods that can trigger and subscribe to events.</p>\n\n        <p>I’ve often referred to this type of object as a “workflow” object in the past, but the truth is that it is a mediator. It is an object that handles the workflow between many other objects, aggregating the responsibility of that workflow knowledge into a single object. The result is workflow that is easier to understand and maintain.</p>\n\n        <h5>Similarities And Differences</h5>\n\n        <p>There are, without a doubt, similarities between the event aggregator and mediator examples that I’ve shown here. The similarities boil down to two primary items: events and third-party objects. These differences are superficial at best, though. When we dig into the intent of the pattern and see that the implementations can be dramatically different, the nature of the patterns become more apparent.</p>\n\n        <h6>Events</h6>\n\n        <p>Both the event aggregator and mediator use events, in the above examples. An event aggregator obviously deals with events – it’s in the name after all. The mediator only uses events because it makes life easy when dealing with modern JavaScript webapp frameworks. There is nothing that says a mediator must be built with events. You can build a mediator with callback methods, by handing the mediator reference to the child object, or by any of a number of other means.</p>\n\n        <p>The difference, then, is why these two patterns are both using events. The event aggregator, as a pattern, is designed to deal with events. The mediator, though, only uses them because it’s convenient.</p>\n\n        <h6>Third-Party Objects</h6>\n\n        <p>Both the event aggregator and mediator, by design, use a third-party object to facilitate things. The event aggregator itself is a third-party to the event publisher and the event subscriber. It acts as a central hub for events to pass through. The mediator is also a third party to other objects, though. So where is the difference? Why don’t we call an event aggregator a mediator? The answer largely comes down to where the application logic and workflow is coded.</p>\n\n        <p>In the case of an event aggregator, the third party object is there only to facilitate the pass-through of events from an unknown number of sources to an unknown number of handlers. All workflow and business logic that needs to be kicked off is put directly into the object that triggers the events and the objects that handle the events.</p>\n\n        <p>In the case of the mediator, though, the business logic and workflow is aggregated into the mediator itself. The mediator decides when an object should have its methods called and attributes updated based on factors that the mediator knows about. It encapsulates the workflow and process, coordinating multiple objects to produce the desired system behaviour. The individual objects involved in this workflow each know how to perform their own task. But it’s the mediator that tells the objects when to perform the tasks by making decisions at a higher level than the individual objects.</p>\n\n        <p>An event aggregator facilitates a “fire and forget” model of communication. The object triggering the event doesn’t care if there are any subscribers. It just fires the event and moves on. A mediator, though, might use events to make decisions, but it is definitely not “fire and forget”. A mediator pays attention to a known set of input or activities so that it can facilitate and coordinate additional behavior with a known set of actors (objects).</p>\n\n        <h5>Relationships: When To Use Which</h5>\n\n        <p>Understanding the similarities and differences between an event aggregator and mediator is important for semantic reasons. It’s equally as important to understand when to use which pattern, though. The basic semantics and intent of the patterns does inform the question of when, but actual experience in using the patterns will help you understand the more subtle points and nuanced decisions that have to be made.</p>\n\n        <h6>Event Aggregator Use</h6>\n\n        <p>In general, an event aggregator is used when you either have too many objects to listen to directly, or you have objects that are entirely unrelated.</p>\n\n        <p>When two objects have a direct relationship already – say, a parent view and child view – there may be benefit in using an event aggregator. Have the child view trigger an event and the parent view can handle the event. In JavaScript framework terms, this is most commonly seen in Backbone’s Collection and Model, where all Model events are bubbled up to and through its parent Collection. A Collection often uses model events to modify the state of itself or other models. Handling “selected” items in a collection is a good example of this.</p>\n\n        <p>jQuery’s on method as an event aggregator is a great example of too many objects to listen to. If you have 10, 20 or 200 DOM elements that can trigger a “click” event, it might be a bad idea to set up a listener on all of them individually. This could quickly deteriorate performance of the application and user experience. Instead, using jQuery’s on method allows us to aggregate all of the events and reduce the overhead of 10, 20, or 200 event handlers down to 1.</p>\n\n        <p>Indirect relationships are also a great time to use event aggregators. In modern applications, it is very common to have multiple view objects that need to communicate, but have no direct relationship. For example, a menu system might have a view that handles the menu item clicks. But we don’t want the menu to be directly tied to the content views that show all of the details and information when a menu item is clicked. Having the content and menu coupled together would make the code very difficult to maintain, in the long run. Instead, we can use an event aggregator to trigger “menu:click:foo” events, and have a “foo” object handle the click event to show its content on the screen.</p>\n\n        <h6>Mediator Use</h6>\n\n        <p>A mediator is best applied when two or more objects have an indirect working relationship, and business logic or workflow needs to dictate the interactions and coordination of these objects.</p>\n\n        <p>A wizard interface is a good example of this, as shown with the “orgChart” example, above. There are multiple views that facilitate the entire workflow of the wizard. Rather than tightly coupling the view together by having them reference each other directly, we can decouple them and more explicitly model the workflow between them by introducing a mediator.</p>\n\n        <p>The mediator extracts the workflow from the implementation details and creates a more natural abstraction at a higher level, showing us at a much faster glance what that workflow is. We no longer have to dig into the details of each view in the workflow, to see what the workflow actually is.</p>\n\n        <h5>Event Aggregator (Pub/Sub) And Mediator Together</h5>\n\n        <p>The crux of the difference between an event aggregator and a mediator, and why these pattern names should not be interchanged with each other, is illustrated best by showing how they can be used together. The menu example for an event aggregator is the perfect place to introduce a mediator as well.</p>\n\n        <p>Clicking a menu item may trigger a series of changes throughout an application. Some of these changes will be independent of others, and using an event aggregator for this makes sense. Some of these changes may be internally related to each other, though, and may use a mediator to enact those changes.</p>\n\n        <p>A mediator, then, could be set up to listen to the event aggregator. It could run its logic and process to facilitate and coordinate many objects that are related to each other, but unrelated to the original event source.</p>\n\n        <div><div id=\"highlighter_159501\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">MenuItem = MyFrameworkView.extend({</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">events: {</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js string\">\"click .thatThing\"</code><code class=\"js plain\">: </code><code class=\"js string\">\"clickedIt\"</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number6 index5 alt1\">&nbsp;</div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">clickedIt: </code><code class=\"js keyword\">function</code><code class=\"js plain\">(e){</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">e.preventDefault();</code></div><div class=\"line number9 index8 alt2\">&nbsp;</div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// assume this triggers \"menu:click:foo\"</code></div><div class=\"line number11 index10 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">MyFramework.trigger(</code><code class=\"js string\">\"menu:click:\"</code> <code class=\"js plain\">+ </code><code class=\"js keyword\">this</code><code class=\"js plain\">.model.get(</code><code class=\"js string\">\"name\"</code><code class=\"js plain\">));</code></div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number13 index12 alt2\">&nbsp;</div><div class=\"line number14 index13 alt1\"><code class=\"js plain\">});</code></div><div class=\"line number15 index14 alt2\">&nbsp;</div><div class=\"line number16 index15 alt1\"><code class=\"js comments\">// ... somewhere else in the app</code></div><div class=\"line number17 index16 alt2\">&nbsp;</div><div class=\"line number18 index17 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">MyWorkflow = </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number19 index18 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">MyFramework.on(</code><code class=\"js string\">\"menu:click:foo\"</code><code class=\"js plain\">, </code><code class=\"js keyword\">this</code><code class=\"js plain\">.doStuff, </code><code class=\"js keyword\">this</code><code class=\"js plain\">);</code></div><div class=\"line number20 index19 alt1\"><code class=\"js plain\">};</code></div><div class=\"line number21 index20 alt2\">&nbsp;</div><div class=\"line number22 index21 alt1\"><code class=\"js plain\">MyWorkflow.prototype.doStuff = </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number23 index22 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// instantiate multiple objects here.</code></div><div class=\"line number24 index23 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// set up event handlers for those objects.</code></div><div class=\"line number25 index24 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// coordinate all of the objects into a meaningful workflow.</code></div><div class=\"line number26 index25 alt1\"><code class=\"js plain\">};</code></div></div></td></tr></tbody></table></div></div>\n\n        <p>In this example, when the MenuItem with the right model is clicked, the <code>“menu:click:foo”</code> event will be triggered. An instance of the “MyWorkflow” object, assuming one is already instantiated, will handle this specific event and will coordinate all of the objects that it knows about, to create the desired user experience and workflow.</p>\n\n        <p>An event aggregator and a mediator have been combined to create a much more meaningful experience in both the code and the application itself. We now have a clean separation between the menu and the workflow through an event aggregator and we are still keeping the workflow itself clean and maintainable through the use of a mediator.</p>\n\n        <p>\n        </p><h3 id=\"advantagesanddisadvantages\">\n          <a href=\"#advantagesanddisadvantages\" class=\"subhead-link\">#</a>\n          Advantages &amp; Disadvantages\n        </h3>\n\n        <p>The largest benefit of the Mediator pattern is that it reduces the communication channels needed between objects or components in a system from many to many to just many to one. Adding new publishers and subscribers is relatively easy due to the level of decoupling present.</p>\n\n        <p>\n        Perhaps the biggest downside of using the pattern is that it can introduce a single point of failure. Placing a Mediator between modules can also cause a performance hit as they are always communicating indirectly. Because of the nature of loose coupling, it's difficult to establish how a system might react by only looking at the broadcasts.</p>\n\n        <p>That said, it's useful to remind ourselves that decoupled systems have a number of other benefits - if our modules communicated with each other directly, changes to modules (e.g another module throwing an exception) could easily have a domino effect on the rest of our application. This problem is less of a concern with decoupled systems.</p>\n\n        <p>At the end of the day, tight coupling causes all kinds of headaches and this is just another alternative solution, but one which can work very well if implemented correctly.</p>\n\n        <p></p>\n\n        <h3 id=\"mediatorvsfacade\">\n          <a href=\"#mediatorvsfacade\" class=\"subhead-link\">#</a>\n          Mediator Vs. Facade\n        </h3>\n\n        <p>We will be covering the Facade pattern shortly, but for reference purposes some developers may also wonder whether there are similarities between the Mediator and Facade patterns. They do both abstract the functionality of existing modules, but there are some subtle differences.</p>\n\n        <p>\n        The Mediator centralizes communication between modules where it's explicitly referenced by these modules. In a sense this is multidirectional. The Facade however just defines a simpler interface to a module or system but doesn't add any additional functionality. Other modules in the system aren't directly aware of the concept of a facade and could be considered unidirectional.\n        </p>\n\n        <p>\n         </p>",
      "pattern": " The Mediator Pattern"
    },
    "-L6a34JiZxn_dYZgaHur": {
      "description": "  <p>In traditional programming languages such as C++ and Lisp, Mixins are classes which offer functionality that can be easily inherited by a sub-class or group of sub-classes for the purpose of function re-use.</p>\n\n\n        <h2>Sub-classing</h2>\n\n        <p>For developers unfamiliar with sub-classing, we will go through a brief beginners primer on them before diving into Mixins and Decorators further.</p>\n\n        <p><em>Sub-classing</em> is a term that refers to inheriting properties for a new object from a base or <em>superclass</em> object. In traditional object-oriented programming, a class <code>B</code> is able to extend another class <code>A</code>. Here we consider <code>A</code> a superclass and <code>B</code> a subclass of <code>A</code>. As such, all instances of <code>B</code> inherit the methods from <code>A</code>. <code>B</code> is however still able to define its own methods, including those that override methods originally defined by <code>A</code>.</p>\n\n        <p>Should <code>B</code> need to invoke a method in <code>A</code> that has been overridden, we refer to this as method chaining. Should <code>B</code> need to invoke the constructor <code>A</code> (the superclass), we call this constructor chaining.</p>\n\n        <p>In order to demonstrate sub-classing, we first need a base object that can have new instances of itself created. let's model this around the concept of a person.</p>\n\n        <div><div id=\"highlighter_887741\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">Person = </code><code class=\"js keyword\">function</code><code class=\"js plain\">( firstName, lastName ){</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.firstName = firstName;</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.lastName = lastName;</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.gender = </code><code class=\"js string\">\"male\"</code><code class=\"js plain\">;</code></div><div class=\"line number6 index5 alt1\">&nbsp;</div><div class=\"line number7 index6 alt2\"><code class=\"js plain\">};</code></div></div></td></tr></tbody></table></div></div>\n\n        <p>Next, we'll want to specify a new class (object) that's a subclass of the existing <code>Person</code> object. Let us imagine we want to add distinct properties to distinguish a <code>Person</code> from a <code>Superhero</code> whilst inheriting the properties of the <code>Person</code> \"superclass\". As superheroes share many common traits with normal people (e.g. name, gender), this should hopefully illustrate how sub-classing works adequately.</p>\n\n        <div><div id=\"highlighter_35300\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js comments\">// a new instance of Person can then easily be created as follows:</code></div><div class=\"line number2 index1 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">clark = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">Person( </code><code class=\"js string\">\"Clark\"</code><code class=\"js plain\">, </code><code class=\"js string\">\"Kent\"</code> <code class=\"js plain\">);</code></div><div class=\"line number3 index2 alt2\">&nbsp;</div><div class=\"line number4 index3 alt1\"><code class=\"js comments\">// Define a subclass constructor for for \"Superhero\":</code></div><div class=\"line number5 index4 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">Superhero = </code><code class=\"js keyword\">function</code><code class=\"js plain\">( firstName, lastName, powers ){</code></div><div class=\"line number6 index5 alt1\">&nbsp;</div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Invoke the superclass constructor on the new object</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// then use .call() to invoke the constructor as a method of</code></div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// the object to be initialized.</code></div><div class=\"line number10 index9 alt1\">&nbsp;</div><div class=\"line number11 index10 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">Person.call( </code><code class=\"js keyword\">this</code><code class=\"js plain\">, firstName, lastName );</code></div><div class=\"line number12 index11 alt1\">&nbsp;</div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Finally, store their powers, a new array of traits not found in a normal \"Person\"</code></div><div class=\"line number14 index13 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.powers = powers;</code></div><div class=\"line number15 index14 alt2\"><code class=\"js plain\">};</code></div><div class=\"line number16 index15 alt1\">&nbsp;</div><div class=\"line number17 index16 alt2\"><code class=\"js plain\">Superhero.prototype = Object.create( Person.prototype );</code></div><div class=\"line number18 index17 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">superman = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">Superhero( </code><code class=\"js string\">\"Clark\"</code><code class=\"js plain\">, </code><code class=\"js string\">\"Kent\"</code><code class=\"js plain\">, [</code><code class=\"js string\">\"flight\"</code><code class=\"js plain\">,</code><code class=\"js string\">\"heat-vision\"</code><code class=\"js plain\">] );</code></div><div class=\"line number19 index18 alt2\"><code class=\"js plain\">console.log( superman );</code></div><div class=\"line number20 index19 alt1\">&nbsp;</div><div class=\"line number21 index20 alt2\"><code class=\"js comments\">// Outputs Person attributes as well as powers</code></div></div></td></tr></tbody></table></div></div>\n\n        <p>The <code>Superhero</code> constructor creates an object which descends from <code>Person</code>. Objects of this type have attributes of the objects that are above it in the chain and if we had set default values in the <code>Person</code> object, <code>Superhero</code> is capable of overriding any inherited values with values specific to it's object.</p>\n\n        <h2>Mixins</h2>\n\n        <p>In JavaScript, we can look at inheriting from Mixins as a means of collecting functionality through extension. Each new object we define has a prototype from which it can inherit further properties. Prototypes can inherit from other object prototypes but, even more importantly, can define properties for any number of object instances. We can leverage this fact to promote function re-use.</p>\n\n        <p>Mixins allow objects to borrow (or inherit) functionality from them with a minimal amount of complexity. As the pattern works well with JavaScripts object prototypes, it gives us a fairly flexible way to share functionality from not just one Mixin, but effectively many through multiple inheritance.</p>\n\n        <p>They can be viewed as objects with attributes and methods that can be easily shared across a number of other object prototypes. Imagine that we define a Mixin containing utility functions in a standard object literal as follows:</p>\n\n        <div><div id=\"highlighter_817712\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">myMixins = {</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">moveUp: </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js string\">\"move up\"</code> <code class=\"js plain\">);</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number6 index5 alt1\">&nbsp;</div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">moveDown: </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js string\">\"move down\"</code> <code class=\"js plain\">);</code></div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number10 index9 alt1\">&nbsp;</div><div class=\"line number11 index10 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">stop: </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js string\">\"stop! in the name of love!\"</code> <code class=\"js plain\">);</code></div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number14 index13 alt1\">&nbsp;</div><div class=\"line number15 index14 alt2\"><code class=\"js plain\">};</code></div></div></td></tr></tbody></table></div></div>\n\n        <p>We can then easily extend the prototype of existing constructor functions to include this behavior using a helper such as the Underscore.js <code>_.extend()</code> method:</p>\n\n        <div><div id=\"highlighter_639443\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js comments\">// A skeleton carAnimator constructor</code></div><div class=\"line number2 index1 alt1\"><code class=\"js keyword\">function</code> <code class=\"js plain\">CarAnimator(){</code></div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.moveLeft = </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js string\">\"move left\"</code> <code class=\"js plain\">);</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number6 index5 alt1\"><code class=\"js plain\">}</code></div><div class=\"line number7 index6 alt2\">&nbsp;</div><div class=\"line number8 index7 alt1\"><code class=\"js comments\">// A skeleton personAnimator constructor</code></div><div class=\"line number9 index8 alt2\"><code class=\"js keyword\">function</code> <code class=\"js plain\">PersonAnimator(){</code></div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.moveRandomly = </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){ </code><code class=\"js comments\">/*..*/</code> <code class=\"js plain\">};</code></div><div class=\"line number11 index10 alt2\"><code class=\"js plain\">}</code></div><div class=\"line number12 index11 alt1\">&nbsp;</div><div class=\"line number13 index12 alt2\"><code class=\"js comments\">// Extend both constructors with our Mixin</code></div><div class=\"line number14 index13 alt1\"><code class=\"js plain\">_.extend( CarAnimator.prototype, myMixins );</code></div><div class=\"line number15 index14 alt2\"><code class=\"js plain\">_.extend( PersonAnimator.prototype, myMixins );</code></div><div class=\"line number16 index15 alt1\">&nbsp;</div><div class=\"line number17 index16 alt2\"><code class=\"js comments\">// Create a new instance of carAnimator</code></div><div class=\"line number18 index17 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">myAnimator = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">CarAnimator();</code></div><div class=\"line number19 index18 alt2\"><code class=\"js plain\">myAnimator.moveLeft();</code></div><div class=\"line number20 index19 alt1\"><code class=\"js plain\">myAnimator.moveDown();</code></div><div class=\"line number21 index20 alt2\"><code class=\"js plain\">myAnimator.stop();</code></div><div class=\"line number22 index21 alt1\">&nbsp;</div><div class=\"line number23 index22 alt2\"><code class=\"js comments\">// Outputs:</code></div><div class=\"line number24 index23 alt1\"><code class=\"js comments\">// move left</code></div><div class=\"line number25 index24 alt2\"><code class=\"js comments\">// move down</code></div><div class=\"line number26 index25 alt1\"><code class=\"js comments\">// stop! in the name of love!</code></div></div></td></tr></tbody></table></div></div>\n\n        <p>As we can see, this allows us to easily \"mix\" in common behaviour into object constructors fairly trivially. </p>\n\n        <p>In the next example, we have two constructors: a Car and a Mixin. What we're going to do is augment (another way of saying extend) the Car so that it can inherit specific methods defined in the Mixin, namely <code>driveForward()</code> and <code>driveBackward()</code>. This time we won't be using Underscore.js.</p>\n\n        <p>Instead, this example will demonstrate how to augment a constructor to include functionality without the need to duplicate this process for every constructor function we may have.</p>\n\n        <p>\n        </p><div><div id=\"highlighter_424038\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div><div class=\"line number31 index30 alt2\">31</div><div class=\"line number32 index31 alt1\">32</div><div class=\"line number33 index32 alt2\">33</div><div class=\"line number34 index33 alt1\">34</div><div class=\"line number35 index34 alt2\">35</div><div class=\"line number36 index35 alt1\">36</div><div class=\"line number37 index36 alt2\">37</div><div class=\"line number38 index37 alt1\">38</div><div class=\"line number39 index38 alt2\">39</div><div class=\"line number40 index39 alt1\">40</div><div class=\"line number41 index40 alt2\">41</div><div class=\"line number42 index41 alt1\">42</div><div class=\"line number43 index42 alt2\">43</div><div class=\"line number44 index43 alt1\">44</div><div class=\"line number45 index44 alt2\">45</div><div class=\"line number46 index45 alt1\">46</div><div class=\"line number47 index46 alt2\">47</div><div class=\"line number48 index47 alt1\">48</div><div class=\"line number49 index48 alt2\">49</div><div class=\"line number50 index49 alt1\">50</div><div class=\"line number51 index50 alt2\">51</div><div class=\"line number52 index51 alt1\">52</div><div class=\"line number53 index52 alt2\">53</div><div class=\"line number54 index53 alt1\">54</div><div class=\"line number55 index54 alt2\">55</div><div class=\"line number56 index55 alt1\">56</div><div class=\"line number57 index56 alt2\">57</div><div class=\"line number58 index57 alt1\">58</div><div class=\"line number59 index58 alt2\">59</div><div class=\"line number60 index59 alt1\">60</div><div class=\"line number61 index60 alt2\">61</div><div class=\"line number62 index61 alt1\">62</div><div class=\"line number63 index62 alt2\">63</div><div class=\"line number64 index63 alt1\">64</div><div class=\"line number65 index64 alt2\">65</div><div class=\"line number66 index65 alt1\">66</div><div class=\"line number67 index66 alt2\">67</div><div class=\"line number68 index67 alt1\">68</div><div class=\"line number69 index68 alt2\">69</div><div class=\"line number70 index69 alt1\">70</div><div class=\"line number71 index70 alt2\">71</div><div class=\"line number72 index71 alt1\">72</div><div class=\"line number73 index72 alt2\">73</div><div class=\"line number74 index73 alt1\">74</div><div class=\"line number75 index74 alt2\">75</div><div class=\"line number76 index75 alt1\">76</div><div class=\"line number77 index76 alt2\">77</div><div class=\"line number78 index77 alt1\">78</div><div class=\"line number79 index78 alt2\">79</div><div class=\"line number80 index79 alt1\">80</div><div class=\"line number81 index80 alt2\">81</div><div class=\"line number82 index81 alt1\">82</div><div class=\"line number83 index82 alt2\">83</div><div class=\"line number84 index83 alt1\">84</div><div class=\"line number85 index84 alt2\">85</div><div class=\"line number86 index85 alt1\">86</div><div class=\"line number87 index86 alt2\">87</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js comments\">// Define a simple Car constructor</code></div><div class=\"line number2 index1 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">Car = </code><code class=\"js keyword\">function</code> <code class=\"js plain\">( settings ) {</code></div><div class=\"line number3 index2 alt2\">&nbsp;</div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.model = settings.model || </code><code class=\"js string\">\"no model provided\"</code><code class=\"js plain\">;</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.color = settings.color || </code><code class=\"js string\">\"no colour provided\"</code><code class=\"js plain\">;</code></div><div class=\"line number6 index5 alt1\">&nbsp;</div><div class=\"line number7 index6 alt2\"><code class=\"js plain\">};</code></div><div class=\"line number8 index7 alt1\">&nbsp;</div><div class=\"line number9 index8 alt2\"><code class=\"js comments\">// Mixin</code></div><div class=\"line number10 index9 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">Mixin = </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {};</code></div><div class=\"line number11 index10 alt2\">&nbsp;</div><div class=\"line number12 index11 alt1\"><code class=\"js plain\">Mixin.prototype = {</code></div><div class=\"line number13 index12 alt2\">&nbsp;</div><div class=\"line number14 index13 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">driveForward: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js string\">\"drive forward\"</code> <code class=\"js plain\">);</code></div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number17 index16 alt2\">&nbsp;</div><div class=\"line number18 index17 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">driveBackward: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number19 index18 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js string\">\"drive backward\"</code> <code class=\"js plain\">);</code></div><div class=\"line number20 index19 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number21 index20 alt2\">&nbsp;</div><div class=\"line number22 index21 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">driveSideways: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number23 index22 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js string\">\"drive sideways\"</code> <code class=\"js plain\">);</code></div><div class=\"line number24 index23 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number25 index24 alt2\">&nbsp;</div><div class=\"line number26 index25 alt1\"><code class=\"js plain\">};</code></div><div class=\"line number27 index26 alt2\">&nbsp;</div><div class=\"line number28 index27 alt1\">&nbsp;</div><div class=\"line number29 index28 alt2\"><code class=\"js comments\">// Extend an existing object with a method from another</code></div><div class=\"line number30 index29 alt1\"><code class=\"js keyword\">function</code> <code class=\"js plain\">augment( receivingClass, givingClass ) {</code></div><div class=\"line number31 index30 alt2\">&nbsp;</div><div class=\"line number32 index31 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// only provide certain methods</code></div><div class=\"line number33 index32 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">if</code> <code class=\"js plain\">( arguments[2] ) {</code></div><div class=\"line number34 index33 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">for</code> <code class=\"js plain\">( </code><code class=\"js keyword\">var</code> <code class=\"js plain\">i = 2, len = arguments.length; i &lt; len; i++ ) {</code></div><div class=\"line number35 index34 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">receivingClass.prototype[arguments[i]] = givingClass.prototype[arguments[i]];</code></div><div class=\"line number36 index35 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number37 index36 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number38 index37 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// provide all methods</code></div><div class=\"line number39 index38 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">else</code> <code class=\"js plain\">{</code></div><div class=\"line number40 index39 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">for</code> <code class=\"js plain\">( </code><code class=\"js keyword\">var</code> <code class=\"js plain\">methodName </code><code class=\"js keyword\">in</code> <code class=\"js plain\">givingClass.prototype ) {</code></div><div class=\"line number41 index40 alt2\">&nbsp;</div><div class=\"line number42 index41 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// check to make sure the receiving class doesn't</code></div><div class=\"line number43 index42 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// have a method of the same name as the one currently</code></div><div class=\"line number44 index43 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// being processed</code></div><div class=\"line number45 index44 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">if</code> <code class=\"js plain\">( !Object.hasOwnProperty.call(receivingClass.prototype, methodName) ) {</code></div><div class=\"line number46 index45 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">receivingClass.prototype[methodName] = givingClass.prototype[methodName];</code></div><div class=\"line number47 index46 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number48 index47 alt1\">&nbsp;</div><div class=\"line number49 index48 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Alternatively (check prototype chain as well):</code></div><div class=\"line number50 index49 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// if ( !receivingClass.prototype[methodName] ) {</code></div><div class=\"line number51 index50 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// receivingClass.prototype[methodName] = givingClass.prototype[methodName];</code></div><div class=\"line number52 index51 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// }</code></div><div class=\"line number53 index52 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number54 index53 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number55 index54 alt2\"><code class=\"js plain\">}</code></div><div class=\"line number56 index55 alt1\">&nbsp;</div><div class=\"line number57 index56 alt2\">&nbsp;</div><div class=\"line number58 index57 alt1\"><code class=\"js comments\">// Augment the Car constructor to include \"driveForward\" and \"driveBackward\"</code></div><div class=\"line number59 index58 alt2\"><code class=\"js plain\">augment( Car, Mixin, </code><code class=\"js string\">\"driveForward\"</code><code class=\"js plain\">, </code><code class=\"js string\">\"driveBackward\"</code> <code class=\"js plain\">);</code></div><div class=\"line number60 index59 alt1\">&nbsp;</div><div class=\"line number61 index60 alt2\"><code class=\"js comments\">// Create a new Car</code></div><div class=\"line number62 index61 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">myCar = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">Car({</code></div><div class=\"line number63 index62 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">model: </code><code class=\"js string\">\"Ford Escort\"</code><code class=\"js plain\">,</code></div><div class=\"line number64 index63 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">color: </code><code class=\"js string\">\"blue\"</code></div><div class=\"line number65 index64 alt2\"><code class=\"js plain\">});</code></div><div class=\"line number66 index65 alt1\">&nbsp;</div><div class=\"line number67 index66 alt2\"><code class=\"js comments\">// Test to make sure we now have access to the methods</code></div><div class=\"line number68 index67 alt1\"><code class=\"js plain\">myCar.driveForward();</code></div><div class=\"line number69 index68 alt2\"><code class=\"js plain\">myCar.driveBackward();</code></div><div class=\"line number70 index69 alt1\">&nbsp;</div><div class=\"line number71 index70 alt2\"><code class=\"js comments\">// Outputs:</code></div><div class=\"line number72 index71 alt1\"><code class=\"js comments\">// drive forward</code></div><div class=\"line number73 index72 alt2\"><code class=\"js comments\">// drive backward</code></div><div class=\"line number74 index73 alt1\">&nbsp;</div><div class=\"line number75 index74 alt2\"><code class=\"js comments\">// We can also augment Car to include all functions from our mixin</code></div><div class=\"line number76 index75 alt1\"><code class=\"js comments\">// by not explicitly listing a selection of them</code></div><div class=\"line number77 index76 alt2\"><code class=\"js plain\">augment( Car, Mixin );</code></div><div class=\"line number78 index77 alt1\">&nbsp;</div><div class=\"line number79 index78 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">mySportsCar = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">Car({</code></div><div class=\"line number80 index79 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">model: </code><code class=\"js string\">\"Porsche\"</code><code class=\"js plain\">,</code></div><div class=\"line number81 index80 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">color: </code><code class=\"js string\">\"red\"</code></div><div class=\"line number82 index81 alt1\"><code class=\"js plain\">});</code></div><div class=\"line number83 index82 alt2\">&nbsp;</div><div class=\"line number84 index83 alt1\"><code class=\"js plain\">mySportsCar.driveSideways();</code></div><div class=\"line number85 index84 alt2\">&nbsp;</div><div class=\"line number86 index85 alt1\"><code class=\"js comments\">// Outputs:</code></div><div class=\"line number87 index86 alt2\"><code class=\"js comments\">// drive sideways</code></div></div></td></tr></tbody></table></div></div>\n        <p></p>\n\n        <h3>Advantages &amp; Disadvantages</h3>\n\n        <p>Mixins assist in decreasing functional repetition and increasing function re-use in a system. Where an application is likely to require shared behaviour across object instances, we can easily avoid any duplication by maintaining this shared functionality in a Mixin and thus focusing on implementing only the functionality in our system which is truly distinct.</p>\n\n        <p>That said, the downsides to Mixins are a little more debatable. Some developers feel that injecting functionality into an object prototype is a bad idea as it leads to both prototype pollution and a level of uncertainty regarding the origin of our functions. In large systems this may well be the case.</p>\n\n        <p>I would argue that strong documentation can assist in minimizing the amount of confusion regarding the source of mixed in functions, but as with every pattern, if care is taken during implementation we should be okay.</p>\n\n",
      "pattern": "The Mixin Pattern"
    },
    "-L6a3EwLIGutoXhBmjSj": {
      "description": " <h2 id=\"detailmodule\">Modules</h2>\n\n    <p>\n    Modules are an integral piece of any robust application's architecture and typically help in keeping the units of code for a project both cleanly separated and organized.</p>\n\n    <p>In JavaScript, there are several options for implementing modules. These include:</p>\n    <ul>\n      <li>The Module pattern</li>\n      <li>Object literal notation</li>\n      <li>AMD modules</li>\n      <li>CommonJS modules</li>\n      <li>ECMAScript Harmony modules</li>\n    </ul>\n\n    <p>We will be exploring the latter three of these options later on in the book in the section <em>Modern Modular JavaScript Design Patterns</em>.</p>\n\n    <p>The Module pattern is based in part on object literals and so it makes sense to refresh our knowledge of them first.</p>\n\n    <h3>Object Literals</h3>\n\n    <p>In object literal notation, an object is described as a set of comma-separated name/value pairs enclosed in curly braces (<code>{}</code>). Names inside the object may be either strings or identifiers that are followed by a colon. There should be no comma used after the final name/value pair in the object as this may result in errors.</p>\n    <p>\n\n    </p><div><div id=\"highlighter_547451\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">myObjectLiteral = {</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">variableKey: variableValue,</code></div><div class=\"line number4 index3 alt1\">&nbsp;</div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">functionKey: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// ...</code></div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number8 index7 alt1\"><code class=\"js plain\">};</code></div></div></td></tr></tbody></table></div></div>\n\n    <p>\n    Object literals don't require instantiation using the <code>new</code> operator but shouldn't be used at the start of a statement as the opening <code>{</code> may be interpreted as the beginning of a block. Outside of an object, new members may be added to it using assignment as follows <code>myModule.property = \"someValue\";</code>\n    </p>\n\n    <p>Below we can see a more complete example of a module defined using object literal notation:</p>\n\n    <p>\n    </p><div><div id=\"highlighter_62003\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div><div class=\"line number31 index30 alt2\">31</div><div class=\"line number32 index31 alt1\">32</div><div class=\"line number33 index32 alt2\">33</div><div class=\"line number34 index33 alt1\">34</div><div class=\"line number35 index34 alt2\">35</div><div class=\"line number36 index35 alt1\">36</div><div class=\"line number37 index36 alt2\">37</div><div class=\"line number38 index37 alt1\">38</div><div class=\"line number39 index38 alt2\">39</div><div class=\"line number40 index39 alt1\">40</div><div class=\"line number41 index40 alt2\">41</div><div class=\"line number42 index41 alt1\">42</div><div class=\"line number43 index42 alt2\">43</div><div class=\"line number44 index43 alt1\">44</div><div class=\"line number45 index44 alt2\">45</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">myModule = {</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">myProperty: </code><code class=\"js string\">\"someValue\"</code><code class=\"js plain\">,</code></div><div class=\"line number4 index3 alt1\">&nbsp;</div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// object literals can contain properties and methods.</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// e.g we can define a further object for module configuration:</code></div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">myConfig: {</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">useCaching: </code><code class=\"js keyword\">true</code><code class=\"js plain\">,</code></div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">language: </code><code class=\"js string\">\"en\"</code></div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number11 index10 alt2\">&nbsp;</div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// a very basic method</code></div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">saySomething: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number14 index13 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js string\">\"Where in the world is Paul Irish today?\"</code> <code class=\"js plain\">);</code></div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number16 index15 alt1\">&nbsp;</div><div class=\"line number17 index16 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// output a value based on the current configuration</code></div><div class=\"line number18 index17 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">reportMyConfig: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number19 index18 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js string\">\"Caching is: \"</code> <code class=\"js plain\">+ ( </code><code class=\"js keyword\">this</code><code class=\"js plain\">.myConfig.useCaching ? </code><code class=\"js string\">\"enabled\"</code> <code class=\"js plain\">: </code><code class=\"js string\">\"disabled\"</code><code class=\"js plain\">) );</code></div><div class=\"line number20 index19 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number21 index20 alt2\">&nbsp;</div><div class=\"line number22 index21 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// override the current configuration</code></div><div class=\"line number23 index22 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">updateMyConfig: </code><code class=\"js keyword\">function</code><code class=\"js plain\">( newConfig ) {</code></div><div class=\"line number24 index23 alt1\">&nbsp;</div><div class=\"line number25 index24 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">if</code> <code class=\"js plain\">( </code><code class=\"js keyword\">typeof</code> <code class=\"js plain\">newConfig === </code><code class=\"js string\">\"object\"</code> <code class=\"js plain\">) {</code></div><div class=\"line number26 index25 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.myConfig = newConfig;</code></div><div class=\"line number27 index26 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js keyword\">this</code><code class=\"js plain\">.myConfig.language );</code></div><div class=\"line number28 index27 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number29 index28 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number30 index29 alt1\"><code class=\"js plain\">};</code></div><div class=\"line number31 index30 alt2\">&nbsp;</div><div class=\"line number32 index31 alt1\"><code class=\"js comments\">// Outputs: Where in the world is Paul Irish today?</code></div><div class=\"line number33 index32 alt2\"><code class=\"js plain\">myModule.saySomething();</code></div><div class=\"line number34 index33 alt1\">&nbsp;</div><div class=\"line number35 index34 alt2\"><code class=\"js comments\">// Outputs: Caching is: enabled</code></div><div class=\"line number36 index35 alt1\"><code class=\"js plain\">myModule.reportMyConfig();</code></div><div class=\"line number37 index36 alt2\">&nbsp;</div><div class=\"line number38 index37 alt1\"><code class=\"js comments\">// Outputs: fr</code></div><div class=\"line number39 index38 alt2\"><code class=\"js plain\">myModule.updateMyConfig({</code></div><div class=\"line number40 index39 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">language: </code><code class=\"js string\">\"fr\"</code><code class=\"js plain\">,</code></div><div class=\"line number41 index40 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">useCaching: </code><code class=\"js keyword\">false</code></div><div class=\"line number42 index41 alt1\"><code class=\"js plain\">});</code></div><div class=\"line number43 index42 alt2\">&nbsp;</div><div class=\"line number44 index43 alt1\"><code class=\"js comments\">// Outputs: Caching is: disabled</code></div><div class=\"line number45 index44 alt2\"><code class=\"js plain\">myModule.reportMyConfig();</code></div></div></td></tr></tbody></table></div></div>\n    <p></p>\n\n    <p>Using object literals can assist in encapsulating and organizing your code and Rebecca Murphey has previously written about this topic in <a href=\"http://rmurphey.com/blog/2009/10/15/using-objects-to-organize-your-code/\">depth</a> should you wish to read into object literals further.</p>\n\n    <p>That said, if we're opting for this technique, we may be equally as interested in the Module pattern. It still uses object literals but only as the return value from a scoping function. </p>\n\n    <h3>The Module Pattern</h3>\n\n    <p>The Module pattern was originally defined as a way to provide both private and public encapsulation for classes in conventional software engineering.</p>\n\n    <p>\n    In JavaScript, the Module pattern is used to further <em>emulate</em> the concept of classes in such a way that we're able to include both public/private methods and variables inside a single object, thus shielding particular parts from the global scope. What this results in is a reduction in the likelihood of our function names conflicting with other functions defined in additional scripts on the page.</p>\n\n    <h4>Privacy</h4>\n    <p>\n    The Module pattern encapsulates \"privacy\", state and organization using closures. It provides a way of wrapping a mix of public and private methods and variables, protecting pieces from leaking into the global scope and accidentally colliding with another developer's interface. With this pattern, only a public API is returned, keeping everything else within the closure private. </p>\n\n    <p>\n    This gives us a clean solution for shielding logic doing the heavy lifting whilst only exposing an interface we wish other parts of our application to use. The pattern utilizes an immediately-invoked function expression (<a href=\"http://benalman.com/news/2010/11/immediately-invoked-function-expression/\">IIFE</a> - see the section on namespacing patterns for more on this) where an object is returned. </p>\n\n    <p>\n    It should be noted that there isn't really an explicitly true sense of \"privacy\" inside JavaScript because unlike some traditional languages, it doesn't have access modifiers. Variables can't technically be declared as being public nor private and so we use function scope to simulate this concept. Within the Module pattern, variables or methods declared are only available inside the module itself thanks to closure. Variables or methods defined within the returning object however are available to everyone.\n    </p>\n\n    <h4>History</h4>\n\n    <p>\n    From a historical perspective, the Module pattern was originally developed by a number of people including <a href=\"http://groups.google.com/group/comp.lang.javascript/msg/9f58bd11bd67d937\">Richard Cornford</a> in 2003. It was later popularized by Douglas Crockford in his lectures. Another piece of trivia is that if you've ever played with Yahoo's YUI library, some of its features may appear quite familiar and the reason for this is that the Module pattern was a strong influence for YUI when creating their components.\n    </p>\n\n    <h4>Examples</h4>\n\n    <p> Let's begin looking at an implementation of the Module pattern by creating a module which is self-contained.</p>\n    <p>\n    </p><div><div id=\"highlighter_374359\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">testModule = (</code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">counter = 0;</code></div><div class=\"line number4 index3 alt1\">&nbsp;</div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">{</code></div><div class=\"line number6 index5 alt1\">&nbsp;</div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">incrementCounter: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">counter++;</code></div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number10 index9 alt1\">&nbsp;</div><div class=\"line number11 index10 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">resetCounter: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js string\">\"counter value prior to reset: \"</code> <code class=\"js plain\">+ counter );</code></div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">counter = 0;</code></div><div class=\"line number14 index13 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number16 index15 alt1\">&nbsp;</div><div class=\"line number17 index16 alt2\"><code class=\"js plain\">})();</code></div><div class=\"line number18 index17 alt1\">&nbsp;</div><div class=\"line number19 index18 alt2\"><code class=\"js comments\">// Usage:</code></div><div class=\"line number20 index19 alt1\">&nbsp;</div><div class=\"line number21 index20 alt2\"><code class=\"js comments\">// Increment our counter</code></div><div class=\"line number22 index21 alt1\"><code class=\"js plain\">testModule.incrementCounter();</code></div><div class=\"line number23 index22 alt2\">&nbsp;</div><div class=\"line number24 index23 alt1\"><code class=\"js comments\">// Check the counter value and reset</code></div><div class=\"line number25 index24 alt2\"><code class=\"js comments\">// Outputs: counter value prior to reset: 1</code></div><div class=\"line number26 index25 alt1\"><code class=\"js plain\">testModule.resetCounter();</code></div></div></td></tr></tbody></table></div></div>\n    <p></p>\n\n    <p>Here, other parts of the code are unable to directly read the value of our <code>incrementCounter()</code> or <code>resetCounter()</code>. The counter variable is actually fully shielded from our global scope so it acts just like a private variable would - its existence is limited to within the module's closure so that the only code able to access its scope are our two functions. Our methods are effectively namespaced so in the test section of our code, we need to prefix any calls with the name of the module (e.g. \"testModule\").\n    </p>\n\n    <p>When working with the Module pattern, we may find it useful to define a simple template that we use for getting started with it. Here's one that covers namespacing, public and private variables:\n    </p>\n    <p>\n    </p><div><div id=\"highlighter_598100\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">myNamespace = (</code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">myPrivateVar, myPrivateMethod;</code></div><div class=\"line number4 index3 alt1\">&nbsp;</div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// A private counter variable</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">myPrivateVar = 0;</code></div><div class=\"line number7 index6 alt2\">&nbsp;</div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// A private function which logs any arguments</code></div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">myPrivateMethod = </code><code class=\"js keyword\">function</code><code class=\"js plain\">( foo ) {</code></div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( foo );</code></div><div class=\"line number11 index10 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number12 index11 alt1\">&nbsp;</div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">{</code></div><div class=\"line number14 index13 alt1\">&nbsp;</div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// A public variable</code></div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">myPublicVar: </code><code class=\"js string\">\"foo\"</code><code class=\"js plain\">,</code></div><div class=\"line number17 index16 alt2\">&nbsp;</div><div class=\"line number18 index17 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// A public function utilizing privates</code></div><div class=\"line number19 index18 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">myPublicFunction: </code><code class=\"js keyword\">function</code><code class=\"js plain\">( bar ) {</code></div><div class=\"line number20 index19 alt1\">&nbsp;</div><div class=\"line number21 index20 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Increment our private counter</code></div><div class=\"line number22 index21 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">myPrivateVar++;</code></div><div class=\"line number23 index22 alt2\">&nbsp;</div><div class=\"line number24 index23 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Call our private method using bar</code></div><div class=\"line number25 index24 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">myPrivateMethod( bar );</code></div><div class=\"line number26 index25 alt1\">&nbsp;</div><div class=\"line number27 index26 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number28 index27 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number29 index28 alt2\">&nbsp;</div><div class=\"line number30 index29 alt1\"><code class=\"js plain\">})();</code></div></div></td></tr></tbody></table></div></div>\n    <p></p>\n\n    <p>\n    Looking at another example, below we can see a shopping basket implemented using this pattern. The module itself is completely self-contained in a global variable called <code>basketModule</code>. The <code>basket</code> array in the module is kept private and so other parts of our application are unable to directly read it. It only exists with the module's closure and so the only methods able to access it are those with access to its scope (i.e. <code>addItem()</code>, <code>getItemCount()</code> etc). </p>\n\n    <div><div id=\"highlighter_342844\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div><div class=\"line number31 index30 alt2\">31</div><div class=\"line number32 index31 alt1\">32</div><div class=\"line number33 index32 alt2\">33</div><div class=\"line number34 index33 alt1\">34</div><div class=\"line number35 index34 alt2\">35</div><div class=\"line number36 index35 alt1\">36</div><div class=\"line number37 index36 alt2\">37</div><div class=\"line number38 index37 alt1\">38</div><div class=\"line number39 index38 alt2\">39</div><div class=\"line number40 index39 alt1\">40</div><div class=\"line number41 index40 alt2\">41</div><div class=\"line number42 index41 alt1\">42</div><div class=\"line number43 index42 alt2\">43</div><div class=\"line number44 index43 alt1\">44</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">basketModule = (</code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// privates</code></div><div class=\"line number4 index3 alt1\">&nbsp;</div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">basket = [];</code></div><div class=\"line number6 index5 alt1\">&nbsp;</div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">function</code> <code class=\"js plain\">doSomethingPrivate() {</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">//...</code></div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number10 index9 alt1\">&nbsp;</div><div class=\"line number11 index10 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">function</code> <code class=\"js plain\">doSomethingElsePrivate() {</code></div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">//...</code></div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number14 index13 alt1\">&nbsp;</div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// Return an object exposed to the public</code></div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">{</code></div><div class=\"line number17 index16 alt2\">&nbsp;</div><div class=\"line number18 index17 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Add items to our basket</code></div><div class=\"line number19 index18 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">addItem: </code><code class=\"js keyword\">function</code><code class=\"js plain\">( values ) {</code></div><div class=\"line number20 index19 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">basket.push(values);</code></div><div class=\"line number21 index20 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number22 index21 alt1\">&nbsp;</div><div class=\"line number23 index22 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Get the count of items in the basket</code></div><div class=\"line number24 index23 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">getItemCount: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number25 index24 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">basket.length;</code></div><div class=\"line number26 index25 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number27 index26 alt2\">&nbsp;</div><div class=\"line number28 index27 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Public alias to a private function</code></div><div class=\"line number29 index28 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">doSomething: doSomethingPrivate,</code></div><div class=\"line number30 index29 alt1\">&nbsp;</div><div class=\"line number31 index30 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Get the total value of items in the basket</code></div><div class=\"line number32 index31 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">getTotal: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number33 index32 alt2\">&nbsp;</div><div class=\"line number34 index33 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">q = </code><code class=\"js keyword\">this</code><code class=\"js plain\">.getItemCount(),</code></div><div class=\"line number35 index34 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">p = 0;</code></div><div class=\"line number36 index35 alt1\">&nbsp;</div><div class=\"line number37 index36 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">while</code> <code class=\"js plain\">(q--) {</code></div><div class=\"line number38 index37 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">p += basket[q].price;</code></div><div class=\"line number39 index38 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number40 index39 alt1\">&nbsp;</div><div class=\"line number41 index40 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">p;</code></div><div class=\"line number42 index41 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number43 index42 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number44 index43 alt1\"><code class=\"js plain\">})();</code></div></div></td></tr></tbody></table></div></div>\n\n    <p>\n    Inside the module, you may have noticed that we return an <code>object</code>. This gets automatically assigned to <code>basketModule</code> so that we can interact with it as follows:\n    </p>\n    <div><div id=\"highlighter_596389\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js comments\">// basketModule returns an object with a public API we can use</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js plain\">basketModule.addItem({</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">item: </code><code class=\"js string\">\"bread\"</code><code class=\"js plain\">,</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">price: 0.5</code></div><div class=\"line number6 index5 alt1\"><code class=\"js plain\">});</code></div><div class=\"line number7 index6 alt2\">&nbsp;</div><div class=\"line number8 index7 alt1\"><code class=\"js plain\">basketModule.addItem({</code></div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">item: </code><code class=\"js string\">\"butter\"</code><code class=\"js plain\">,</code></div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">price: 0.3</code></div><div class=\"line number11 index10 alt2\"><code class=\"js plain\">});</code></div><div class=\"line number12 index11 alt1\">&nbsp;</div><div class=\"line number13 index12 alt2\"><code class=\"js comments\">// Outputs: 2</code></div><div class=\"line number14 index13 alt1\"><code class=\"js plain\">console.log( basketModule.getItemCount() );</code></div><div class=\"line number15 index14 alt2\">&nbsp;</div><div class=\"line number16 index15 alt1\"><code class=\"js comments\">// Outputs: 0.8</code></div><div class=\"line number17 index16 alt2\"><code class=\"js plain\">console.log( basketModule.getTotal() );</code></div><div class=\"line number18 index17 alt1\">&nbsp;</div><div class=\"line number19 index18 alt2\"><code class=\"js comments\">// However, the following will not work:</code></div><div class=\"line number20 index19 alt1\">&nbsp;</div><div class=\"line number21 index20 alt2\"><code class=\"js comments\">// Outputs: undefined</code></div><div class=\"line number22 index21 alt1\"><code class=\"js comments\">// This is because the basket itself is not exposed as a part of our</code></div><div class=\"line number23 index22 alt2\"><code class=\"js comments\">// public API</code></div><div class=\"line number24 index23 alt1\"><code class=\"js plain\">console.log( basketModule.basket );</code></div><div class=\"line number25 index24 alt2\">&nbsp;</div><div class=\"line number26 index25 alt1\"><code class=\"js comments\">// This also won't work as it only exists within the scope of our</code></div><div class=\"line number27 index26 alt2\"><code class=\"js comments\">// basketModule closure, but not in the returned public object</code></div><div class=\"line number28 index27 alt1\"><code class=\"js plain\">console.log( basket );</code></div></div></td></tr></tbody></table></div></div>\n    <p>\n    The methods above are effectively namespaced inside <code>basketModule</code>.</p>\n\n    <p>Notice how the scoping function in the above basket module is wrapped around all of our functions, which we then call and immediately store the return value of. This has a number of advantages including:</p>\n\n    <ul>\n      <li>The freedom to have private functions and private members which can only be consumed by our module. As they aren't exposed to the rest of the page (only our exported API is), they're considered truly private.</li>\n      <li>Given that functions are declared normally and are named, it can be easier to show call stacks in a debugger when we're attempting to discover what function(s) threw an exception.</li>\n      <li>As T.J Crowder has pointed out in the past, it also enables us to return different functions depending on the environment. In the past, I've seen developers use this to perform UA testing in order to provide a code-path in their module specific to IE, but we can easily opt for feature detection these days to achieve a similar goal.</li>\n    </ul>\n\n\n\n\n\n    <h4>Module Pattern Variations</h4>\n\n    <strong>Import mixins</strong>\n    <p>This variation of the pattern demonstrates how globals (e.g jQuery, Underscore) can be passed in as arguments to our module's anonymous function. This effectively allows us to <em>import</em> them and locally alias them as we wish.</p>\n\n    <div><div id=\"highlighter_520559\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js comments\">// Global module</code></div><div class=\"line number2 index1 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">myModule = (</code><code class=\"js keyword\">function</code> <code class=\"js plain\">( jQ, _ ) {</code></div><div class=\"line number3 index2 alt2\">&nbsp;</div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">function</code> <code class=\"js plain\">privateMethod1(){</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">jQ(</code><code class=\"js string\">\".container\"</code><code class=\"js plain\">).html(</code><code class=\"js string\">\"test\"</code><code class=\"js plain\">);</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number7 index6 alt2\">&nbsp;</div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">function</code> <code class=\"js plain\">privateMethod2(){</code></div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( _.min([10, 5, 100, 2, 1000]) );</code></div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number11 index10 alt2\">&nbsp;</div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code><code class=\"js plain\">{</code></div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">publicMethod: </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number14 index13 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">privateMethod1();</code></div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number17 index16 alt2\">&nbsp;</div><div class=\"line number18 index17 alt1\"><code class=\"js comments\">// Pull in jQuery and Underscore</code></div><div class=\"line number19 index18 alt2\"><code class=\"js plain\">})( jQuery, _ );</code></div><div class=\"line number20 index19 alt1\">&nbsp;</div><div class=\"line number21 index20 alt2\"><code class=\"js plain\">myModule.publicMethod();</code></div></div></td></tr></tbody></table></div></div>\n\n    <strong>Exports</strong>\n    <p>This next variation allows us to declare globals without consuming them and could similarly support the concept of global imports seen in the last example.</p>\n\n    <div><div id=\"highlighter_523301\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js comments\">// Global module</code></div><div class=\"line number2 index1 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">myModule = (</code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number3 index2 alt2\">&nbsp;</div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// Module object</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">module = {},</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">privateVariable = </code><code class=\"js string\">\"Hello World\"</code><code class=\"js plain\">;</code></div><div class=\"line number7 index6 alt2\">&nbsp;</div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">function</code> <code class=\"js plain\">privateMethod() {</code></div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// ...</code></div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number11 index10 alt2\">&nbsp;</div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">module.publicProperty = </code><code class=\"js string\">\"Foobar\"</code><code class=\"js plain\">;</code></div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">module.publicMethod = </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number14 index13 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( privateVariable );</code></div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number16 index15 alt1\">&nbsp;</div><div class=\"line number17 index16 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">module;</code></div><div class=\"line number18 index17 alt1\">&nbsp;</div><div class=\"line number19 index18 alt2\"><code class=\"js plain\">})();</code></div></div></td></tr></tbody></table></div></div>\n\n\n    <h4>\n    Toolkit And Framework-specific Module Pattern Implementations\n    </h4>\n    <p>\n    <strong>Dojo</strong>\n    </p><p>\n    Dojo provides a convenience method for working with objects called <code>dojo.setObject()</code>. This takes as its first argument a dot-separated string such as <code>myObj.parent.child</code> which refers to a property called \"child\" within an object \"parent\" defined inside \"myObj\". Using <code>setObject()</code> allows us to set the value of children, creating any of the intermediate objects in the rest of the path passed if they don't already exist.</p>\n\n    <p>For example, if we wanted to declare <code>basket.core</code> as an object of the <code>store</code> namespace, this could be achieved as follows using the traditional way:\n    </p><div><div id=\"highlighter_779470\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">store = window.store || {};</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js keyword\">if</code> <code class=\"js plain\">( !store[</code><code class=\"js string\">\"basket\"</code><code class=\"js plain\">] ) {</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">store.basket = {};</code></div><div class=\"line number5 index4 alt2\"><code class=\"js plain\">}</code></div><div class=\"line number6 index5 alt1\">&nbsp;</div><div class=\"line number7 index6 alt2\"><code class=\"js keyword\">if</code> <code class=\"js plain\">( !store.basket[</code><code class=\"js string\">\"core\"</code><code class=\"js plain\">] ) {</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">store.basket.core = {};</code></div><div class=\"line number9 index8 alt2\"><code class=\"js plain\">}</code></div><div class=\"line number10 index9 alt1\">&nbsp;</div><div class=\"line number11 index10 alt2\"><code class=\"js plain\">store.basket.core = {</code></div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// ...rest of our logic</code></div><div class=\"line number13 index12 alt2\"><code class=\"js plain\">};</code></div></div></td></tr></tbody></table></div></div>\n    <p></p>\n    <p>Or as follows using Dojo 1.7 (AMD-compatible version) and above:</p>\n    <div><div id=\"highlighter_622447\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js plain\">require([</code><code class=\"js string\">\"dojo/_base/customStore\"</code><code class=\"js plain\">], </code><code class=\"js keyword\">function</code><code class=\"js plain\">( store ){</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// using dojo.setObject()</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">store.setObject( </code><code class=\"js string\">\"basket.core\"</code><code class=\"js plain\">, (</code><code class=\"js keyword\">function</code><code class=\"js plain\">() {</code></div><div class=\"line number5 index4 alt2\">&nbsp;</div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">basket = [];</code></div><div class=\"line number7 index6 alt2\">&nbsp;</div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">function</code> <code class=\"js plain\">privateMethod() {</code></div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log(basket);</code></div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number11 index10 alt2\">&nbsp;</div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">{</code></div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">publicMethod: </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number14 index13 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">privateMethod();</code></div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number17 index16 alt2\">&nbsp;</div><div class=\"line number18 index17 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">})());</code></div><div class=\"line number19 index18 alt2\">&nbsp;</div><div class=\"line number20 index19 alt1\"><code class=\"js plain\">});</code></div></div></td></tr></tbody></table></div></div>\n\n    <p>For more information on <code>dojo.setObject()</code>, see the official <a href=\"http://dojotoolkit.org/reference-guide/1.7/dojo/setObject.html\">documentation</a>.</p>\n\n    <p><strong>ExtJS</strong></p>\n    <p>For those using Sencha's ExtJS, an example demonstrating how to correctly use the Module pattern with the framework can be found below.</p>\n\n    <p>Here, we see an example of how to define a namespace which can then be populated with a module containing both a private and public API. With the exception of some semantic differences, it's quite close to how the Module pattern is implemented in vanilla JavaScript: </p>\n    <div><div id=\"highlighter_118852\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div><div class=\"line number31 index30 alt2\">31</div><div class=\"line number32 index31 alt1\">32</div><div class=\"line number33 index32 alt2\">33</div><div class=\"line number34 index33 alt1\">34</div><div class=\"line number35 index34 alt2\">35</div><div class=\"line number36 index35 alt1\">36</div><div class=\"line number37 index36 alt2\">37</div><div class=\"line number38 index37 alt1\">38</div><div class=\"line number39 index38 alt2\">39</div><div class=\"line number40 index39 alt1\">40</div><div class=\"line number41 index40 alt2\">41</div><div class=\"line number42 index41 alt1\">42</div><div class=\"line number43 index42 alt2\">43</div><div class=\"line number44 index43 alt1\">44</div><div class=\"line number45 index44 alt2\">45</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js comments\">// create namespace</code></div><div class=\"line number2 index1 alt1\"><code class=\"js plain\">Ext.namespace(</code><code class=\"js string\">\"myNameSpace\"</code><code class=\"js plain\">);</code></div><div class=\"line number3 index2 alt2\">&nbsp;</div><div class=\"line number4 index3 alt1\"><code class=\"js comments\">// create application</code></div><div class=\"line number5 index4 alt2\"><code class=\"js plain\">myNameSpace.app = </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number6 index5 alt1\">&nbsp;</div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// do NOT access DOM from here; elements don't exist yet</code></div><div class=\"line number8 index7 alt1\">&nbsp;</div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// private variables</code></div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">btn1,</code></div><div class=\"line number11 index10 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">privVar1 = 11;</code></div><div class=\"line number12 index11 alt1\">&nbsp;</div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// private functions</code></div><div class=\"line number14 index13 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">btn1Handler = </code><code class=\"js keyword\">function</code> <code class=\"js plain\">( button, event ) {</code></div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js string\">\"privVar1=\"</code> <code class=\"js plain\">+ privVar1 );</code></div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js string\">\"this.btn1Text=\"</code> <code class=\"js plain\">+ </code><code class=\"js keyword\">this</code><code class=\"js plain\">.btn1Text );</code></div><div class=\"line number17 index16 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number18 index17 alt1\">&nbsp;</div><div class=\"line number19 index18 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// public space</code></div><div class=\"line number20 index19 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">{</code></div><div class=\"line number21 index20 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// public properties, e.g. strings to translate</code></div><div class=\"line number22 index21 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">btn1Text: </code><code class=\"js string\">\"Button 1\"</code><code class=\"js plain\">,</code></div><div class=\"line number23 index22 alt2\">&nbsp;</div><div class=\"line number24 index23 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// public methods</code></div><div class=\"line number25 index24 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">init: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number26 index25 alt1\">&nbsp;</div><div class=\"line number27 index26 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">if</code> <code class=\"js plain\">( Ext.Ext2 ) {</code></div><div class=\"line number28 index27 alt1\">&nbsp;</div><div class=\"line number29 index28 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">btn1 = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">Ext.Button({</code></div><div class=\"line number30 index29 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">renderTo: </code><code class=\"js string\">\"btn1-ct\"</code><code class=\"js plain\">,</code></div><div class=\"line number31 index30 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">text: </code><code class=\"js keyword\">this</code><code class=\"js plain\">.btn1Text,</code></div><div class=\"line number32 index31 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">handler: btn1Handler</code></div><div class=\"line number33 index32 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">});</code></div><div class=\"line number34 index33 alt1\">&nbsp;</div><div class=\"line number35 index34 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">} </code><code class=\"js keyword\">else</code> <code class=\"js plain\">{</code></div><div class=\"line number36 index35 alt1\">&nbsp;</div><div class=\"line number37 index36 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">btn1 = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">Ext.Button( </code><code class=\"js string\">\"btn1-ct\"</code><code class=\"js plain\">, {</code></div><div class=\"line number38 index37 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">text: </code><code class=\"js keyword\">this</code><code class=\"js plain\">.btn1Text,</code></div><div class=\"line number39 index38 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">handler: btn1Handler</code></div><div class=\"line number40 index39 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">});</code></div><div class=\"line number41 index40 alt2\">&nbsp;</div><div class=\"line number42 index41 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number43 index42 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number44 index43 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number45 index44 alt2\"><code class=\"js plain\">}();</code></div></div></td></tr></tbody></table></div></div>\n\n\n    <p>\n    <strong>\n    YUI\n    </strong>\n    </p>\n    <p>\n    Similarly, we can also implement the Module pattern when building applications using YUI3. The following example is heavily based on the original YUI Module pattern implementation by Eric Miraglia, but again, isn't vastly different from the vanilla JavaScript version:\n    </p>\n    <div><div id=\"highlighter_264635\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js plain\">Y.namespace( </code><code class=\"js string\">\"store.basket\"</code> <code class=\"js plain\">) ;</code></div><div class=\"line number2 index1 alt1\"><code class=\"js plain\">Y.store.basket = (</code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number3 index2 alt2\">&nbsp;</div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">myPrivateVar, myPrivateMethod;</code></div><div class=\"line number5 index4 alt2\">&nbsp;</div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// private variables:</code></div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">myPrivateVar = </code><code class=\"js string\">\"I can be accessed only within Y.store.basket.\"</code><code class=\"js plain\">;</code></div><div class=\"line number8 index7 alt1\">&nbsp;</div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// private method:</code></div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">myPrivateMethod = </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number11 index10 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">Y.log( </code><code class=\"js string\">\"I can be accessed only from within YAHOO.store.basket\"</code> <code class=\"js plain\">);</code></div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number13 index12 alt2\">&nbsp;</div><div class=\"line number14 index13 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">{</code></div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">myPublicProperty: </code><code class=\"js string\">\"I'm a public property.\"</code><code class=\"js plain\">,</code></div><div class=\"line number16 index15 alt1\">&nbsp;</div><div class=\"line number17 index16 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">myPublicMethod: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number18 index17 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">Y.log( </code><code class=\"js string\">\"I'm a public method.\"</code> <code class=\"js plain\">);</code></div><div class=\"line number19 index18 alt2\">&nbsp;</div><div class=\"line number20 index19 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Within basket, I can access \"private\" vars and methods:</code></div><div class=\"line number21 index20 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">Y.log( myPrivateVar );</code></div><div class=\"line number22 index21 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">Y.log( myPrivateMethod() );</code></div><div class=\"line number23 index22 alt2\">&nbsp;</div><div class=\"line number24 index23 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// The native scope of myPublicMethod is store so we can</code></div><div class=\"line number25 index24 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// access public members using \"this\":</code></div><div class=\"line number26 index25 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">Y.log( </code><code class=\"js keyword\">this</code><code class=\"js plain\">.myPublicProperty );</code></div><div class=\"line number27 index26 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number28 index27 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number29 index28 alt2\">&nbsp;</div><div class=\"line number30 index29 alt1\"><code class=\"js plain\">})();</code></div></div></td></tr></tbody></table></div></div>\n    <p>\n    <strong>\n    jQuery\n    </strong>\n    </p>\n    <p>\n    There are a number of ways in which jQuery code unspecific to plugins can be wrapped inside the Module pattern. Ben Cherry previously suggested an implementation where a function wrapper is used around module definitions in the event of there being a number of commonalities between modules. </p>\n    <p>\n    In the following example, a <code>library</code> function is defined which declares a new library and automatically binds up the <code>init</code> function to <code>document.ready</code> when new libraries (i.e. modules) are created.</p>\n    <div><div id=\"highlighter_759219\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">function</code> <code class=\"js plain\">library( module ) {</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">$( </code><code class=\"js keyword\">function</code><code class=\"js plain\">() {</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">if</code> <code class=\"js plain\">( module.init ) {</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">module.init();</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">});</code></div><div class=\"line number8 index7 alt1\">&nbsp;</div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">module;</code></div><div class=\"line number10 index9 alt1\"><code class=\"js plain\">}</code></div><div class=\"line number11 index10 alt2\">&nbsp;</div><div class=\"line number12 index11 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">myLibrary = library(</code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number13 index12 alt2\">&nbsp;</div><div class=\"line number14 index13 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">{</code></div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">init: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// module implementation</code></div><div class=\"line number17 index16 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number18 index17 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number19 index18 alt2\"><code class=\"js plain\">}());</code></div></div></td></tr></tbody></table></div></div>\n\n    <h4>Advantages</h4>\n\n    <p>We've seen why the Constructor pattern can be useful, but why is the Module pattern a good choice? For starters, it's a lot cleaner for developers coming from an object-oriented background than the idea of true encapsulation, at least from a JavaScript perspective.</p>\n    <p>Secondly, it supports private data - so, in the Module pattern, public parts of our code are able to touch the private parts, however the outside world is unable to touch the class's private parts (no laughing! Oh, and thanks to David Engfer for the joke).</p>\n\n    <h4>Disadvantages</h4>\n\n    <p>The disadvantages of the Module pattern are that as we access both public and private members differently, when we wish to change visibility, we actually have to make changes to each place the member was used.</p>\n    <p>We also can't access private members in methods that are added to the object at a later point. That said, in many cases the Module pattern is still quite useful and when used correctly, certainly has the potential to improve the structure of our application.</p>\n    <p>Other disadvantages include the inability to create automated unit tests for private members and additional complexity when bugs require hot fixes. It's simply not possible to patch privates. Instead, one must override all public methods which interact with the buggy privates. Developers can't easily extend privates either, so it's worth remembering privates are not as flexible as they may initially appear.</p>\n\n    <p>For further reading on the Module pattern, see Ben Cherry's excellent in-depth <a href=\"http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth\">article</a> on it.</p>",
      "pattern": " The Module Pattern"
    },
    "-L6a3O7ckc8eCcsDL-eK": {
      "description": "  <p>The Observer is a design pattern where an object (known as a subject) maintains a list of objects depending on it (observers), automatically notifying them of any changes to state.</p>\n\n        <p>When a subject needs to notify observers about something interesting happening, it broadcasts a notification to the observers (which can include specific data related to the topic of the notification).</p>\n\n        <p>When we no longer wish for a particular observer to be notified of changes by the subject they are registered with, the subject can remove them from the list of observers.</p>\n\n        <p>\n        It's often useful to refer back to published definitions of design patterns that are language agnostic to get a broader sense of their usage and advantages over time. The definition of the Observer pattern provided in the GoF book, <em>Design Patterns: Elements of Reusable Object-Oriented Software</em>, is:</p>\n\n        <p>\n        <i>\"One or more observers are interested in the state of a subject and register their interest with the subject by attaching themselves. When something changes in our subject that the observer may be interested in, a notify message is sent which calls the update method in each observer. When the observer is no longer interested in the subject's state, they can simply detach themselves.\"</i>\n        </p>\n\n        <p>We can now expand on what we've learned to implement the Observer pattern with the following components:</p>\n\n        <ul>\n          <li><strong>Subject</strong>: maintains a list of observers, facilitates adding or removing observers</li>\n          <li><strong>Observer</strong>: provides an update interface for objects that need to be notified of a Subject's changes of state</li>\n          <li><strong>ConcreteSubject</strong>: broadcasts notifications to observers on changes of state, stores the state of ConcreteObservers</li>\n          <li><strong>ConcreteObserver</strong>: stores a reference to the ConcreteSubject, implements an update interface for the Observer to ensure state is consistent with the Subject's</li>\n        </ul>\n\n        <p>First, let's model the list of dependent Observers a subject may have:</p>\n\n        <p>\n        </p><div><div id=\"highlighter_169892\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div><div class=\"line number31 index30 alt2\">31</div><div class=\"line number32 index31 alt1\">32</div><div class=\"line number33 index32 alt2\">33</div><div class=\"line number34 index33 alt1\">34</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">function</code> <code class=\"js plain\">ObserverList(){</code></div><div class=\"line number2 index1 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.observerList = [];</code></div><div class=\"line number3 index2 alt2\"><code class=\"js plain\">}</code></div><div class=\"line number4 index3 alt1\">&nbsp;</div><div class=\"line number5 index4 alt2\"><code class=\"js plain\">ObserverList.prototype.add = </code><code class=\"js keyword\">function</code><code class=\"js plain\">( obj ){</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js keyword\">this</code><code class=\"js plain\">.observerList.push( obj );</code></div><div class=\"line number7 index6 alt2\"><code class=\"js plain\">};</code></div><div class=\"line number8 index7 alt1\">&nbsp;</div><div class=\"line number9 index8 alt2\"><code class=\"js plain\">ObserverList.prototype.count = </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js keyword\">this</code><code class=\"js plain\">.observerList.length;</code></div><div class=\"line number11 index10 alt2\"><code class=\"js plain\">};</code></div><div class=\"line number12 index11 alt1\">&nbsp;</div><div class=\"line number13 index12 alt2\"><code class=\"js plain\">ObserverList.prototype.get = </code><code class=\"js keyword\">function</code><code class=\"js plain\">( index ){</code></div><div class=\"line number14 index13 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">if</code><code class=\"js plain\">( index &gt; -1 &amp;&amp; index &lt; </code><code class=\"js keyword\">this</code><code class=\"js plain\">.observerList.length ){</code></div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js keyword\">this</code><code class=\"js plain\">.observerList[ index ];</code></div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number17 index16 alt2\"><code class=\"js plain\">};</code></div><div class=\"line number18 index17 alt1\">&nbsp;</div><div class=\"line number19 index18 alt2\"><code class=\"js plain\">ObserverList.prototype.indexOf = </code><code class=\"js keyword\">function</code><code class=\"js plain\">( obj, startIndex ){</code></div><div class=\"line number20 index19 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">i = startIndex;</code></div><div class=\"line number21 index20 alt2\">&nbsp;</div><div class=\"line number22 index21 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">while</code><code class=\"js plain\">( i &lt; </code><code class=\"js keyword\">this</code><code class=\"js plain\">.observerList.length ){</code></div><div class=\"line number23 index22 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">if</code><code class=\"js plain\">( </code><code class=\"js keyword\">this</code><code class=\"js plain\">.observerList[i] === obj ){</code></div><div class=\"line number24 index23 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">i;</code></div><div class=\"line number25 index24 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number26 index25 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">i++;</code></div><div class=\"line number27 index26 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number28 index27 alt1\">&nbsp;</div><div class=\"line number29 index28 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">-1;</code></div><div class=\"line number30 index29 alt1\"><code class=\"js plain\">};</code></div><div class=\"line number31 index30 alt2\">&nbsp;</div><div class=\"line number32 index31 alt1\"><code class=\"js plain\">ObserverList.prototype.removeAt = </code><code class=\"js keyword\">function</code><code class=\"js plain\">( index ){</code></div><div class=\"line number33 index32 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.observerList.splice( index, 1 );</code></div><div class=\"line number34 index33 alt1\"><code class=\"js plain\">};</code></div></div></td></tr></tbody></table></div></div>\n        <p></p>\n\n        <p>Next, let's model the Subject and the ability to add, remove or notify observers on the observer list.</p>\n\n        <p>\n        </p><div><div id=\"highlighter_597736\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">function</code> <code class=\"js plain\">Subject(){</code></div><div class=\"line number2 index1 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.observers = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">ObserverList();</code></div><div class=\"line number3 index2 alt2\"><code class=\"js plain\">}</code></div><div class=\"line number4 index3 alt1\">&nbsp;</div><div class=\"line number5 index4 alt2\"><code class=\"js plain\">Subject.prototype.addObserver = </code><code class=\"js keyword\">function</code><code class=\"js plain\">( observer ){</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.observers.add( observer );</code></div><div class=\"line number7 index6 alt2\"><code class=\"js plain\">};</code></div><div class=\"line number8 index7 alt1\">&nbsp;</div><div class=\"line number9 index8 alt2\"><code class=\"js plain\">Subject.prototype.removeObserver = </code><code class=\"js keyword\">function</code><code class=\"js plain\">( observer ){</code></div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.observers.removeAt( </code><code class=\"js keyword\">this</code><code class=\"js plain\">.observers.indexOf( observer, 0 ) );</code></div><div class=\"line number11 index10 alt2\"><code class=\"js plain\">};</code></div><div class=\"line number12 index11 alt1\">&nbsp;</div><div class=\"line number13 index12 alt2\"><code class=\"js plain\">Subject.prototype.notify = </code><code class=\"js keyword\">function</code><code class=\"js plain\">( context ){</code></div><div class=\"line number14 index13 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">observerCount = </code><code class=\"js keyword\">this</code><code class=\"js plain\">.observers.count();</code></div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">for</code><code class=\"js plain\">(</code><code class=\"js keyword\">var</code> <code class=\"js plain\">i=0; i &lt; observerCount; i++){</code></div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.observers.get(i).update( context );</code></div><div class=\"line number17 index16 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number18 index17 alt1\"><code class=\"js plain\">};</code></div></div></td></tr></tbody></table></div></div>\n        <p></p>\n\n        <p>We then define a skeleton for creating new Observers. The <code>update</code> functionality here will be overwritten later with custom behaviour. </p>\n\n        <p>\n        </p><div><div id=\"highlighter_454033\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js comments\">// The Observer</code></div><div class=\"line number2 index1 alt1\"><code class=\"js keyword\">function</code> <code class=\"js plain\">Observer(){</code></div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.update = </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// ...</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number6 index5 alt1\"><code class=\"js plain\">}</code></div></div></td></tr></tbody></table></div></div>\n        <p></p>\n\n        <p>In our sample application using the above Observer components, we now define:</p>\n\n        <ul>\n          <li>A button for adding new observable checkboxes to the page</li>\n          <li>A control checkbox which will act as a subject, notifying other checkboxes they should be checked</li>\n          <li>A container for the new checkboxes being added</li>\n        </ul>\n\n        <p>We then define ConcreteSubject and ConcreteObserver handlers for both adding new observers to the page and implementing the updating interface. See below for inline comments on what these components do in the context of our example.</p>\n\n        <p><strong>HTML:</strong></p>\n        <p>\n        </p><div><div id=\"highlighter_743399\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js plain\">&lt;button id=</code><code class=\"js string\">\"addNewObserver\"</code><code class=\"js plain\">&gt;Add New Observer checkbox&lt;/button&gt;</code></div><div class=\"line number2 index1 alt1\"><code class=\"js plain\">&lt;input id=</code><code class=\"js string\">\"mainCheckbox\"</code> <code class=\"js plain\">type=</code><code class=\"js string\">\"checkbox\"</code><code class=\"js plain\">/&gt;</code></div><div class=\"line number3 index2 alt2\"><code class=\"js plain\">&lt;div id=</code><code class=\"js string\">\"observersContainer\"</code><code class=\"js plain\">&gt;&lt;/div&gt;</code></div></div></td></tr></tbody></table></div></div>\n        <p></p>\n        <p><strong>Sample script:</strong></p>\n        <p>\n        </p><div><div id=\"highlighter_493960\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div><div class=\"line number31 index30 alt2\">31</div><div class=\"line number32 index31 alt1\">32</div><div class=\"line number33 index32 alt2\">33</div><div class=\"line number34 index33 alt1\">34</div><div class=\"line number35 index34 alt2\">35</div><div class=\"line number36 index35 alt1\">36</div><div class=\"line number37 index36 alt2\">37</div><div class=\"line number38 index37 alt1\">38</div><div class=\"line number39 index38 alt2\">39</div><div class=\"line number40 index39 alt1\">40</div><div class=\"line number41 index40 alt2\">41</div><div class=\"line number42 index41 alt1\">42</div><div class=\"line number43 index42 alt2\">43</div><div class=\"line number44 index43 alt1\">44</div><div class=\"line number45 index44 alt2\">45</div><div class=\"line number46 index45 alt1\">46</div><div class=\"line number47 index46 alt2\">47</div><div class=\"line number48 index47 alt1\">48</div><div class=\"line number49 index48 alt2\">49</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js comments\">// Extend an object with an extension</code></div><div class=\"line number2 index1 alt1\"><code class=\"js keyword\">function</code> <code class=\"js plain\">extend( obj, extension ){</code></div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">for</code> <code class=\"js plain\">( </code><code class=\"js keyword\">var</code> <code class=\"js plain\">key </code><code class=\"js keyword\">in</code> <code class=\"js plain\">extension ){</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">obj[key] = extension[key];</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number6 index5 alt1\"><code class=\"js plain\">}</code></div><div class=\"line number7 index6 alt2\">&nbsp;</div><div class=\"line number8 index7 alt1\"><code class=\"js comments\">// References to our DOM elements</code></div><div class=\"line number9 index8 alt2\">&nbsp;</div><div class=\"line number10 index9 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">controlCheckbox = document.getElementById( </code><code class=\"js string\">\"mainCheckbox\"</code> <code class=\"js plain\">),</code></div><div class=\"line number11 index10 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">addBtn = document.getElementById( </code><code class=\"js string\">\"addNewObserver\"</code> <code class=\"js plain\">),</code></div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">container = document.getElementById( </code><code class=\"js string\">\"observersContainer\"</code> <code class=\"js plain\">);</code></div><div class=\"line number13 index12 alt2\">&nbsp;</div><div class=\"line number14 index13 alt1\">&nbsp;</div><div class=\"line number15 index14 alt2\"><code class=\"js comments\">// Concrete Subject</code></div><div class=\"line number16 index15 alt1\">&nbsp;</div><div class=\"line number17 index16 alt2\"><code class=\"js comments\">// Extend the controlling checkbox with the Subject class</code></div><div class=\"line number18 index17 alt1\"><code class=\"js plain\">extend( controlCheckbox, </code><code class=\"js keyword\">new</code> <code class=\"js plain\">Subject() );</code></div><div class=\"line number19 index18 alt2\">&nbsp;</div><div class=\"line number20 index19 alt1\"><code class=\"js comments\">// Clicking the checkbox will trigger notifications to its observers</code></div><div class=\"line number21 index20 alt2\"><code class=\"js plain\">controlCheckbox.onclick = </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number22 index21 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">controlCheckbox.notify( controlCheckbox.checked );</code></div><div class=\"line number23 index22 alt2\"><code class=\"js plain\">};</code></div><div class=\"line number24 index23 alt1\">&nbsp;</div><div class=\"line number25 index24 alt2\"><code class=\"js plain\">addBtn.onclick = addNewObserver;</code></div><div class=\"line number26 index25 alt1\">&nbsp;</div><div class=\"line number27 index26 alt2\"><code class=\"js comments\">// Concrete Observer</code></div><div class=\"line number28 index27 alt1\">&nbsp;</div><div class=\"line number29 index28 alt2\"><code class=\"js keyword\">function</code> <code class=\"js plain\">addNewObserver(){</code></div><div class=\"line number30 index29 alt1\">&nbsp;</div><div class=\"line number31 index30 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// Create a new checkbox to be added</code></div><div class=\"line number32 index31 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">check = document.createElement( </code><code class=\"js string\">\"input\"</code> <code class=\"js plain\">);</code></div><div class=\"line number33 index32 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">check.type = </code><code class=\"js string\">\"checkbox\"</code><code class=\"js plain\">;</code></div><div class=\"line number34 index33 alt1\">&nbsp;</div><div class=\"line number35 index34 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// Extend the checkbox with the Observer class</code></div><div class=\"line number36 index35 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">extend( check, </code><code class=\"js keyword\">new</code> <code class=\"js plain\">Observer() );</code></div><div class=\"line number37 index36 alt2\">&nbsp;</div><div class=\"line number38 index37 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// Override with custom update behaviour</code></div><div class=\"line number39 index38 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">check.update = </code><code class=\"js keyword\">function</code><code class=\"js plain\">( value ){</code></div><div class=\"line number40 index39 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.checked = value;</code></div><div class=\"line number41 index40 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number42 index41 alt1\">&nbsp;</div><div class=\"line number43 index42 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// Add the new observer to our list of observers</code></div><div class=\"line number44 index43 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// for our main subject</code></div><div class=\"line number45 index44 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">controlCheckbox.addObserver( check );</code></div><div class=\"line number46 index45 alt1\">&nbsp;</div><div class=\"line number47 index46 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// Append the item to the container</code></div><div class=\"line number48 index47 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">container.appendChild( check );</code></div><div class=\"line number49 index48 alt2\"><code class=\"js plain\">}</code></div></div></td></tr></tbody></table></div></div>\n        <p></p>\n\n        <p>In this example, we looked at how to implement and utilize the Observer pattern, covering the concepts of a Subject, Observer, ConcreteSubject and ConcreteObserver.</p>\n\n\n        <h3>Differences Between The Observer And Publish/Subscribe Pattern</h3>\n\n         <p>Whilst the Observer pattern is useful to be aware of, quite often in the JavaScript world, we'll find it commonly implemented using a variation known as the Publish/Subscribe pattern. Whilst very similar, there are differences between these patterns worth noting.</p>\n\n        <p>The Observer pattern requires that the observer (or object) wishing to receive topic notifications must subscribe this interest to the object firing the event (the subject).</p>\n\n        <p>The Publish/Subscribe pattern however uses a topic/event channel which sits between the objects wishing to receive notifications (subscribers) and the object firing the event (the publisher). This event system allows code to define application specific events which can pass custom arguments containing values needed by the subscriber. The idea here is to avoid dependencies between the subscriber and publisher.</p>\n\n        <p>This differs from the Observer pattern as it allows any subscriber implementing an appropriate event handler to register for and receive topic notifications broadcast by the publisher.</p>\n\n        <p>\n        Here is an example of how one might use the Publish/Subscribe if provided with a functional implementation powering <code>publish()</code>,<code>subscribe()</code> and <code>unsubscribe()</code> behind the scenes:</p>\n\n        <div><div id=\"highlighter_911193\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div><div class=\"line number31 index30 alt2\">31</div><div class=\"line number32 index31 alt1\">32</div><div class=\"line number33 index32 alt2\">33</div><div class=\"line number34 index33 alt1\">34</div><div class=\"line number35 index34 alt2\">35</div><div class=\"line number36 index35 alt1\">36</div><div class=\"line number37 index36 alt2\">37</div><div class=\"line number38 index37 alt1\">38</div><div class=\"line number39 index38 alt2\">39</div><div class=\"line number40 index39 alt1\">40</div><div class=\"line number41 index40 alt2\">41</div><div class=\"line number42 index41 alt1\">42</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js comments\">// A very simple new mail handler</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js comments\">// A count of the number of messages received</code></div><div class=\"line number4 index3 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">mailCounter = 0;</code></div><div class=\"line number5 index4 alt2\">&nbsp;</div><div class=\"line number6 index5 alt1\"><code class=\"js comments\">// Initialize subscribers that will listen out for a topic</code></div><div class=\"line number7 index6 alt2\"><code class=\"js comments\">// with the name \"inbox/newMessage\".</code></div><div class=\"line number8 index7 alt1\">&nbsp;</div><div class=\"line number9 index8 alt2\"><code class=\"js comments\">// Render a preview of new messages</code></div><div class=\"line number10 index9 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">subscriber1 = subscribe( </code><code class=\"js string\">\"inbox/newMessage\"</code><code class=\"js plain\">, </code><code class=\"js keyword\">function</code><code class=\"js plain\">( topic, data ) {</code></div><div class=\"line number11 index10 alt2\">&nbsp;</div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// Log the topic for debugging purposes</code></div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js string\">\"A new message was received: \"</code><code class=\"js plain\">, topic );</code></div><div class=\"line number14 index13 alt1\">&nbsp;</div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// Use the data that was passed from our subject</code></div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// to display a message preview to the user</code></div><div class=\"line number17 index16 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">$( </code><code class=\"js string\">\".messageSender\"</code> <code class=\"js plain\">).html( data.sender );</code></div><div class=\"line number18 index17 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">$( </code><code class=\"js string\">\".messagePreview\"</code> <code class=\"js plain\">).html( data.body );</code></div><div class=\"line number19 index18 alt2\">&nbsp;</div><div class=\"line number20 index19 alt1\"><code class=\"js plain\">});</code></div><div class=\"line number21 index20 alt2\">&nbsp;</div><div class=\"line number22 index21 alt1\"><code class=\"js comments\">// Here's another subscriber using the same data to perform</code></div><div class=\"line number23 index22 alt2\"><code class=\"js comments\">// a different task.</code></div><div class=\"line number24 index23 alt1\">&nbsp;</div><div class=\"line number25 index24 alt2\"><code class=\"js comments\">// Update the counter displaying the number of new</code></div><div class=\"line number26 index25 alt1\"><code class=\"js comments\">// messages received via the publisher</code></div><div class=\"line number27 index26 alt2\">&nbsp;</div><div class=\"line number28 index27 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">subscriber2 = subscribe( </code><code class=\"js string\">\"inbox/newMessage\"</code><code class=\"js plain\">, </code><code class=\"js keyword\">function</code><code class=\"js plain\">( topic, data ) {</code></div><div class=\"line number29 index28 alt2\">&nbsp;</div><div class=\"line number30 index29 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">$('.newMessageCounter').html( ++mailCounter );</code></div><div class=\"line number31 index30 alt2\">&nbsp;</div><div class=\"line number32 index31 alt1\"><code class=\"js plain\">});</code></div><div class=\"line number33 index32 alt2\">&nbsp;</div><div class=\"line number34 index33 alt1\"><code class=\"js plain\">publish( </code><code class=\"js string\">\"inbox/newMessage\"</code><code class=\"js plain\">, [{</code></div><div class=\"line number35 index34 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">sender: </code><code class=\"js string\">\"hello@google.com\"</code><code class=\"js plain\">,</code></div><div class=\"line number36 index35 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">body: </code><code class=\"js string\">\"Hey there! How are you doing today?\"</code></div><div class=\"line number37 index36 alt2\"><code class=\"js plain\">}]);</code></div><div class=\"line number38 index37 alt1\">&nbsp;</div><div class=\"line number39 index38 alt2\"><code class=\"js comments\">// We could then at a later point unsubscribe our subscribers</code></div><div class=\"line number40 index39 alt1\"><code class=\"js comments\">// from receiving any new topic notifications as follows:</code></div><div class=\"line number41 index40 alt2\"><code class=\"js comments\">// unsubscribe( subscriber1 );</code></div><div class=\"line number42 index41 alt1\"><code class=\"js comments\">// unsubscribe( subscriber2 );</code></div></div></td></tr></tbody></table></div></div>\n\n        <p>\n         The general idea here is the promotion of loose coupling. Rather than single objects calling on the methods of other objects directly, they instead subscribe to a specific task or activity of another object and are notified when it occurs.</p>\n\n        <h3>Advantages</h3>\n\n        <p>\n        The Observer and Publish/Subscribe patterns encourage us to think hard about the relationships between different parts of our application. They also help us identify what layers containing direct relationships which could instead be replaced with sets of subjects and observers. This effectively could be used to break down an application into smaller, more loosely coupled blocks to improve code management and potentials for re-use.</p>\n\n        <p>Further motivation behind using the Observer pattern is where we need to maintain consistency between related objects without making classes tightly coupled. For example, when an object needs to be able to notify other objects without making assumptions regarding those objects. </p>\n\n        <p>Dynamic relationships can exist between observers and subjects when using either pattern. This provides a great deal of flexibility which may not be as easy to implement when disparate parts of our application are tightly coupled.</p>\n\n        <p>\n        Whilst it may not always be the best solution to every problem, these patterns remain one of the best tools for designing decoupled systems and should be considered an important tool in any JavaScript developer's utility belt.</p>\n\n        <h3>Disadvantages</h3>\n        <p>\n        Consequently, some of the issues with these patterns actually stem from their main benefits. In Publish/Subscribe, by decoupling publishers from subscribers, it can sometimes become difficult to obtain guarantees that particular parts of our applications are functioning as we may expect.</p>\n\n        <p>\n        For example, publishers may make an assumption that one or more subscribers are listening to them. Say that we're using such an assumption to log or output errors regarding some application process. If the subscriber performing the logging crashes (or for some reason fails to function), the publisher won't have a way of seeing this due to the decoupled nature of the system.</p>\n\n        <p>Another draw-back of the pattern is that subscribers are quite ignorant to the existence of each other and are blind to the cost of switching publishers. Due to the dynamic relationship between subscribers and publishers, the update dependency can be difficult to track.</p>\n\n\n        <h3>Publish/Subscribe Implementations</h3>\n\n        <p>\n        Publish/Subscribe fits in very well in JavaScript ecosystems, largely because at the core, ECMAScript implementations are event driven. This is particularly true in browser environments as the DOM uses events as its main interaction API for scripting.</p>\n\n        <p>That said, neither ECMAScript nor DOM provide core objects or methods for creating custom events systems in implementation code (with the exception of perhaps the DOM3 CustomEvent, which is bound to the DOM and is thus not generically useful).</p>\n\n        <p>Luckily, popular JavaScript libraries such as dojo, jQuery (custom events) and YUI already have utilities that can assist in easily implementing a Publish/Subscribe system with very little effort. Below we can see some examples of this:</p>\n\n        <div><div id=\"highlighter_907137\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div><div class=\"line number31 index30 alt2\">31</div><div class=\"line number32 index31 alt1\">32</div><div class=\"line number33 index32 alt2\">33</div><div class=\"line number34 index33 alt1\">34</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js comments\">// Publish</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js comments\">// jQuery: $(obj).trigger(\"channel\", [arg1, arg2, arg3]);</code></div><div class=\"line number4 index3 alt1\"><code class=\"js plain\">$( el ).trigger( </code><code class=\"js string\">\"/login\"</code><code class=\"js plain\">, [{username:</code><code class=\"js string\">\"test\"</code><code class=\"js plain\">, userData:</code><code class=\"js string\">\"test\"</code><code class=\"js plain\">}] );</code></div><div class=\"line number5 index4 alt2\">&nbsp;</div><div class=\"line number6 index5 alt1\"><code class=\"js comments\">// Dojo: dojo.publish(\"channel\", [arg1, arg2, arg3] );</code></div><div class=\"line number7 index6 alt2\"><code class=\"js plain\">dojo.publish( </code><code class=\"js string\">\"/login\"</code><code class=\"js plain\">, [{username:</code><code class=\"js string\">\"test\"</code><code class=\"js plain\">, userData:</code><code class=\"js string\">\"test\"</code><code class=\"js plain\">}] );</code></div><div class=\"line number8 index7 alt1\">&nbsp;</div><div class=\"line number9 index8 alt2\"><code class=\"js comments\">// YUI: el.publish(\"channel\", [arg1, arg2, arg3]);</code></div><div class=\"line number10 index9 alt1\"><code class=\"js plain\">el.publish( </code><code class=\"js string\">\"/login\"</code><code class=\"js plain\">, {username:</code><code class=\"js string\">\"test\"</code><code class=\"js plain\">, userData:</code><code class=\"js string\">\"test\"</code><code class=\"js plain\">} );</code></div><div class=\"line number11 index10 alt2\">&nbsp;</div><div class=\"line number12 index11 alt1\">&nbsp;</div><div class=\"line number13 index12 alt2\"><code class=\"js comments\">// Subscribe</code></div><div class=\"line number14 index13 alt1\">&nbsp;</div><div class=\"line number15 index14 alt2\"><code class=\"js comments\">// jQuery: $(obj).on( \"channel\", [data], fn );</code></div><div class=\"line number16 index15 alt1\"><code class=\"js plain\">$( el ).on( </code><code class=\"js string\">\"/login\"</code><code class=\"js plain\">, </code><code class=\"js keyword\">function</code><code class=\"js plain\">( event ){...} );</code></div><div class=\"line number17 index16 alt2\">&nbsp;</div><div class=\"line number18 index17 alt1\"><code class=\"js comments\">// Dojo: dojo.subscribe( \"channel\", fn);</code></div><div class=\"line number19 index18 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">handle = dojo.subscribe( </code><code class=\"js string\">\"/login\"</code><code class=\"js plain\">, </code><code class=\"js keyword\">function</code><code class=\"js plain\">(data){..} );</code></div><div class=\"line number20 index19 alt1\">&nbsp;</div><div class=\"line number21 index20 alt2\"><code class=\"js comments\">// YUI: el.on(\"channel\", handler);</code></div><div class=\"line number22 index21 alt1\"><code class=\"js plain\">el.on( </code><code class=\"js string\">\"/login\"</code><code class=\"js plain\">, </code><code class=\"js keyword\">function</code><code class=\"js plain\">( data ){...} );</code></div><div class=\"line number23 index22 alt2\">&nbsp;</div><div class=\"line number24 index23 alt1\">&nbsp;</div><div class=\"line number25 index24 alt2\"><code class=\"js comments\">// Unsubscribe</code></div><div class=\"line number26 index25 alt1\">&nbsp;</div><div class=\"line number27 index26 alt2\"><code class=\"js comments\">// jQuery: $(obj).off( \"channel\" );</code></div><div class=\"line number28 index27 alt1\"><code class=\"js plain\">$( el ).off( </code><code class=\"js string\">\"/login\"</code> <code class=\"js plain\">);</code></div><div class=\"line number29 index28 alt2\">&nbsp;</div><div class=\"line number30 index29 alt1\"><code class=\"js comments\">// Dojo: dojo.unsubscribe( handle );</code></div><div class=\"line number31 index30 alt2\"><code class=\"js plain\">dojo.unsubscribe( handle );</code></div><div class=\"line number32 index31 alt1\">&nbsp;</div><div class=\"line number33 index32 alt2\"><code class=\"js comments\">// YUI: el.detach(\"channel\");</code></div><div class=\"line number34 index33 alt1\"><code class=\"js plain\">el.detach( </code><code class=\"js string\">\"/login\"</code> <code class=\"js plain\">);</code></div></div></td></tr></tbody></table></div></div>\n\n        <p>\n        For those wishing to use the Publish/Subscribe pattern with vanilla JavaScript (or another library) <a href=\"http://amplifyjs.com/\">AmplifyJS</a> includes a clean, library-agnostic implementation that can be used with any library or toolkit. Radio.js (<a href=\"http://radio.uxder.com/\">http://radio.uxder.com/</a>), PubSubJS (<a href=\"https://github.com/mroderick/PubSubJS\">https://github.com/mroderick/PubSubJS</a>) or Pure JS PubSub by Peter Higgins (<a href=\"https://github.com/phiggins42/bloody-jquery-plugins/blob/55e41df9bf08f42378bb08b93efcb28555b61aeb/pubsub.js\">https://github.com/phiggins42/bloody-jquery-plugins/blob/55e41df9bf08f42378bb08b93efcb28555b61aeb/pubsub.js</a>) are also similar alternatives worth checking out.</p>\n\n        <p>\n        jQuery developers in particular have quite a few other options and can opt to use one of the many well-developed implementations ranging from Peter Higgins's jQuery plugin to Ben Alman's (optimized) Pub/Sub jQuery gist on GitHub. Links to just a few of these can be found below.\n        </p>\n\n        <ul>\n        <li>Ben Alman's Pub/Sub gist <a href=\"https://gist.github.com/661855\">https://gist.github.com/661855</a> (recommended)</li>\n        <li>Rick Waldron's jQuery-core style take on the above <a href=\"https://gist.github.com/705311\">https://gist.github.com/705311</a></li>\n        <li>Peter Higgins\" plugin <a href=\"http://github.com/phiggins42/bloody-jquery-plugins/blob/master/pubsub.js\">http://github.com/phiggins42/bloody-jquery-plugins/blob/master/pubsub.js</a>.</li>\n        <li>AppendTo's Pub/Sub in AmplifyJS <a href=\"http://amplifyjs.com\">http://amplifyjs.com</a></li>\n        <li>Ben Truyman's gist <a href=\"https://gist.github.com/826794\">https://gist.github.com/826794</a></li>\n        </ul>\n\n        <p>\n        So that we are able to get an appreciation for how many of the vanilla JavaScript implementations of the Observer pattern might work, let's take a walk through of a minimalist version of Publish/Subscribe I released on GitHub under a project called <a href=\"http://github.com/addyosmani/pubsubz\">pubsubz</a>. This demonstrates the core concepts of subscribe, publish as well as the concept of unsubscribing.</p>\n\n        <p>\n        I've opted to base our examples on this code as it sticks closely to both the method signatures and approach of implementation I would expect to see in a JavaScript version of the classic Observer pattern.</p>\n\n\n        <h4>A Publish/Subscribe Implementation</h4>\n        <p>\n        </p><div><div id=\"highlighter_774272\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div><div class=\"line number31 index30 alt2\">31</div><div class=\"line number32 index31 alt1\">32</div><div class=\"line number33 index32 alt2\">33</div><div class=\"line number34 index33 alt1\">34</div><div class=\"line number35 index34 alt2\">35</div><div class=\"line number36 index35 alt1\">36</div><div class=\"line number37 index36 alt2\">37</div><div class=\"line number38 index37 alt1\">38</div><div class=\"line number39 index38 alt2\">39</div><div class=\"line number40 index39 alt1\">40</div><div class=\"line number41 index40 alt2\">41</div><div class=\"line number42 index41 alt1\">42</div><div class=\"line number43 index42 alt2\">43</div><div class=\"line number44 index43 alt1\">44</div><div class=\"line number45 index44 alt2\">45</div><div class=\"line number46 index45 alt1\">46</div><div class=\"line number47 index46 alt2\">47</div><div class=\"line number48 index47 alt1\">48</div><div class=\"line number49 index48 alt2\">49</div><div class=\"line number50 index49 alt1\">50</div><div class=\"line number51 index50 alt2\">51</div><div class=\"line number52 index51 alt1\">52</div><div class=\"line number53 index52 alt2\">53</div><div class=\"line number54 index53 alt1\">54</div><div class=\"line number55 index54 alt2\">55</div><div class=\"line number56 index55 alt1\">56</div><div class=\"line number57 index56 alt2\">57</div><div class=\"line number58 index57 alt1\">58</div><div class=\"line number59 index58 alt2\">59</div><div class=\"line number60 index59 alt1\">60</div><div class=\"line number61 index60 alt2\">61</div><div class=\"line number62 index61 alt1\">62</div><div class=\"line number63 index62 alt2\">63</div><div class=\"line number64 index63 alt1\">64</div><div class=\"line number65 index64 alt2\">65</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">pubsub = {};</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js plain\">(</code><code class=\"js keyword\">function</code><code class=\"js plain\">(myObject) {</code></div><div class=\"line number4 index3 alt1\">&nbsp;</div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Storage for topics that can be broadcast</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// or listened to</code></div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">topics = {};</code></div><div class=\"line number8 index7 alt1\">&nbsp;</div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// A topic identifier</code></div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">subUid = -1;</code></div><div class=\"line number11 index10 alt2\">&nbsp;</div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Publish or broadcast events of interest</code></div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// with a specific topic name and arguments</code></div><div class=\"line number14 index13 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// such as the data to pass along</code></div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">myObject.publish = </code><code class=\"js keyword\">function</code><code class=\"js plain\">( topic, args ) {</code></div><div class=\"line number16 index15 alt1\">&nbsp;</div><div class=\"line number17 index16 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">if</code> <code class=\"js plain\">( !topics[topic] ) {</code></div><div class=\"line number18 index17 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js keyword\">false</code><code class=\"js plain\">;</code></div><div class=\"line number19 index18 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number20 index19 alt1\">&nbsp;</div><div class=\"line number21 index20 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">subscribers = topics[topic],</code></div><div class=\"line number22 index21 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">len = subscribers ? subscribers.length : 0;</code></div><div class=\"line number23 index22 alt2\">&nbsp;</div><div class=\"line number24 index23 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">while</code> <code class=\"js plain\">(len--) {</code></div><div class=\"line number25 index24 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">subscribers[len].func( topic, args );</code></div><div class=\"line number26 index25 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number27 index26 alt2\">&nbsp;</div><div class=\"line number28 index27 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js keyword\">this</code><code class=\"js plain\">;</code></div><div class=\"line number29 index28 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number30 index29 alt1\">&nbsp;</div><div class=\"line number31 index30 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Subscribe to events of interest</code></div><div class=\"line number32 index31 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// with a specific topic name and a</code></div><div class=\"line number33 index32 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// callback function, to be executed</code></div><div class=\"line number34 index33 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// when the topic/event is observed</code></div><div class=\"line number35 index34 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">myObject.subscribe = </code><code class=\"js keyword\">function</code><code class=\"js plain\">( topic, func ) {</code></div><div class=\"line number36 index35 alt1\">&nbsp;</div><div class=\"line number37 index36 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">if</code> <code class=\"js plain\">(!topics[topic]) {</code></div><div class=\"line number38 index37 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">topics[topic] = [];</code></div><div class=\"line number39 index38 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number40 index39 alt1\">&nbsp;</div><div class=\"line number41 index40 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">token = ( ++subUid ).toString();</code></div><div class=\"line number42 index41 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">topics[topic].push({</code></div><div class=\"line number43 index42 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">token: token,</code></div><div class=\"line number44 index43 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">func: func</code></div><div class=\"line number45 index44 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">});</code></div><div class=\"line number46 index45 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">token;</code></div><div class=\"line number47 index46 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number48 index47 alt1\">&nbsp;</div><div class=\"line number49 index48 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Unsubscribe from a specific</code></div><div class=\"line number50 index49 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// topic, based on a tokenized reference</code></div><div class=\"line number51 index50 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// to the subscription</code></div><div class=\"line number52 index51 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">myObject.unsubscribe = </code><code class=\"js keyword\">function</code><code class=\"js plain\">( token ) {</code></div><div class=\"line number53 index52 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">for</code> <code class=\"js plain\">( </code><code class=\"js keyword\">var</code> <code class=\"js plain\">m </code><code class=\"js keyword\">in</code> <code class=\"js plain\">topics ) {</code></div><div class=\"line number54 index53 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">if</code> <code class=\"js plain\">( topics[m] ) {</code></div><div class=\"line number55 index54 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">for</code> <code class=\"js plain\">( </code><code class=\"js keyword\">var</code> <code class=\"js plain\">i = 0, j = topics[m].length; i &lt; j; i++ ) {</code></div><div class=\"line number56 index55 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">if</code> <code class=\"js plain\">( topics[m][i].token === token ) {</code></div><div class=\"line number57 index56 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">topics[m].splice( i, 1 );</code></div><div class=\"line number58 index57 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">token;</code></div><div class=\"line number59 index58 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number60 index59 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number61 index60 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number62 index61 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number63 index62 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js keyword\">this</code><code class=\"js plain\">;</code></div><div class=\"line number64 index63 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number65 index64 alt2\"><code class=\"js plain\">}( pubsub ));</code></div></div></td></tr></tbody></table></div></div>\n        <p></p>\n\n        <h4>Example: Using Our Implementation</h4>\n\n        <p>We can now use the implementation to publish and subscribe to events of interest as follows:</p>\n        <p>\n        </p><div><div id=\"highlighter_872744\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div><div class=\"line number31 index30 alt2\">31</div><div class=\"line number32 index31 alt1\">32</div><div class=\"line number33 index32 alt2\">33</div><div class=\"line number34 index33 alt1\">34</div><div class=\"line number35 index34 alt2\">35</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js comments\">// Another simple message handler</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js comments\">// A simple message logger that logs any topics and data received through our</code></div><div class=\"line number4 index3 alt1\"><code class=\"js comments\">// subscriber</code></div><div class=\"line number5 index4 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">messageLogger = </code><code class=\"js keyword\">function</code> <code class=\"js plain\">( topics, data ) {</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js string\">\"Logging: \"</code> <code class=\"js plain\">+ topics + </code><code class=\"js string\">\": \"</code> <code class=\"js plain\">+ data );</code></div><div class=\"line number7 index6 alt2\"><code class=\"js plain\">};</code></div><div class=\"line number8 index7 alt1\">&nbsp;</div><div class=\"line number9 index8 alt2\"><code class=\"js comments\">// Subscribers listen for topics they have subscribed to and</code></div><div class=\"line number10 index9 alt1\"><code class=\"js comments\">// invoke a callback function (e.g messageLogger) once a new</code></div><div class=\"line number11 index10 alt2\"><code class=\"js comments\">// notification is broadcast on that topic</code></div><div class=\"line number12 index11 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">subscription = pubsub.subscribe( </code><code class=\"js string\">\"inbox/newMessage\"</code><code class=\"js plain\">, messageLogger );</code></div><div class=\"line number13 index12 alt2\">&nbsp;</div><div class=\"line number14 index13 alt1\"><code class=\"js comments\">// Publishers are in charge of publishing topics or notifications of</code></div><div class=\"line number15 index14 alt2\"><code class=\"js comments\">// interest to the application. e.g:</code></div><div class=\"line number16 index15 alt1\">&nbsp;</div><div class=\"line number17 index16 alt2\"><code class=\"js plain\">pubsub.publish( </code><code class=\"js string\">\"inbox/newMessage\"</code><code class=\"js plain\">, </code><code class=\"js string\">\"hello world!\"</code> <code class=\"js plain\">);</code></div><div class=\"line number18 index17 alt1\">&nbsp;</div><div class=\"line number19 index18 alt2\"><code class=\"js comments\">// or</code></div><div class=\"line number20 index19 alt1\"><code class=\"js plain\">pubsub.publish( </code><code class=\"js string\">\"inbox/newMessage\"</code><code class=\"js plain\">, [</code><code class=\"js string\">\"test\"</code><code class=\"js plain\">, </code><code class=\"js string\">\"a\"</code><code class=\"js plain\">, </code><code class=\"js string\">\"b\"</code><code class=\"js plain\">, </code><code class=\"js string\">\"c\"</code><code class=\"js plain\">] );</code></div><div class=\"line number21 index20 alt2\">&nbsp;</div><div class=\"line number22 index21 alt1\"><code class=\"js comments\">// or</code></div><div class=\"line number23 index22 alt2\"><code class=\"js plain\">pubsub.publish( </code><code class=\"js string\">\"inbox/newMessage\"</code><code class=\"js plain\">, {</code></div><div class=\"line number24 index23 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">sender: </code><code class=\"js string\">\"hello@google.com\"</code><code class=\"js plain\">,</code></div><div class=\"line number25 index24 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">body: </code><code class=\"js string\">\"Hey again!\"</code></div><div class=\"line number26 index25 alt1\"><code class=\"js plain\">});</code></div><div class=\"line number27 index26 alt2\">&nbsp;</div><div class=\"line number28 index27 alt1\"><code class=\"js comments\">// We can also unsubscribe if we no longer wish for our subscribers</code></div><div class=\"line number29 index28 alt2\"><code class=\"js comments\">// to be notified</code></div><div class=\"line number30 index29 alt1\"><code class=\"js plain\">pubsub.unsubscribe( subscription );</code></div><div class=\"line number31 index30 alt2\">&nbsp;</div><div class=\"line number32 index31 alt1\"><code class=\"js comments\">// Once unsubscribed, this for example won't result in our</code></div><div class=\"line number33 index32 alt2\"><code class=\"js comments\">// messageLogger being executed as the subscriber is</code></div><div class=\"line number34 index33 alt1\"><code class=\"js comments\">// no longer listening</code></div><div class=\"line number35 index34 alt2\"><code class=\"js plain\">pubsub.publish( </code><code class=\"js string\">\"inbox/newMessage\"</code><code class=\"js plain\">, </code><code class=\"js string\">\"Hello! are you still there?\"</code> <code class=\"js plain\">);</code></div></div></td></tr></tbody></table></div></div>\n        <p></p>\n\n        <h4>Example: User-Interface Notifications</h4>\n\n        <p>Next, let's imagine we have a web application responsible for displaying real-time stock information.</p>\n\n        <p>\n        The application might have a grid for displaying the stock stats and a counter for displaying the last point of update. When the data model changes, the application will need to update the grid and counter. In this scenario, our subject (which will be publishing topics/notifications) is the data model and our subscribers are the grid and counter.</p>\n\n        <p>\n        When our subscribers receive notification that the model itself has changed, they can update themselves accordingly.\n        </p>\n\n        <p>\n        In our implementation, our subscriber will listen to the topic \"newDataAvailable\" to find out if new stock information is available. If a new notification is published to this topic, it will trigger <code>gridUpdate</code> to add a new row to our grid containing this information. It will also update a <em>last updated</em> counter to log the last time data was added\n        </p>\n\n        <div><div id=\"highlighter_604250\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div><div class=\"line number31 index30 alt2\">31</div><div class=\"line number32 index31 alt1\">32</div><div class=\"line number33 index32 alt2\">33</div><div class=\"line number34 index33 alt1\">34</div><div class=\"line number35 index34 alt2\">35</div><div class=\"line number36 index35 alt1\">36</div><div class=\"line number37 index36 alt2\">37</div><div class=\"line number38 index37 alt1\">38</div><div class=\"line number39 index38 alt2\">39</div><div class=\"line number40 index39 alt1\">40</div><div class=\"line number41 index40 alt2\">41</div><div class=\"line number42 index41 alt1\">42</div><div class=\"line number43 index42 alt2\">43</div><div class=\"line number44 index43 alt1\">44</div><div class=\"line number45 index44 alt2\">45</div><div class=\"line number46 index45 alt1\">46</div><div class=\"line number47 index46 alt2\">47</div><div class=\"line number48 index47 alt1\">48</div><div class=\"line number49 index48 alt2\">49</div><div class=\"line number50 index49 alt1\">50</div><div class=\"line number51 index50 alt2\">51</div><div class=\"line number52 index51 alt1\">52</div><div class=\"line number53 index52 alt2\">53</div><div class=\"line number54 index53 alt1\">54</div><div class=\"line number55 index54 alt2\">55</div><div class=\"line number56 index55 alt1\">56</div><div class=\"line number57 index56 alt2\">57</div><div class=\"line number58 index57 alt1\">58</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js comments\">// Return the current local time to be used in our UI later</code></div><div class=\"line number2 index1 alt1\"><code class=\"js plain\">getCurrentTime = </code><code class=\"js keyword\">function</code> <code class=\"js plain\">(){</code></div><div class=\"line number3 index2 alt2\">&nbsp;</div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">date = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">Date(),</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">m = date.getMonth() + 1,</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">d = date.getDate(),</code></div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">y = date.getFullYear(),</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">t = date.toLocaleTimeString().toLowerCase();</code></div><div class=\"line number9 index8 alt2\">&nbsp;</div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">(m + </code><code class=\"js string\">\"/\"</code> <code class=\"js plain\">+ d + </code><code class=\"js string\">\"/\"</code> <code class=\"js plain\">+ y + </code><code class=\"js string\">\" \"</code> <code class=\"js plain\">+ t);</code></div><div class=\"line number11 index10 alt2\"><code class=\"js plain\">};</code></div><div class=\"line number12 index11 alt1\">&nbsp;</div><div class=\"line number13 index12 alt2\"><code class=\"js comments\">// Add a new row of data to our fictional grid component</code></div><div class=\"line number14 index13 alt1\"><code class=\"js keyword\">function</code> <code class=\"js plain\">addGridRow( data ) {</code></div><div class=\"line number15 index14 alt2\">&nbsp;</div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// ui.grid.addRow( data );</code></div><div class=\"line number17 index16 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js string\">\"updated grid component with:\"</code> <code class=\"js plain\">+ data );</code></div><div class=\"line number18 index17 alt1\">&nbsp;</div><div class=\"line number19 index18 alt2\"><code class=\"js plain\">}</code></div><div class=\"line number20 index19 alt1\">&nbsp;</div><div class=\"line number21 index20 alt2\"><code class=\"js comments\">// Update our fictional grid to show the time it was last</code></div><div class=\"line number22 index21 alt1\"><code class=\"js comments\">// updated</code></div><div class=\"line number23 index22 alt2\"><code class=\"js keyword\">function</code> <code class=\"js plain\">updateCounter( data ) {</code></div><div class=\"line number24 index23 alt1\">&nbsp;</div><div class=\"line number25 index24 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// ui.grid.updateLastChanged( getCurrentTime() );</code></div><div class=\"line number26 index25 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js string\">\"data last updated at: \"</code> <code class=\"js plain\">+ getCurrentTime() + </code><code class=\"js string\">\" with \"</code> <code class=\"js plain\">+ data);</code></div><div class=\"line number27 index26 alt2\">&nbsp;</div><div class=\"line number28 index27 alt1\"><code class=\"js plain\">}</code></div><div class=\"line number29 index28 alt2\">&nbsp;</div><div class=\"line number30 index29 alt1\"><code class=\"js comments\">// Update the grid using the data passed to our subscribers</code></div><div class=\"line number31 index30 alt2\"><code class=\"js plain\">gridUpdate = </code><code class=\"js keyword\">function</code><code class=\"js plain\">( topic, data ){</code></div><div class=\"line number32 index31 alt1\">&nbsp;</div><div class=\"line number33 index32 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">if</code> <code class=\"js plain\">( data !== undefined ) {</code></div><div class=\"line number34 index33 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">addGridRow( data );</code></div><div class=\"line number35 index34 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">updateCounter( data );</code></div><div class=\"line number36 index35 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number37 index36 alt2\">&nbsp;</div><div class=\"line number38 index37 alt1\"><code class=\"js plain\">};</code></div><div class=\"line number39 index38 alt2\">&nbsp;</div><div class=\"line number40 index39 alt1\"><code class=\"js comments\">// Create a subscription to the newDataAvailable topic</code></div><div class=\"line number41 index40 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">subscriber = pubsub.subscribe( </code><code class=\"js string\">\"newDataAvailable\"</code><code class=\"js plain\">, gridUpdate );</code></div><div class=\"line number42 index41 alt1\">&nbsp;</div><div class=\"line number43 index42 alt2\"><code class=\"js comments\">// The following represents updates to our data layer. This could be</code></div><div class=\"line number44 index43 alt1\"><code class=\"js comments\">// powered by ajax requests which broadcast that new data is available</code></div><div class=\"line number45 index44 alt2\"><code class=\"js comments\">// to the rest of the application.</code></div><div class=\"line number46 index45 alt1\">&nbsp;</div><div class=\"line number47 index46 alt2\"><code class=\"js comments\">// Publish changes to the gridUpdated topic representing new entries</code></div><div class=\"line number48 index47 alt1\"><code class=\"js plain\">pubsub.publish( </code><code class=\"js string\">\"newDataAvailable\"</code><code class=\"js plain\">, {</code></div><div class=\"line number49 index48 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">summary: </code><code class=\"js string\">\"Apple made $5 billion\"</code><code class=\"js plain\">,</code></div><div class=\"line number50 index49 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">identifier: </code><code class=\"js string\">\"APPL\"</code><code class=\"js plain\">,</code></div><div class=\"line number51 index50 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">stockPrice: 570.91</code></div><div class=\"line number52 index51 alt1\"><code class=\"js plain\">});</code></div><div class=\"line number53 index52 alt2\">&nbsp;</div><div class=\"line number54 index53 alt1\"><code class=\"js plain\">pubsub.publish( </code><code class=\"js string\">\"newDataAvailable\"</code><code class=\"js plain\">, {</code></div><div class=\"line number55 index54 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">summary: </code><code class=\"js string\">\"Microsoft made $20 million\"</code><code class=\"js plain\">,</code></div><div class=\"line number56 index55 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">identifier: </code><code class=\"js string\">\"MSFT\"</code><code class=\"js plain\">,</code></div><div class=\"line number57 index56 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">stockPrice: 30.85</code></div><div class=\"line number58 index57 alt1\"><code class=\"js plain\">});</code></div></div></td></tr></tbody></table></div></div>\n\n\n        <h4>Example: Decoupling applications using Ben Alman's Pub/Sub implementation</h4>\n\n        <p>\n        In the following movie ratings example, we'll be using Ben Alman's jQuery implementation of Publish/Subscribe to demonstrate how we can decouple a user interface. Notice how submitting a rating only has the effect of publishing the fact that new user and rating data is available.\n        </p>\n\n        <p>\n        It's left up to the subscribers to those topics to then delegate what happens with that data. In our case we're pushing that new data into existing arrays and then rendering them using the Underscore library's <code>.template()</code> method for templating.</p>\n\n        <strong>HTML/Templates</strong>\n\n        <div><div id=\"highlighter_35848\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div><div class=\"line number31 index30 alt2\">31</div><div class=\"line number32 index31 alt1\">32</div><div class=\"line number33 index32 alt2\">33</div><div class=\"line number34 index33 alt1\">34</div><div class=\"line number35 index34 alt2\">35</div><div class=\"line number36 index35 alt1\">36</div><div class=\"line number37 index36 alt2\">37</div><div class=\"line number38 index37 alt1\">38</div><div class=\"line number39 index38 alt2\">39</div><div class=\"line number40 index39 alt1\">40</div><div class=\"line number41 index40 alt2\">41</div><div class=\"line number42 index41 alt1\">42</div><div class=\"line number43 index42 alt2\">43</div><div class=\"line number44 index43 alt1\">44</div><div class=\"line number45 index44 alt2\">45</div><div class=\"line number46 index45 alt1\">46</div><div class=\"line number47 index46 alt2\">47</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js plain\">&lt;script id=</code><code class=\"js string\">\"userTemplate\"</code> <code class=\"js plain\">type=</code><code class=\"js string\">\"text/html\"</code><code class=\"js plain\">&gt;</code></div><div class=\"line number2 index1 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;li&gt;&lt;%= name %&gt;&lt;/li&gt;</code></div><div class=\"line number3 index2 alt2\"><code class=\"js plain\">&lt;/script&gt;</code></div><div class=\"line number4 index3 alt1\">&nbsp;</div><div class=\"line number5 index4 alt2\">&nbsp;</div><div class=\"line number6 index5 alt1\"><code class=\"js plain\">&lt;script id=</code><code class=\"js string\">\"ratingsTemplate\"</code> <code class=\"js plain\">type=</code><code class=\"js string\">\"text/html\"</code><code class=\"js plain\">&gt;</code></div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;li&gt;&lt;strong&gt;&lt;%= title %&gt;&lt;/strong&gt; was rated &lt;%= rating %&gt;/5&lt;/li&gt;</code></div><div class=\"line number8 index7 alt1\"><code class=\"js plain\">&lt;/script&gt;</code></div><div class=\"line number9 index8 alt2\">&nbsp;</div><div class=\"line number10 index9 alt1\">&nbsp;</div><div class=\"line number11 index10 alt2\"><code class=\"js plain\">&lt;div id=</code><code class=\"js string\">\"container\"</code><code class=\"js plain\">&gt;</code></div><div class=\"line number12 index11 alt1\">&nbsp;</div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;div </code><code class=\"js keyword\">class</code><code class=\"js plain\">=</code><code class=\"js string\">\"sampleForm\"</code><code class=\"js plain\">&gt;</code></div><div class=\"line number14 index13 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;p&gt;</code></div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;label </code><code class=\"js keyword\">for</code><code class=\"js plain\">=</code><code class=\"js string\">\"twitter_handle\"</code><code class=\"js plain\">&gt;Twitter handle:&lt;/label&gt;</code></div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;input type=</code><code class=\"js string\">\"text\"</code> <code class=\"js plain\">id=</code><code class=\"js string\">\"twitter_handle\"</code> <code class=\"js plain\">/&gt;</code></div><div class=\"line number17 index16 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;/p&gt;</code></div><div class=\"line number18 index17 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;p&gt;</code></div><div class=\"line number19 index18 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;label </code><code class=\"js keyword\">for</code><code class=\"js plain\">=</code><code class=\"js string\">\"movie_seen\"</code><code class=\"js plain\">&gt;Name a movie you've seen </code><code class=\"js keyword\">this</code> <code class=\"js plain\">year:&lt;/label&gt;</code></div><div class=\"line number20 index19 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;input type=</code><code class=\"js string\">\"text\"</code> <code class=\"js plain\">id=</code><code class=\"js string\">\"movie_seen\"</code> <code class=\"js plain\">/&gt;</code></div><div class=\"line number21 index20 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;/p&gt;</code></div><div class=\"line number22 index21 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;p&gt;</code></div><div class=\"line number23 index22 alt2\">&nbsp;</div><div class=\"line number24 index23 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;label </code><code class=\"js keyword\">for</code><code class=\"js plain\">=</code><code class=\"js string\">\"movie_rating\"</code><code class=\"js plain\">&gt;Rate the movie you saw:&lt;/label&gt;</code></div><div class=\"line number25 index24 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;select id=</code><code class=\"js string\">\"movie_rating\"</code><code class=\"js plain\">&gt;</code></div><div class=\"line number26 index25 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;option value=</code><code class=\"js string\">\"1\"</code><code class=\"js plain\">&gt;1&lt;/option&gt;</code></div><div class=\"line number27 index26 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;option value=</code><code class=\"js string\">\"2\"</code><code class=\"js plain\">&gt;2&lt;/option&gt;</code></div><div class=\"line number28 index27 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;option value=</code><code class=\"js string\">\"3\"</code><code class=\"js plain\">&gt;3&lt;/option&gt;</code></div><div class=\"line number29 index28 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;option value=</code><code class=\"js string\">\"4\"</code><code class=\"js plain\">&gt;4&lt;/option&gt;</code></div><div class=\"line number30 index29 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;option value=</code><code class=\"js string\">\"5\"</code> <code class=\"js plain\">selected&gt;5&lt;/option&gt;</code></div><div class=\"line number31 index30 alt2\">&nbsp;</div><div class=\"line number32 index31 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;/select&gt;</code></div><div class=\"line number33 index32 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;/p&gt;</code></div><div class=\"line number34 index33 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;p&gt;</code></div><div class=\"line number35 index34 alt2\">&nbsp;</div><div class=\"line number36 index35 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;button id=</code><code class=\"js string\">\"add\"</code><code class=\"js plain\">&gt;Submit rating&lt;/button&gt;</code></div><div class=\"line number37 index36 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;/p&gt;</code></div><div class=\"line number38 index37 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;/div&gt;</code></div><div class=\"line number39 index38 alt2\">&nbsp;</div><div class=\"line number40 index39 alt1\">&nbsp;</div><div class=\"line number41 index40 alt2\">&nbsp;</div><div class=\"line number42 index41 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;div </code><code class=\"js keyword\">class</code><code class=\"js plain\">=</code><code class=\"js string\">\"summaryTable\"</code><code class=\"js plain\">&gt;</code></div><div class=\"line number43 index42 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;div id=</code><code class=\"js string\">\"users\"</code><code class=\"js plain\">&gt;&lt;h3&gt;Recent users&lt;/h3&gt;&lt;/div&gt;</code></div><div class=\"line number44 index43 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;div id=</code><code class=\"js string\">\"ratings\"</code><code class=\"js plain\">&gt;&lt;h3&gt;Recent movies rated&lt;/h3&gt;&lt;/div&gt;</code></div><div class=\"line number45 index44 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;/div&gt;</code></div><div class=\"line number46 index45 alt1\">&nbsp;</div><div class=\"line number47 index46 alt2\"><code class=\"js spaces\">&nbsp;</code><code class=\"js plain\">&lt;/div&gt;</code></div></div></td></tr></tbody></table></div></div>\n\n        <strong>JavaScript</strong>\n\n        <div><div id=\"highlighter_839716\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div><div class=\"line number31 index30 alt2\">31</div><div class=\"line number32 index31 alt1\">32</div><div class=\"line number33 index32 alt2\">33</div><div class=\"line number34 index33 alt1\">34</div><div class=\"line number35 index34 alt2\">35</div><div class=\"line number36 index35 alt1\">36</div><div class=\"line number37 index36 alt2\">37</div><div class=\"line number38 index37 alt1\">38</div><div class=\"line number39 index38 alt2\">39</div><div class=\"line number40 index39 alt1\">40</div><div class=\"line number41 index40 alt2\">41</div><div class=\"line number42 index41 alt1\">42</div><div class=\"line number43 index42 alt2\">43</div><div class=\"line number44 index43 alt1\">44</div><div class=\"line number45 index44 alt2\">45</div><div class=\"line number46 index45 alt1\">46</div><div class=\"line number47 index46 alt2\">47</div><div class=\"line number48 index47 alt1\">48</div><div class=\"line number49 index48 alt2\">49</div><div class=\"line number50 index49 alt1\">50</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js plain\">;(</code><code class=\"js keyword\">function</code><code class=\"js plain\">( $ ) {</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// Pre-compile templates and \"cache\" them using closure</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">var</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">userTemplate = _.template($( </code><code class=\"js string\">\"#userTemplate\"</code> <code class=\"js plain\">).html()),</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">ratingsTemplate = _.template($( </code><code class=\"js string\">\"#ratingsTemplate\"</code> <code class=\"js plain\">).html());</code></div><div class=\"line number7 index6 alt2\">&nbsp;</div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// Subscribe to the new user topic, which adds a user</code></div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// to a list of users who have submitted reviews</code></div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">$.subscribe( </code><code class=\"js string\">\"/new/user\"</code><code class=\"js plain\">, </code><code class=\"js keyword\">function</code><code class=\"js plain\">( e, data ){</code></div><div class=\"line number11 index10 alt2\">&nbsp;</div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">if</code><code class=\"js plain\">( data ){</code></div><div class=\"line number13 index12 alt2\">&nbsp;</div><div class=\"line number14 index13 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">$(</code><code class=\"js string\">'#users'</code><code class=\"js plain\">).append( userTemplate( data ));</code></div><div class=\"line number15 index14 alt2\">&nbsp;</div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number17 index16 alt2\">&nbsp;</div><div class=\"line number18 index17 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">});</code></div><div class=\"line number19 index18 alt2\">&nbsp;</div><div class=\"line number20 index19 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// Subscribe to the new rating topic. This is composed of a title and</code></div><div class=\"line number21 index20 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// rating. New ratings are appended to a running list of added user</code></div><div class=\"line number22 index21 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// ratings.</code></div><div class=\"line number23 index22 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">$.subscribe( </code><code class=\"js string\">\"/new/rating\"</code><code class=\"js plain\">, </code><code class=\"js keyword\">function</code><code class=\"js plain\">( e, data ){</code></div><div class=\"line number24 index23 alt1\">&nbsp;</div><div class=\"line number25 index24 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">if</code><code class=\"js plain\">( data ){</code></div><div class=\"line number26 index25 alt1\">&nbsp;</div><div class=\"line number27 index26 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">$( </code><code class=\"js string\">\"#ratings\"</code> <code class=\"js plain\">).append( ratingsTemplate( data ) );</code></div><div class=\"line number28 index27 alt1\">&nbsp;</div><div class=\"line number29 index28 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number30 index29 alt1\">&nbsp;</div><div class=\"line number31 index30 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">});</code></div><div class=\"line number32 index31 alt1\">&nbsp;</div><div class=\"line number33 index32 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// Handler for adding a new user</code></div><div class=\"line number34 index33 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">$(</code><code class=\"js string\">\"#add\"</code><code class=\"js plain\">).on(</code><code class=\"js string\">\"click\"</code><code class=\"js plain\">, </code><code class=\"js keyword\">function</code><code class=\"js plain\">( e ) {</code></div><div class=\"line number35 index34 alt2\">&nbsp;</div><div class=\"line number36 index35 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">e.preventDefault();</code></div><div class=\"line number37 index36 alt2\">&nbsp;</div><div class=\"line number38 index37 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">strUser = $(</code><code class=\"js string\">\"#twitter_handle\"</code><code class=\"js plain\">).val(),</code></div><div class=\"line number39 index38 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">strMovie = $(</code><code class=\"js string\">\"#movie_seen\"</code><code class=\"js plain\">).val(),</code></div><div class=\"line number40 index39 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">strRating = $(</code><code class=\"js string\">\"#movie_rating\"</code><code class=\"js plain\">).val();</code></div><div class=\"line number41 index40 alt2\">&nbsp;</div><div class=\"line number42 index41 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Inform the application a new user is available</code></div><div class=\"line number43 index42 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">$.publish( </code><code class=\"js string\">\"/new/user\"</code><code class=\"js plain\">, { name: strUser } );</code></div><div class=\"line number44 index43 alt1\">&nbsp;</div><div class=\"line number45 index44 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Inform the app a new rating is available</code></div><div class=\"line number46 index45 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">$.publish( </code><code class=\"js string\">\"/new/rating\"</code><code class=\"js plain\">, { title: strMovie, rating: strRating} );</code></div><div class=\"line number47 index46 alt2\">&nbsp;</div><div class=\"line number48 index47 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">});</code></div><div class=\"line number49 index48 alt2\">&nbsp;</div><div class=\"line number50 index49 alt1\"><code class=\"js plain\">})( jQuery );</code></div></div></td></tr></tbody></table></div></div>\n\n        <h4>Example: Decoupling an Ajax-based jQuery application</h4>\n\n        <p>\n        In our final example, we're going to take a practical look at how decoupling our code using Pub/Sub early on in the development process can save us some potentially painful refactoring later on.</p>\n\n        <p>\n        Quite often in Ajax-heavy applications, once we've received a response to a request we want to achieve more than just one unique action. One could simply add all of their post-request logic into a success callback, but there are drawbacks to this approach.</p>\n\n        <p>\n        Highly coupled applications sometimes increase the effort required to reuse functionality due to the increased inter-function/code dependency. What this means is that although keeping our post-request logic hardcoded in a callback might be fine if we're just trying to grab a result set once, it's not as appropriate when we want to make further Ajax-calls to the same data source (and different end-behavior) without rewriting parts of the code multiple times. Rather than having to go back through each layer that calls the same data-source and generalizing them later on, we can use pub/sub from the start and save time.</p>\n\n        <p>\n        Using Observers, we can also easily separate application-wide notifications regarding different events down to whatever level of granularity we're comfortable with - something which can be less elegantly done using other patterns.</p>\n\n        <p>\n        Notice how in our sample below, one topic notification is made when a user indicates they want to make a search query and another is made when the request returns and actual data is available for consumption. It's left up to the subscribers to then decide how to use knowledge of these events (or the data returned). The benefits of this are that, if we wanted, we could have 10 different subscribers utilizing the data returned in different ways but as far as the Ajax-layer is concerned, it doesn't care. Its sole duty is to request and return data then pass it on to whoever wants to use it. This separation of concerns can make the overall design of our code a little cleaner.</p>\n\n\n        <strong>HTML/Templates</strong>:\n\n        <div><div id=\"highlighter_13321\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js plain\">&lt;form id=</code><code class=\"js string\">\"flickrSearch\"</code><code class=\"js plain\">&gt;</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;input type=</code><code class=\"js string\">\"text\"</code> <code class=\"js plain\">name=</code><code class=\"js string\">\"tag\"</code> <code class=\"js plain\">id=</code><code class=\"js string\">\"query\"</code><code class=\"js plain\">/&gt;</code></div><div class=\"line number4 index3 alt1\">&nbsp;</div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;input type=</code><code class=\"js string\">\"submit\"</code> <code class=\"js plain\">name=</code><code class=\"js string\">\"submit\"</code> <code class=\"js plain\">value=</code><code class=\"js string\">\"submit\"</code><code class=\"js plain\">/&gt;</code></div><div class=\"line number6 index5 alt1\">&nbsp;</div><div class=\"line number7 index6 alt2\"><code class=\"js plain\">&lt;/form&gt;</code></div><div class=\"line number8 index7 alt1\">&nbsp;</div><div class=\"line number9 index8 alt2\">&nbsp;</div><div class=\"line number10 index9 alt1\">&nbsp;</div><div class=\"line number11 index10 alt2\"><code class=\"js plain\">&lt;div id=</code><code class=\"js string\">\"lastQuery\"</code><code class=\"js plain\">&gt;&lt;/div&gt;</code></div><div class=\"line number12 index11 alt1\">&nbsp;</div><div class=\"line number13 index12 alt2\"><code class=\"js plain\">&lt;ol id=</code><code class=\"js string\">\"searchResults\"</code><code class=\"js plain\">&gt;&lt;/ol&gt;</code></div><div class=\"line number14 index13 alt1\">&nbsp;</div><div class=\"line number15 index14 alt2\">&nbsp;</div><div class=\"line number16 index15 alt1\">&nbsp;</div><div class=\"line number17 index16 alt2\"><code class=\"js plain\">&lt;script id=</code><code class=\"js string\">\"resultTemplate\"</code> <code class=\"js plain\">type=</code><code class=\"js string\">\"text/html\"</code><code class=\"js plain\">&gt;</code></div><div class=\"line number18 index17 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;% _.each(items, </code><code class=\"js keyword\">function</code><code class=\"js plain\">( item ){ %&gt;</code></div><div class=\"line number19 index18 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;li&gt;&lt;img src=</code><code class=\"js string\">\"&lt;%= item.media.m %&gt;\"</code><code class=\"js plain\">/&gt;&lt;/li&gt;</code></div><div class=\"line number20 index19 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">&lt;% });%&gt;</code></div><div class=\"line number21 index20 alt2\"><code class=\"js plain\">&lt;/script&gt;</code></div></div></td></tr></tbody></table></div></div>\n\n        <strong>JavaScript</strong>:\n        <div><div id=\"highlighter_875508\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div><div class=\"line number31 index30 alt2\">31</div><div class=\"line number32 index31 alt1\">32</div><div class=\"line number33 index32 alt2\">33</div><div class=\"line number34 index33 alt1\">34</div><div class=\"line number35 index34 alt2\">35</div><div class=\"line number36 index35 alt1\">36</div><div class=\"line number37 index36 alt2\">37</div><div class=\"line number38 index37 alt1\">38</div><div class=\"line number39 index38 alt2\">39</div><div class=\"line number40 index39 alt1\">40</div><div class=\"line number41 index40 alt2\">41</div><div class=\"line number42 index41 alt1\">42</div><div class=\"line number43 index42 alt2\">43</div><div class=\"line number44 index43 alt1\">44</div><div class=\"line number45 index44 alt2\">45</div><div class=\"line number46 index45 alt1\">46</div><div class=\"line number47 index46 alt2\">47</div><div class=\"line number48 index47 alt1\">48</div><div class=\"line number49 index48 alt2\">49</div><div class=\"line number50 index49 alt1\">50</div><div class=\"line number51 index50 alt2\">51</div><div class=\"line number52 index51 alt1\">52</div><div class=\"line number53 index52 alt2\">53</div><div class=\"line number54 index53 alt1\">54</div><div class=\"line number55 index54 alt2\">55</div><div class=\"line number56 index55 alt1\">56</div><div class=\"line number57 index56 alt2\">57</div><div class=\"line number58 index57 alt1\">58</div><div class=\"line number59 index58 alt2\">59</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js plain\">;(</code><code class=\"js keyword\">function</code><code class=\"js plain\">( $ ) {</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Pre-compile template and \"cache\" it using closure</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">resultTemplate = _.template($( </code><code class=\"js string\">\"#resultTemplate\"</code> <code class=\"js plain\">).html());</code></div><div class=\"line number5 index4 alt2\">&nbsp;</div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Subscribe to the new search tags topic</code></div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">$.subscribe( </code><code class=\"js string\">\"/search/tags\"</code><code class=\"js plain\">, </code><code class=\"js keyword\">function</code><code class=\"js plain\">( e, tags ) {</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">$( </code><code class=\"js string\">\"#lastQuery\"</code> <code class=\"js plain\">)</code></div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">.html(</code><code class=\"js string\">\"&lt;p&gt;Searched for:&lt;strong&gt;\"</code> <code class=\"js plain\">+ tags + </code><code class=\"js string\">\"&lt;/strong&gt;&lt;/p&gt;\"</code><code class=\"js plain\">);</code></div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">});</code></div><div class=\"line number11 index10 alt2\">&nbsp;</div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Subscribe to the new results topic</code></div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">$.subscribe( </code><code class=\"js string\">\"/search/resultSet\"</code><code class=\"js plain\">, </code><code class=\"js keyword\">function</code><code class=\"js plain\">( e, results ){</code></div><div class=\"line number14 index13 alt1\">&nbsp;</div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">$( </code><code class=\"js string\">\"#searchResults\"</code> <code class=\"js plain\">).empty().append(resultTemplate( results ));</code></div><div class=\"line number16 index15 alt1\">&nbsp;</div><div class=\"line number17 index16 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">});</code></div><div class=\"line number18 index17 alt1\">&nbsp;</div><div class=\"line number19 index18 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Submit a search query and publish tags on the /search/tags topic</code></div><div class=\"line number20 index19 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">$( </code><code class=\"js string\">\"#flickrSearch\"</code> <code class=\"js plain\">).submit( </code><code class=\"js keyword\">function</code><code class=\"js plain\">( e ) {</code></div><div class=\"line number21 index20 alt2\">&nbsp;</div><div class=\"line number22 index21 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">e.preventDefault();</code></div><div class=\"line number23 index22 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">tags = $(</code><code class=\"js keyword\">this</code><code class=\"js plain\">).find( </code><code class=\"js string\">\"#query\"</code><code class=\"js plain\">).val();</code></div><div class=\"line number24 index23 alt1\">&nbsp;</div><div class=\"line number25 index24 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">if</code> <code class=\"js plain\">( !tags ){</code></div><div class=\"line number26 index25 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code><code class=\"js plain\">;</code></div><div class=\"line number27 index26 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number28 index27 alt1\">&nbsp;</div><div class=\"line number29 index28 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">$.publish( </code><code class=\"js string\">\"/search/tags\"</code><code class=\"js plain\">, [ $.trim(tags) ]);</code></div><div class=\"line number30 index29 alt1\">&nbsp;</div><div class=\"line number31 index30 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">});</code></div><div class=\"line number32 index31 alt1\">&nbsp;</div><div class=\"line number33 index32 alt2\">&nbsp;</div><div class=\"line number34 index33 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Subscribe to new tags being published and perform</code></div><div class=\"line number35 index34 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// a search query using them. Once data has returned</code></div><div class=\"line number36 index35 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// publish this data for the rest of the application</code></div><div class=\"line number37 index36 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// to consume</code></div><div class=\"line number38 index37 alt1\">&nbsp;</div><div class=\"line number39 index38 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">$.subscribe(</code><code class=\"js string\">\"/search/tags\"</code><code class=\"js plain\">, </code><code class=\"js keyword\">function</code><code class=\"js plain\">( e, tags ) {</code></div><div class=\"line number40 index39 alt1\">&nbsp;</div><div class=\"line number41 index40 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">$.getJSON( </code><code class=\"js string\">\"<a href=\"http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?\">http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?</a>\"</code><code class=\"js plain\">, {</code></div><div class=\"line number42 index41 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">tags: tags,</code></div><div class=\"line number43 index42 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">tagmode: </code><code class=\"js string\">\"any\"</code><code class=\"js plain\">,</code></div><div class=\"line number44 index43 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">format: </code><code class=\"js string\">\"json\"</code></div><div class=\"line number45 index44 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number46 index45 alt1\">&nbsp;</div><div class=\"line number47 index46 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">function</code><code class=\"js plain\">( data ){</code></div><div class=\"line number48 index47 alt1\">&nbsp;</div><div class=\"line number49 index48 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">if</code><code class=\"js plain\">( !data.items.length ) {</code></div><div class=\"line number50 index49 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code><code class=\"js plain\">;</code></div><div class=\"line number51 index50 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number52 index51 alt1\">&nbsp;</div><div class=\"line number53 index52 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">$.publish( </code><code class=\"js string\">\"/search/resultSet\"</code><code class=\"js plain\">, { items: data.items } );</code></div><div class=\"line number54 index53 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">});</code></div><div class=\"line number55 index54 alt2\">&nbsp;</div><div class=\"line number56 index55 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">});</code></div><div class=\"line number57 index56 alt2\">&nbsp;</div><div class=\"line number58 index57 alt1\">&nbsp;</div><div class=\"line number59 index58 alt2\"><code class=\"js plain\">})( jQuery );</code></div></div></td></tr></tbody></table></div></div>\n\n        <p>\n        The Observer pattern is useful for decoupling a number of different scenarios in application design and if you haven't been using it, I recommend picking up one of the pre-written implementations mentioned today and just giving it a try out. It's one of the easier design patterns to get started with but also one of the most powerful.</p>\n",
      "pattern": "The Observer Pattern"
    },
    "-L6a3Uq6Ua7CcV88K53O": {
      "description": " <p>The GoF refer to the prototype pattern as one which creates objects based on a template of an existing object through cloning.</p>\n\n    <p>We can think of the prototype pattern as being based on prototypal inheritance where we create objects which act as prototypes for other objects. The prototype object itself is effectively used as a blueprint for each object the constructor creates. If the prototype of the constructor function used contains a property called <code>name</code> for example (as per the code sample lower down), then each object created by that same constructor will also have this same property.</p>\n\n    <p>Reviewing the definitions for this pattern in existing (non-JavaScript) literature, we <strong>may</strong> find references to classes once again. The reality is that prototypal inheritance avoids using classes altogether. There isn't a \"definition\" object nor a core object in theory. We're simply creating copies of existing functional objects.</p>\n\n    <p>One of the benefits of using the prototype pattern is that we're working with the prototypal strengths JavaScript has to offer natively rather than attempting to imitate features of other languages. With other design patterns, this isn't always the case.</p>\n\n    <p>Not only is the pattern an easy way to implement inheritance, but it can also come with a performance boost as well: when defining a function in an object, they're all created by reference (so all child objects point to the same function) instead of creating their own individual copies. </p>\n\n    <p>For those interested, real prototypal inheritance, as defined in the ECMAScript 5 standard, requires the use of <code>Object.create</code> (which we previously looked at earlier in this section). To remind ourselves, <code>Object.create</code> creates an object which has a specified prototype and optionally contains specified properties as well (e.g <code>Object.create( prototype, optionalDescriptorObjects )</code>).</p>\n\n    <p>We can see this demonstrated in the example below:</p>\n\n    <div><div id=\"highlighter_388926\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">myCar = {</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">name: </code><code class=\"js string\">\"Ford Escort\"</code><code class=\"js plain\">,</code></div><div class=\"line number4 index3 alt1\">&nbsp;</div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">drive: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js string\">\"Weeee. I'm driving!\"</code> <code class=\"js plain\">);</code></div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number8 index7 alt1\">&nbsp;</div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">panic: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js string\">\"Wait. How do you stop this thing?\"</code> <code class=\"js plain\">);</code></div><div class=\"line number11 index10 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number12 index11 alt1\">&nbsp;</div><div class=\"line number13 index12 alt2\"><code class=\"js plain\">};</code></div><div class=\"line number14 index13 alt1\">&nbsp;</div><div class=\"line number15 index14 alt2\"><code class=\"js comments\">// Use Object.create to instantiate a new car</code></div><div class=\"line number16 index15 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">yourCar = Object.create( myCar );</code></div><div class=\"line number17 index16 alt2\">&nbsp;</div><div class=\"line number18 index17 alt1\"><code class=\"js comments\">// Now we can see that one is a prototype of the other</code></div><div class=\"line number19 index18 alt2\"><code class=\"js plain\">console.log( yourCar.name );</code></div></div></td></tr></tbody></table></div></div><p></p>\n    <p>\n    <code>Object.create</code> also allows us to easily implement advanced concepts such as differential inheritance where objects are able to directly inherit from other objects. We saw earlier that <code>Object.create</code> allows us to initialise object properties using the second supplied argument. For example:\n    </p>\n    <p>\n    </p><div><div id=\"highlighter_673317\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">vehicle = {</code></div><div class=\"line number2 index1 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">getModel: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js string\">\"The model of this vehicle is..\"</code> <code class=\"js plain\">+ </code><code class=\"js keyword\">this</code><code class=\"js plain\">.model );</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number5 index4 alt2\"><code class=\"js plain\">};</code></div><div class=\"line number6 index5 alt1\">&nbsp;</div><div class=\"line number7 index6 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">car = Object.create(vehicle, {</code></div><div class=\"line number8 index7 alt1\">&nbsp;</div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js string\">\"id\"</code><code class=\"js plain\">: {</code></div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">value: MY_GLOBAL.nextId(),</code></div><div class=\"line number11 index10 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// writable:false, configurable:false by default</code></div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">enumerable: </code><code class=\"js keyword\">true</code></div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number14 index13 alt1\">&nbsp;</div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js string\">\"model\"</code><code class=\"js plain\">: {</code></div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">value: </code><code class=\"js string\">\"Ford\"</code><code class=\"js plain\">,</code></div><div class=\"line number17 index16 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">enumerable: </code><code class=\"js keyword\">true</code></div><div class=\"line number18 index17 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number19 index18 alt2\">&nbsp;</div><div class=\"line number20 index19 alt1\"><code class=\"js plain\">});</code></div></div></td></tr></tbody></table></div></div>\n    <p></p>\n    <p>\n    Here the properties can be initialized on the second argument of <code>Object.create</code> using an object literal with a syntax similar to that used by the <code>Object.defineProperties</code> and <code>Object.defineProperty</code> methods that we looked at previously.</p>\n\n    <p>It is worth noting that prototypal relationships can cause trouble when enumerating properties of objects and (as Crockford recommends) wrapping the contents of the loop in a <code>hasOwnProperty()</code> check.</p>\n\n    <p>If we wish to implement the prototype pattern without directly using <code>Object.create</code>, we can simulate the pattern as per the above example as follows:</p>\n\n    <p>\n    </p><div><div id=\"highlighter_3762\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">vehiclePrototype = {</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">init: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">( carModel ) {</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.model = carModel;</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number6 index5 alt1\">&nbsp;</div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">getModel: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js string\">\"The model of this vehicle is..\"</code> <code class=\"js plain\">+ </code><code class=\"js keyword\">this</code><code class=\"js plain\">.model);</code></div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number10 index9 alt1\"><code class=\"js plain\">};</code></div><div class=\"line number11 index10 alt2\">&nbsp;</div><div class=\"line number12 index11 alt1\">&nbsp;</div><div class=\"line number13 index12 alt2\"><code class=\"js keyword\">function</code> <code class=\"js plain\">vehicle( model ) {</code></div><div class=\"line number14 index13 alt1\">&nbsp;</div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">function</code> <code class=\"js plain\">F() {};</code></div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">F.prototype = vehiclePrototype;</code></div><div class=\"line number17 index16 alt2\">&nbsp;</div><div class=\"line number18 index17 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">f = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">F();</code></div><div class=\"line number19 index18 alt2\">&nbsp;</div><div class=\"line number20 index19 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">f.init( model );</code></div><div class=\"line number21 index20 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">f;</code></div><div class=\"line number22 index21 alt1\">&nbsp;</div><div class=\"line number23 index22 alt2\"><code class=\"js plain\">}</code></div><div class=\"line number24 index23 alt1\">&nbsp;</div><div class=\"line number25 index24 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">car = vehicle( </code><code class=\"js string\">\"Ford Escort\"</code> <code class=\"js plain\">);</code></div><div class=\"line number26 index25 alt1\"><code class=\"js plain\">car.getModel();</code></div></div></td></tr></tbody></table></div></div>\n    <p></p>\n\n    <p><strong>Note:</strong> This alternative does not allow the user to define read-only properties in the same manner (as the vehiclePrototype may be altered if not careful).</p>\n\n    <p>A final alternative implementation of the Prototype pattern could be the following:</p>\n\n    <div><div id=\"highlighter_728341\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">beget = (</code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">function</code> <code class=\"js plain\">F() {}</code></div><div class=\"line number4 index3 alt1\">&nbsp;</div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js keyword\">function</code> <code class=\"js plain\">( proto ) {</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">F.prototype = proto;</code></div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js keyword\">new</code> <code class=\"js plain\">F();</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number9 index8 alt2\"><code class=\"js plain\">})();</code></div></div></td></tr></tbody></table></div></div>\n\n    <p>One could reference this method from the <code>vehicle</code> function. Note, however that <code>vehicle</code> here is emulating a constructor, since the prototype pattern does not include any notion of initialization beyond linking an object to a prototype.</p>",
      "pattern": " The Prototype Pattern"
    },
    "-L6a3b4azZBip6r3A4RJ": {
      "description": " <p>Now that we're a little more familiar with the module pattern, let’s take a look at a slightly improved version - Christian Heilmann’s Revealing Module pattern.</p>\n\n    <p>The Revealing Module pattern came about as Heilmann was frustrated with the fact that he had to repeat the name of the main object when we wanted to call one public method from another or access public variables.&nbsp; He also disliked the Module pattern’s requirement for having to switch to object literal notation for the things he wished to make public. </p>\n\n    <p>The result of his efforts was an updated pattern where we would simply define all of our functions and variables in the private scope and return an anonymous object with pointers to the private functionality we wished to reveal as public.</p>\n\n    <p>An example of how to use the Revealing Module pattern can be found below:</p>\n    <p>\n    </p><div><div id=\"highlighter_245820\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">myRevealingModule = (</code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">privateVar = </code><code class=\"js string\">\"Ben Cherry\"</code><code class=\"js plain\">,</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">publicVar = </code><code class=\"js string\">\"Hey there!\"</code><code class=\"js plain\">;</code></div><div class=\"line number5 index4 alt2\">&nbsp;</div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">function</code> <code class=\"js plain\">privateFunction() {</code></div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js string\">\"Name:\"</code> <code class=\"js plain\">+ privateVar );</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number9 index8 alt2\">&nbsp;</div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">function</code> <code class=\"js plain\">publicSetName( strName ) {</code></div><div class=\"line number11 index10 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">privateVar = strName;</code></div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number13 index12 alt2\">&nbsp;</div><div class=\"line number14 index13 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">function</code> <code class=\"js plain\">publicGetName() {</code></div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">privateFunction();</code></div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number17 index16 alt2\">&nbsp;</div><div class=\"line number18 index17 alt1\">&nbsp;</div><div class=\"line number19 index18 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Reveal public pointers to</code></div><div class=\"line number20 index19 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// private functions and properties</code></div><div class=\"line number21 index20 alt2\">&nbsp;</div><div class=\"line number22 index21 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">{</code></div><div class=\"line number23 index22 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">setName: publicSetName,</code></div><div class=\"line number24 index23 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">greeting: publicVar,</code></div><div class=\"line number25 index24 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">getName: publicGetName</code></div><div class=\"line number26 index25 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number27 index26 alt2\">&nbsp;</div><div class=\"line number28 index27 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">})();</code></div><div class=\"line number29 index28 alt2\">&nbsp;</div><div class=\"line number30 index29 alt1\"><code class=\"js plain\">myRevealingModule.setName( </code><code class=\"js string\">\"Paul Kinlan\"</code> <code class=\"js plain\">);</code></div></div></td></tr></tbody></table></div></div><p></p>\n\n    <p>The pattern can also be used to reveal private functions and properties with a more specific naming scheme if we would prefer:</p>\n\n    <p></p><div><div id=\"highlighter_235251\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div><div class=\"line number31 index30 alt2\">31</div><div class=\"line number32 index31 alt1\">32</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">myRevealingModule = (</code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">privateCounter = 0;</code></div><div class=\"line number4 index3 alt1\">&nbsp;</div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">function</code> <code class=\"js plain\">privateFunction() {</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">privateCounter++;</code></div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number8 index7 alt1\">&nbsp;</div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">function</code> <code class=\"js plain\">publicFunction() {</code></div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">publicIncrement();</code></div><div class=\"line number11 index10 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number12 index11 alt1\">&nbsp;</div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">function</code> <code class=\"js plain\">publicIncrement() {</code></div><div class=\"line number14 index13 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">privateFunction();</code></div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number16 index15 alt1\">&nbsp;</div><div class=\"line number17 index16 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">function</code> <code class=\"js plain\">publicGetCount(){</code></div><div class=\"line number18 index17 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">privateCounter;</code></div><div class=\"line number19 index18 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number20 index19 alt1\">&nbsp;</div><div class=\"line number21 index20 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Reveal public pointers to</code></div><div class=\"line number22 index21 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// private functions and properties</code></div><div class=\"line number23 index22 alt2\">&nbsp;</div><div class=\"line number24 index23 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">{</code></div><div class=\"line number25 index24 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">start: publicFunction,</code></div><div class=\"line number26 index25 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">increment: publicIncrement,</code></div><div class=\"line number27 index26 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">count: publicGetCount</code></div><div class=\"line number28 index27 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number29 index28 alt2\">&nbsp;</div><div class=\"line number30 index29 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">})();</code></div><div class=\"line number31 index30 alt2\">&nbsp;</div><div class=\"line number32 index31 alt1\"><code class=\"js plain\">myRevealingModule.start();</code></div></div></td></tr></tbody></table></div></div><p></p>\n\n    <p><strong>Advantages</strong></p>\n\n    <p>This pattern allows the syntax of our scripts to be more consistent. It also makes it more clear at the end of the module which of our functions and variables may be accessed publicly which eases readability.</p>\n\n    <p><strong>Disadvantages</strong></p>\n    <p>A disadvantage of this pattern is that if a private function refers to a public function, that public function can't be overridden if a patch is necessary. This is because the private function will continue to refer to the private implementation and the pattern doesn't apply to public members, only to functions.</p>\n    <p>Public object members which refer to private variables are also subject to the no-patch rule notes above.</p>\n\n    <p>As a result of this, modules created with the Revealing Module pattern may be more fragile than those created with the original Module pattern, so care should be taken during usage.</p>\n\n",
      "pattern": " The Revealing Module Pattern"
    },
    "-L6a3j7iSYr_x9Lt4_FH": {
      "description": "  <p>The Singleton pattern is thus known because it restricts instantiation of a class to a single object. Classically, the Singleton pattern can be implemented by creating a class with a method that creates a new instance of the class if one doesn't exist. In the event of an instance already existing, it simply returns a reference to that object.</p>\n\n        <p>Singletons differ from static <i>classes</i> (or objects) as we can delay their initialization, generally because they require some information that may not be available during initialization time. They don't provide a way for code that is unaware of a previous reference to them to easily retrieve them. This is because it is neither the object or \"class\" that's returned by a Singleton, it's a structure. Think of how closured variables aren't actually closures - the function scope that provides the closure is the closure.</p>\n\n        <p>In JavaScript, Singletons serve as a shared resource namespace which isolate implementation code from the global namespace so as to provide a single point of access for functions.</p>\n\n        <p>We can implement a Singleton as follows:</p>\n\n        <div><div id=\"highlighter_666441\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div><div class=\"line number31 index30 alt2\">31</div><div class=\"line number32 index31 alt1\">32</div><div class=\"line number33 index32 alt2\">33</div><div class=\"line number34 index33 alt1\">34</div><div class=\"line number35 index34 alt2\">35</div><div class=\"line number36 index35 alt1\">36</div><div class=\"line number37 index36 alt2\">37</div><div class=\"line number38 index37 alt1\">38</div><div class=\"line number39 index38 alt2\">39</div><div class=\"line number40 index39 alt1\">40</div><div class=\"line number41 index40 alt2\">41</div><div class=\"line number42 index41 alt1\">42</div><div class=\"line number43 index42 alt2\">43</div><div class=\"line number44 index43 alt1\">44</div><div class=\"line number45 index44 alt2\">45</div><div class=\"line number46 index45 alt1\">46</div><div class=\"line number47 index46 alt2\">47</div><div class=\"line number48 index47 alt1\">48</div><div class=\"line number49 index48 alt2\">49</div><div class=\"line number50 index49 alt1\">50</div><div class=\"line number51 index50 alt2\">51</div><div class=\"line number52 index51 alt1\">52</div><div class=\"line number53 index52 alt2\">53</div><div class=\"line number54 index53 alt1\">54</div><div class=\"line number55 index54 alt2\">55</div><div class=\"line number56 index55 alt1\">56</div><div class=\"line number57 index56 alt2\">57</div><div class=\"line number58 index57 alt1\">58</div><div class=\"line number59 index58 alt2\">59</div><div class=\"line number60 index59 alt1\">60</div><div class=\"line number61 index60 alt2\">61</div><div class=\"line number62 index61 alt1\">62</div><div class=\"line number63 index62 alt2\">63</div><div class=\"line number64 index63 alt1\">64</div><div class=\"line number65 index64 alt2\">65</div><div class=\"line number66 index65 alt1\">66</div><div class=\"line number67 index66 alt2\">67</div><div class=\"line number68 index67 alt1\">68</div><div class=\"line number69 index68 alt2\">69</div><div class=\"line number70 index69 alt1\">70</div><div class=\"line number71 index70 alt2\">71</div><div class=\"line number72 index71 alt1\">72</div><div class=\"line number73 index72 alt2\">73</div><div class=\"line number74 index73 alt1\">74</div><div class=\"line number75 index74 alt2\">75</div><div class=\"line number76 index75 alt1\">76</div><div class=\"line number77 index76 alt2\">77</div><div class=\"line number78 index77 alt1\">78</div><div class=\"line number79 index78 alt2\">79</div><div class=\"line number80 index79 alt1\">80</div><div class=\"line number81 index80 alt2\">81</div><div class=\"line number82 index81 alt1\">82</div><div class=\"line number83 index82 alt2\">83</div><div class=\"line number84 index83 alt1\">84</div><div class=\"line number85 index84 alt2\">85</div><div class=\"line number86 index85 alt1\">86</div><div class=\"line number87 index86 alt2\">87</div><div class=\"line number88 index87 alt1\">88</div><div class=\"line number89 index88 alt2\">89</div><div class=\"line number90 index89 alt1\">90</div><div class=\"line number91 index90 alt2\">91</div><div class=\"line number92 index91 alt1\">92</div><div class=\"line number93 index92 alt2\">93</div><div class=\"line number94 index93 alt1\">94</div><div class=\"line number95 index94 alt2\">95</div><div class=\"line number96 index95 alt1\">96</div><div class=\"line number97 index96 alt2\">97</div><div class=\"line number98 index97 alt1\">98</div><div class=\"line number99 index98 alt2\">99</div><div class=\"line number100 index99 alt1\">100</div><div class=\"line number101 index100 alt2\">101</div><div class=\"line number102 index101 alt1\">102</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">mySingleton = (</code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// Instance stores a reference to the Singleton</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">instance;</code></div><div class=\"line number5 index4 alt2\">&nbsp;</div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">function</code> <code class=\"js plain\">init() {</code></div><div class=\"line number7 index6 alt2\">&nbsp;</div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Singleton</code></div><div class=\"line number9 index8 alt2\">&nbsp;</div><div class=\"line number10 index9 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Private methods and variables</code></div><div class=\"line number11 index10 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">function</code> <code class=\"js plain\">privateMethod(){</code></div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js string\">\"I am private\"</code> <code class=\"js plain\">);</code></div><div class=\"line number13 index12 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number14 index13 alt1\">&nbsp;</div><div class=\"line number15 index14 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">privateVariable = </code><code class=\"js string\">\"Im also private\"</code><code class=\"js plain\">;</code></div><div class=\"line number16 index15 alt1\">&nbsp;</div><div class=\"line number17 index16 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">privateRandomNumber = Math.random();</code></div><div class=\"line number18 index17 alt1\">&nbsp;</div><div class=\"line number19 index18 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">{</code></div><div class=\"line number20 index19 alt1\">&nbsp;</div><div class=\"line number21 index20 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Public methods and variables</code></div><div class=\"line number22 index21 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">publicMethod: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number23 index22 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">console.log( </code><code class=\"js string\">\"The public can see me!\"</code> <code class=\"js plain\">);</code></div><div class=\"line number24 index23 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">},</code></div><div class=\"line number25 index24 alt2\">&nbsp;</div><div class=\"line number26 index25 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">publicProperty: </code><code class=\"js string\">\"I am also public\"</code><code class=\"js plain\">,</code></div><div class=\"line number27 index26 alt2\">&nbsp;</div><div class=\"line number28 index27 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">getRandomNumber: </code><code class=\"js keyword\">function</code><code class=\"js plain\">() {</code></div><div class=\"line number29 index28 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">privateRandomNumber;</code></div><div class=\"line number30 index29 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number31 index30 alt2\">&nbsp;</div><div class=\"line number32 index31 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number33 index32 alt2\">&nbsp;</div><div class=\"line number34 index33 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number35 index34 alt2\">&nbsp;</div><div class=\"line number36 index35 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">{</code></div><div class=\"line number37 index36 alt2\">&nbsp;</div><div class=\"line number38 index37 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Get the Singleton instance if one exists</code></div><div class=\"line number39 index38 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// or create one if it doesn't</code></div><div class=\"line number40 index39 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">getInstance: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number41 index40 alt2\">&nbsp;</div><div class=\"line number42 index41 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">if</code> <code class=\"js plain\">( !instance ) {</code></div><div class=\"line number43 index42 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">instance = init();</code></div><div class=\"line number44 index43 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number45 index44 alt2\">&nbsp;</div><div class=\"line number46 index45 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">instance;</code></div><div class=\"line number47 index46 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number48 index47 alt1\">&nbsp;</div><div class=\"line number49 index48 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number50 index49 alt1\">&nbsp;</div><div class=\"line number51 index50 alt2\"><code class=\"js plain\">})();</code></div><div class=\"line number52 index51 alt1\">&nbsp;</div><div class=\"line number53 index52 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">myBadSingleton = (</code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number54 index53 alt1\">&nbsp;</div><div class=\"line number55 index54 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// Instance stores a reference to the Singleton</code></div><div class=\"line number56 index55 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">instance;</code></div><div class=\"line number57 index56 alt2\">&nbsp;</div><div class=\"line number58 index57 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">function</code> <code class=\"js plain\">init() {</code></div><div class=\"line number59 index58 alt2\">&nbsp;</div><div class=\"line number60 index59 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Singleton</code></div><div class=\"line number61 index60 alt2\">&nbsp;</div><div class=\"line number62 index61 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">privateRandomNumber = Math.random();</code></div><div class=\"line number63 index62 alt2\">&nbsp;</div><div class=\"line number64 index63 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">{</code></div><div class=\"line number65 index64 alt2\">&nbsp;</div><div class=\"line number66 index65 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">getRandomNumber: </code><code class=\"js keyword\">function</code><code class=\"js plain\">() {</code></div><div class=\"line number67 index66 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">privateRandomNumber;</code></div><div class=\"line number68 index67 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number69 index68 alt2\">&nbsp;</div><div class=\"line number70 index69 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number71 index70 alt2\">&nbsp;</div><div class=\"line number72 index71 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number73 index72 alt2\">&nbsp;</div><div class=\"line number74 index73 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">{</code></div><div class=\"line number75 index74 alt2\">&nbsp;</div><div class=\"line number76 index75 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Always create a new Singleton instance</code></div><div class=\"line number77 index76 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">getInstance: </code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number78 index77 alt1\">&nbsp;</div><div class=\"line number79 index78 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">instance = init();</code></div><div class=\"line number80 index79 alt1\">&nbsp;</div><div class=\"line number81 index80 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">instance;</code></div><div class=\"line number82 index81 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number83 index82 alt2\">&nbsp;</div><div class=\"line number84 index83 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number85 index84 alt2\">&nbsp;</div><div class=\"line number86 index85 alt1\"><code class=\"js plain\">})();</code></div><div class=\"line number87 index86 alt2\">&nbsp;</div><div class=\"line number88 index87 alt1\">&nbsp;</div><div class=\"line number89 index88 alt2\"><code class=\"js comments\">// Usage:</code></div><div class=\"line number90 index89 alt1\">&nbsp;</div><div class=\"line number91 index90 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">singleA = mySingleton.getInstance();</code></div><div class=\"line number92 index91 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">singleB = mySingleton.getInstance();</code></div><div class=\"line number93 index92 alt2\"><code class=\"js plain\">console.log( singleA.getRandomNumber() === singleB.getRandomNumber() ); </code><code class=\"js comments\">// true</code></div><div class=\"line number94 index93 alt1\">&nbsp;</div><div class=\"line number95 index94 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">badSingleA = myBadSingleton.getInstance();</code></div><div class=\"line number96 index95 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">badSingleB = myBadSingleton.getInstance();</code></div><div class=\"line number97 index96 alt2\"><code class=\"js plain\">console.log( badSingleA.getRandomNumber() !== badSingleB.getRandomNumber() ); </code><code class=\"js comments\">// true</code></div><div class=\"line number98 index97 alt1\">&nbsp;</div><div class=\"line number99 index98 alt2\"><code class=\"js comments\">// Note: as we are working with random numbers, there is a</code></div><div class=\"line number100 index99 alt1\"><code class=\"js comments\">// mathematical possibility both numbers will be the same,</code></div><div class=\"line number101 index100 alt2\"><code class=\"js comments\">// however unlikely. The above example should otherwise still</code></div><div class=\"line number102 index101 alt1\"><code class=\"js comments\">// be valid.</code></div></div></td></tr></tbody></table></div></div>\n\n        <p>What makes the Singleton is the global access to the instance (generally through <code>MySingleton.getInstance()</code>) as we don't (at least in static languages) call <code>new MySingleton()</code> directly. This is however possible in JavaScript.</p>\n\n        <p>In the GoF book, the <i>applicability</i> of the Singleton pattern is described as follows:</p>\n\n        <p>\n        </p><ul>\n        <li>There must be exactly one instance of a class, and it must be accessible to clients from a well-known access point.</li>\n        <li>When the sole instance should be extensible by subclassing, and clients should be able to use an extended instance without modifying their code.</li>\n        </ul>\n        <p></p>\n\n        <p>The second of these points refers to a case where we might need code such as:</p>\n\n        <div><div id=\"highlighter_848528\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js plain\">mySingleton.getInstance = </code><code class=\"js keyword\">function</code><code class=\"js plain\">(){</code></div><div class=\"line number2 index1 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">if</code> <code class=\"js plain\">( </code><code class=\"js keyword\">this</code><code class=\"js plain\">._instance == </code><code class=\"js keyword\">null</code> <code class=\"js plain\">) {</code></div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">if</code> <code class=\"js plain\">( isFoo() ) {</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">._instance = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">FooSingleton();</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">} </code><code class=\"js keyword\">else</code> <code class=\"js plain\">{</code></div><div class=\"line number6 index5 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">._instance = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">BasicSingleton();</code></div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js keyword\">this</code><code class=\"js plain\">._instance;</code></div><div class=\"line number10 index9 alt1\"><code class=\"js plain\">};</code></div></div></td></tr></tbody></table></div></div>\n\n\n        <p>Here, <code>getInstance</code> becomes a little like a Factory method and we don't need to update each point in our code accessing it. <code>FooSingleton</code> above would be a subclass of <code>BasicSingleton</code> and implement the same interface.</p>\n\n        <p>Why is deferring execution considered important for a Singleton?:</p>\n\n        <blockquote>In C++ it serves to isolate from the unpredictability of the order of dynamic initialization, returning control to the programmer.</blockquote>\n\n        <p>It is important to note the difference between a static instance of a class (object) and a Singleton: whilst a Singleton can be implemented as a static instance, it can also be constructed lazily, without the need for resources nor memory until this is actually needed.</p>\n\n        <p>If we have a static object that can be initialized directly, we need to ensure the code is always executed in the same order (e.g in case <code>objCar</code> needs <code>objWheel</code> during its initialization) and this doesn't scale when you have a large number of source files.</p>\n\n        <p>Both Singletons and static objects are useful but they shouldn't be overused - the same way in which we shouldn't overuse other patterns.</p>\n\n        <p>In practice, the Singleton pattern is useful when exactly one object is needed to coordinate others across a system. Here is one example with the pattern being used in this context:</p>\n        <p>\n        </p><div><div id=\"highlighter_943870\" class=\"syntaxhighlighter  js acodecode\"><div class=\"toolbar\"><span><a href=\"#\" class=\"toolbar_item command_help help\">?</a></span></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\">1</div><div class=\"line number2 index1 alt1\">2</div><div class=\"line number3 index2 alt2\">3</div><div class=\"line number4 index3 alt1\">4</div><div class=\"line number5 index4 alt2\">5</div><div class=\"line number6 index5 alt1\">6</div><div class=\"line number7 index6 alt2\">7</div><div class=\"line number8 index7 alt1\">8</div><div class=\"line number9 index8 alt2\">9</div><div class=\"line number10 index9 alt1\">10</div><div class=\"line number11 index10 alt2\">11</div><div class=\"line number12 index11 alt1\">12</div><div class=\"line number13 index12 alt2\">13</div><div class=\"line number14 index13 alt1\">14</div><div class=\"line number15 index14 alt2\">15</div><div class=\"line number16 index15 alt1\">16</div><div class=\"line number17 index16 alt2\">17</div><div class=\"line number18 index17 alt1\">18</div><div class=\"line number19 index18 alt2\">19</div><div class=\"line number20 index19 alt1\">20</div><div class=\"line number21 index20 alt2\">21</div><div class=\"line number22 index21 alt1\">22</div><div class=\"line number23 index22 alt2\">23</div><div class=\"line number24 index23 alt1\">24</div><div class=\"line number25 index24 alt2\">25</div><div class=\"line number26 index25 alt1\">26</div><div class=\"line number27 index26 alt2\">27</div><div class=\"line number28 index27 alt1\">28</div><div class=\"line number29 index28 alt2\">29</div><div class=\"line number30 index29 alt1\">30</div><div class=\"line number31 index30 alt2\">31</div><div class=\"line number32 index31 alt1\">32</div><div class=\"line number33 index32 alt2\">33</div><div class=\"line number34 index33 alt1\">34</div><div class=\"line number35 index34 alt2\">35</div><div class=\"line number36 index35 alt1\">36</div><div class=\"line number37 index36 alt2\">37</div><div class=\"line number38 index37 alt1\">38</div><div class=\"line number39 index38 alt2\">39</div><div class=\"line number40 index39 alt1\">40</div><div class=\"line number41 index40 alt2\">41</div><div class=\"line number42 index41 alt1\">42</div><div class=\"line number43 index42 alt2\">43</div><div class=\"line number44 index43 alt1\">44</div><div class=\"line number45 index44 alt2\">45</div><div class=\"line number46 index45 alt1\">46</div><div class=\"line number47 index46 alt2\">47</div><div class=\"line number48 index47 alt1\">48</div><div class=\"line number49 index48 alt2\">49</div><div class=\"line number50 index49 alt1\">50</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><code class=\"js keyword\">var</code> <code class=\"js plain\">SingletonTester = (</code><code class=\"js keyword\">function</code> <code class=\"js plain\">() {</code></div><div class=\"line number2 index1 alt1\">&nbsp;</div><div class=\"line number3 index2 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// options: an object containing configuration options for the singleton</code></div><div class=\"line number4 index3 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// e.g var options = { name: \"test\", pointX: 5};</code></div><div class=\"line number5 index4 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">function</code> <code class=\"js plain\">Singleton( options ) {</code></div><div class=\"line number6 index5 alt1\">&nbsp;</div><div class=\"line number7 index6 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// set options to the options supplied</code></div><div class=\"line number8 index7 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// or an empty object if none are provided</code></div><div class=\"line number9 index8 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">options = options || {};</code></div><div class=\"line number10 index9 alt1\">&nbsp;</div><div class=\"line number11 index10 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// set some properties for our singleton</code></div><div class=\"line number12 index11 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.name = </code><code class=\"js string\">\"SingletonTester\"</code><code class=\"js plain\">;</code></div><div class=\"line number13 index12 alt2\">&nbsp;</div><div class=\"line number14 index13 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.pointX = options.pointX || 6;</code></div><div class=\"line number15 index14 alt2\">&nbsp;</div><div class=\"line number16 index15 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">this</code><code class=\"js plain\">.pointY = options.pointY || 10;</code></div><div class=\"line number17 index16 alt2\">&nbsp;</div><div class=\"line number18 index17 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number19 index18 alt2\">&nbsp;</div><div class=\"line number20 index19 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// our instance holder</code></div><div class=\"line number21 index20 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">instance;</code></div><div class=\"line number22 index21 alt1\">&nbsp;</div><div class=\"line number23 index22 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js comments\">// an emulation of static variables and methods</code></div><div class=\"line number24 index23 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">var</code> <code class=\"js plain\">_static = {</code></div><div class=\"line number25 index24 alt2\">&nbsp;</div><div class=\"line number26 index25 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">name: </code><code class=\"js string\">\"SingletonTester\"</code><code class=\"js plain\">,</code></div><div class=\"line number27 index26 alt2\">&nbsp;</div><div class=\"line number28 index27 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// Method for getting an instance. It returns</code></div><div class=\"line number29 index28 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js comments\">// a singleton instance of a singleton object</code></div><div class=\"line number30 index29 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">getInstance: </code><code class=\"js keyword\">function</code><code class=\"js plain\">( options ) {</code></div><div class=\"line number31 index30 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">if</code><code class=\"js plain\">( instance === undefined ) {</code></div><div class=\"line number32 index31 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">instance = </code><code class=\"js keyword\">new</code> <code class=\"js plain\">Singleton( options );</code></div><div class=\"line number33 index32 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number34 index33 alt1\">&nbsp;</div><div class=\"line number35 index34 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">instance;</code></div><div class=\"line number36 index35 alt1\">&nbsp;</div><div class=\"line number37 index36 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"js plain\">}</code></div><div class=\"line number38 index37 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">};</code></div><div class=\"line number39 index38 alt2\">&nbsp;</div><div class=\"line number40 index39 alt1\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js keyword\">return</code> <code class=\"js plain\">_static;</code></div><div class=\"line number41 index40 alt2\">&nbsp;</div><div class=\"line number42 index41 alt1\"><code class=\"js plain\">})();</code></div><div class=\"line number43 index42 alt2\">&nbsp;</div><div class=\"line number44 index43 alt1\"><code class=\"js keyword\">var</code> <code class=\"js plain\">singletonTest = SingletonTester.getInstance({</code></div><div class=\"line number45 index44 alt2\"><code class=\"js spaces\">&nbsp;&nbsp;</code><code class=\"js plain\">pointX: 5</code></div><div class=\"line number46 index45 alt1\"><code class=\"js plain\">});</code></div><div class=\"line number47 index46 alt2\">&nbsp;</div><div class=\"line number48 index47 alt1\"><code class=\"js comments\">// Log the output of pointX just to verify it is correct</code></div><div class=\"line number49 index48 alt2\"><code class=\"js comments\">// Outputs: 5</code></div><div class=\"line number50 index49 alt1\"><code class=\"js plain\">console.log( singletonTest.pointX );</code></div></div></td></tr></tbody></table></div></div><p></p>\n\n        <p>Whilst the Singleton has valid uses, often when we find ourselves needing it in JavaScript it's a sign that we may need to re-evaluate our design.</p>\n\n        <p>They're often an indication that modules in a system are either tightly coupled or that logic is overly spread across multiple parts of a codebase. Singletons can be more difficult to test due to issues ranging from hidden dependencies, the difficulty in creating multiple instances, difficulty in stubbing dependencies and so on.</p>\n\n        <p>Miller Medeiros has previously recommended <a href=\"http://www.ibm.com/developerworks/webservices/library/co-single/index.html\">this</a> excellent article on the Singleton and its various issues for further reading as well as the comments to <a href=\"http://misko.hevery.com/2008/10/21/dependency-injection-myth-reference-passing/\">this</a> article, discussing how Singletons can increase tight coupling. I'm happy to second these recommendations as both pieces raise many important points about this pattern that are also worth noting.</p>\n",
      "pattern": " The Singleton Pattern"
    }
  }
}
